{"ast":null,"code":"import React,{useState,useEffect,useCallback,useMemo}from\"react\";import\"./App.css\";import{TournamentManager}from\"./components/TournamentManager\";import{PlayerManager}from\"./components/PlayerManager\";import{PairManager}from\"./components/PairManager\";import ScoreCorrector from\"./components/ScoreCorrector\";import StandingsTable from\"./components/StandingsTable\";import{SuccessModal}from\"./components/SuccessModal\";import{createPair,getPairs,updatePair,deletePair as deletePairFromDB,createMatch,getMatches,updateMatch,deleteMatchesByTournament,createGame,getGames,updateGame,deleteGame,updateTournament}from\"./lib/database\";import{testConnection}from\"./lib/supabaseClient\";import{FlexibleMatchFinisher}from\"./components/FlexibleMatchFinisher\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _winner$player,_winner$player2;const[selectedTournament,setSelectedTournament]=useState(null);const[pairs,setPairs]=useState([]);const[matches,setMatches]=useState([]);const[games,setGames]=useState([]);const[selectedMatchId,setSelectedMatchId]=useState(null);const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const[showPlayerManager,setShowPlayerManager]=useState(false);const[showPairManager,setShowPairManager]=useState(false);const[selectedPlayers,setSelectedPlayers]=useState([]);const[showWinnerScreen,setShowWinnerScreen]=useState(false);const[showMatchResults,setShowMatchResults]=useState(false);const[selectedMatchResults,setSelectedMatchResults]=useState(null);const[showScoreCorrector,setShowScoreCorrector]=useState(false);const[selectedCorrectorMatch,setSelectedCorrectorMatch]=useState(null);const[forceRefresh,setForceRefresh]=useState(0);const[showDebugInfo,setShowDebugInfo]=useState(false);const[editingGames,setEditingGames]=useState({});const[editingTieBreaks,setEditingTieBreaks]=useState({});const[showSuccessModal,setShowSuccessModal]=useState(false);const[successModalData,setSuccessModalData]=useState({title:\"\",message:\"\",icon:\"‚úÖ\"});// Cargar datos cuando se selecciona un torneo\nuseEffect(()=>{if(selectedTournament){loadTournamentData();}},[selectedTournament===null||selectedTournament===void 0?void 0:selectedTournament.id]);const loadTournamentData=useCallback(async()=>{if(!selectedTournament)return;try{setLoading(true);setError(\"\");console.log(\"Loading tournament data for:\",selectedTournament.name);const[pairsData,matchesData]=await Promise.all([getPairs(selectedTournament.id),getMatches(selectedTournament.id)]);console.log(\"Pairs loaded:\",pairsData.length,\"pairs\");setPairs(pairsData);console.log(\"Matches loaded from database:\",matchesData.length,\"matches\");setMatches(matchesData);}catch(err){console.error(\"Error loading tournament data:\",err);setError(\"Error al cargar los datos del torneo: \"+err.message);}finally{setLoading(false);}},[selectedTournament]);const deletePair=async pairId=>{try{setError(\"\");console.log(\"Eliminando pareja:\",pairId);await deletePairFromDB(pairId);setPairs(pairs.filter(p=>p.id!==pairId));console.log(\"Pareja eliminada exitosamente\");}catch(err){console.error(\"Error eliminando pareja:\",err);setError(\"Error al eliminar la pareja: \"+err.message);}};const updatePairPlayers=async(pairId,player1,player2)=>{try{setError(\"\");console.log(\"Actualizando pareja:\",pairId);console.log(\"Nuevos jugadores:\",player1.name,\"+\",player2.name);// Actualizar la pareja en la base de datos\nawait updatePair(pairId,{player1_id:player1.id,player2_id:player2.id});// Actualizar el estado local\nsetPairs(pairs.map(pair=>{if(pair.id===pairId){return{...pair,player1_id:player1.id,player2_id:player2.id,player1:player1,player2:player2};}return pair;}));console.log(\"Pareja actualizada exitosamente\");}catch(err){console.error(\"Error actualizando pareja:\",err);setError(\"Error al actualizar la pareja: \"+err.message);}};const addPair=async(player1,player2)=>{if(!selectedTournament){setError(\"No hay torneo seleccionado\");return;}try{setError(\"\");// Verificar duplicados en estado local\nconst existingPairLocal=pairs.find(pair=>{var _pair$player,_pair$player2,_pair$player3,_pair$player4;const sameIds=pair.player1_id===player1.id&&pair.player2_id===player2.id||pair.player1_id===player2.id&&pair.player2_id===player1.id;const sameNames=((_pair$player=pair.player1)===null||_pair$player===void 0?void 0:_pair$player.name.toLowerCase())===player1.name.toLowerCase()&&((_pair$player2=pair.player2)===null||_pair$player2===void 0?void 0:_pair$player2.name.toLowerCase())===player2.name.toLowerCase()||((_pair$player3=pair.player1)===null||_pair$player3===void 0?void 0:_pair$player3.name.toLowerCase())===player2.name.toLowerCase()&&((_pair$player4=pair.player2)===null||_pair$player4===void 0?void 0:_pair$player4.name.toLowerCase())===player1.name.toLowerCase();return sameIds||sameNames;});if(existingPairLocal){setError(`La pareja ${player1.name} y ${player2.name} ya est√° registrada`);return;}const newPair=await createPair(selectedTournament.id,player1.id,player2.id);setPairs([...pairs,newPair]);setSelectedPlayers([]);console.log(\"Pair added successfully\");}catch(err){console.error(\"Error creating pair:\",err);setError(\"Error al crear la pareja: \"+err.message);}};const startTournament=async()=>{if(!selectedTournament||pairs.length<2){setError(\"Se necesitan al menos 2 parejas para iniciar el torneo\");return;}try{setLoading(true);setError(\"\");console.log(\"üöÄ Iniciando torneo:\",selectedTournament.name);// Limpiar partidos existentes\nif(matches.length>0){await deleteMatchesByTournament(selectedTournament.id);setMatches([]);}const allPairs=[...pairs];const allCombinations=[];for(let i=0;i<allPairs.length;i++){for(let j=i+1;j<allPairs.length;j++){allCombinations.push({pair1:allPairs[i],pair2:allPairs[j]});}}const finalMatches=[];const remainingCombinations=[...allCombinations];let round=1;while(remainingCombinations.length>0){const roundMatches=[];const usedPairs=new Set();const courtOrder=[];for(let i=0;i<selectedTournament.courts;i++){const rotatedCourt=(round-1+i)%selectedTournament.courts+1;courtOrder.push(rotatedCourt);}for(let courtIndex=0;courtIndex<courtOrder.length;courtIndex++){const court=courtOrder[courtIndex];let bestIndex=-1;let bestScore=-1;for(let i=0;i<remainingCombinations.length;i++){const combo=remainingCombinations[i];if(!usedPairs.has(combo.pair1.id)&&!usedPairs.has(combo.pair2.id)){let score=0;for(let j=0;j<remainingCombinations.length;j++){if(i!==j){const futureCombo=remainingCombinations[j];if(!usedPairs.has(futureCombo.pair1.id)&&!usedPairs.has(futureCombo.pair2.id)&&futureCombo.pair1.id!==combo.pair1.id&&futureCombo.pair1.id!==combo.pair2.id&&futureCombo.pair2.id!==combo.pair1.id&&futureCombo.pair2.id!==combo.pair2.id){score++;}}}if(score>bestScore){bestScore=score;bestIndex=i;}}}if(bestIndex!==-1){const combo=remainingCombinations[bestIndex];const match={pair1:combo.pair1,pair2:combo.pair2,round,court};roundMatches.push(match);usedPairs.add(combo.pair1.id);usedPairs.add(combo.pair2.id);remainingCombinations.splice(bestIndex,1);}else{break;}}if(roundMatches.length>0){finalMatches.push(...roundMatches);}round++;}const createdMatches=[];for(const match of finalMatches){try{const createdMatch=await createMatch(selectedTournament.id,match.pair1.id,match.pair2.id,match.court,match.round);createdMatches.push(createdMatch);}catch(error){console.error(\"Error creating match:\",error);}}await updateTournament(selectedTournament.id,{is_started:true});setSelectedTournament(prev=>prev?{...prev,is_started:true}:null);await loadTournamentData();setSuccessModalData({title:\"¬°Torneo Iniciado!\",message:`Se han creado ${createdMatches.length} partidos exitosamente usando ${selectedTournament.courts} canchas. El torneo est√° listo para comenzar.`,icon:\"üèÜ\"});setShowSuccessModal(true);}catch(error){console.error(\"Error starting tournament:\",error);setError(\"Error al iniciar el torneo: \"+error.message);}finally{setLoading(false);}};const addGame=async matchId=>{try{setError(\"\");const gameNumber=games.filter(g=>g.match_id===matchId).length+1;const newGame=await createGame(matchId,gameNumber);setGames([...games,newGame]);}catch(err){console.error(\"‚ùå Error al agregar el juego:\",err);setError(\"Error al agregar el juego\");}};const updateGameScore=useCallback(async(gameId,pair1Games,pair2Games)=>{try{setError(\"\");setGames(prevGames=>prevGames.map(g=>g.id===gameId?{...g,pair1_games:pair1Games,pair2_games:pair2Games}:g));await updateGame(gameId,{pair1_games:pair1Games,pair2_games:pair2Games});}catch(err){console.error(\"‚ùå Error al actualizar el marcador:\",err);setError(\"Error al actualizar el marcador: \"+err.message);}},[games,selectedTournament]);const handleGameScoreChange=useCallback((gameId,pair1Games,pair2Games)=>{setEditingGames(prev=>({...prev,[gameId]:{pair1:pair1Games,pair2:pair2Games}}));},[]);const handleTieBreakScoreChange=useCallback((gameId,pair1Points,pair2Points)=>{setEditingTieBreaks(prev=>({...prev,[gameId]:{pair1:pair1Points,pair2:pair2Points}}));},[]);const handleGameScoreBlur=useCallback(async gameId=>{const editingGame=editingGames[gameId];if(editingGame){await updateGameScore(gameId,editingGame.pair1,editingGame.pair2);setEditingGames(prev=>{const newState={...prev};delete newState[gameId];return newState;});}},[editingGames]);const handleTieBreakScoreBlur=useCallback(async gameId=>{const editingTieBreak=editingTieBreaks[gameId];if(editingTieBreak){await updateTieBreakScore(gameId,editingTieBreak.pair1,editingTieBreak.pair2);setEditingTieBreaks(prev=>{const newState={...prev};delete newState[gameId];return newState;});}},[editingTieBreaks]);const updateTieBreakScore=async(gameId,pair1Points,pair2Points)=>{try{setError(\"\");setGames(prevGames=>prevGames.map(g=>g.id===gameId?{...g,tie_break_pair1_points:pair1Points,tie_break_pair2_points:pair2Points}:g));await updateGame(gameId,{tie_break_pair1_points:pair1Points,tie_break_pair2_points:pair2Points});}catch(err){console.error(\"‚ùå Error al actualizar el tie break:\",err);setError(\"Error al actualizar el tie break: \"+err.message);}};const toggleTieBreak=async gameId=>{try{setError(\"\");const game=games.find(g=>g.id===gameId);if(!game)return;const newIsTieBreak=!game.is_tie_break;setGames(prevGames=>prevGames.map(g=>g.id===gameId?{...g,is_tie_break:newIsTieBreak,tie_break_pair1_points:0,tie_break_pair2_points:0}:g));await updateGame(gameId,{is_tie_break:newIsTieBreak,tie_break_pair1_points:0,tie_break_pair2_points:0});}catch(err){setError(\"Error al cambiar el tipo de juego\");console.error(err);}};const removeGame=async gameId=>{try{setError(\"\");await deleteGame(gameId);setGames(games.filter(g=>g.id!==gameId));}catch(err){console.error(\"‚ùå Error al eliminar el juego:\",err);setError(\"Error al eliminar el juego: \"+err.message);}};const correctGameScore=useCallback(async function(gameId,pair1Games,pair2Games){let pair1TieBreakPoints=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;let pair2TieBreakPoints=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;let isTieBreak=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;try{setError(\"\");setGames(prevGames=>prevGames.map(g=>g.id===gameId?{...g,pair1_games:pair1Games,pair2_games:pair2Games,tie_break_pair1_points:pair1TieBreakPoints,tie_break_pair2_points:pair2TieBreakPoints,is_tie_break:isTieBreak,updated_at:new Date().toISOString()}:g));await updateGame(gameId,{pair1_games:pair1Games,pair2_games:pair2Games,tie_break_pair1_points:pair1TieBreakPoints,tie_break_pair2_points:pair2TieBreakPoints,is_tie_break:isTieBreak});}catch(err){console.error(\"‚ùå Error al corregir el marcador:\",err);setError(\"Error al corregir el marcador: \"+err.message);}},[]);const finishMatch=async matchId=>{try{setError(\"\");const match=matches.find(m=>m.id===matchId);if(!match){console.error(\"Match not found:\",matchId);return;}const matchGames=games.filter(g=>g.match_id===matchId);if(!FlexibleMatchFinisher.canFinishMatch(matchGames)){setError(\"No se puede finalizar el partido. Verifica que todos los juegos tengan marcadores v√°lidos.\");return;}const result=await FlexibleMatchFinisher.finishMatch(match,matchGames,pairs,async()=>{if(selectedTournament){const pairsData=await getPairs(selectedTournament.id);setPairs(pairsData);setForceRefresh(prev=>prev+1);const matchesData=await getMatches(selectedTournament.id);setMatches(matchesData);}});if(result.success){setMatches(matches.map(m=>m.id===matchId?{...m,winner_id:result.winnerId,is_finished:true}:m));if(selectedTournament){const updatedPairsData=await getPairs(selectedTournament.id);setPairs(updatedPairsData);setForceRefresh(prev=>prev+1);}alert(result.message);}else{setError(result.message);}}catch(err){setError(\"Error al finalizar el partido\");console.error(err);}};const handleMatchSelect=matchId=>{setSelectedMatchId(matchId);loadMatchGames(matchId);};const loadMatchGames=async matchId=>{try{const gamesData=await getGames(matchId);setGames(gamesData);}catch(err){console.error(\"‚ùå Error al cargar juegos:\",err);}};const selectedMatch=matches.find(match=>match.id===selectedMatchId);const matchesByRound=matches.reduce((acc,match)=>{if(!acc[match.round]){acc[match.round]=[];}acc[match.round].push(match);return acc;},{});const sortedPairs=useMemo(()=>{return[...pairs].sort((a,b)=>{if(a.sets_won!==b.sets_won){return b.sets_won-a.sets_won;}if(a.games_won!==b.games_won){return b.games_won-a.games_won;}return b.points-a.points;});},[pairs,forceRefresh]);const isTournamentFinished=useMemo(()=>{return matches.length>0&&matches.every(match=>match.is_finished);},[matches]);const winner=useMemo(()=>{return sortedPairs.length>0?sortedPairs[0]:null;},[sortedPairs]);const showWinnerScreenHandler=()=>{setShowWinnerScreen(true);};const hideWinnerScreenHandler=()=>{setShowWinnerScreen(false);};const showMatchResultsHandler=match=>{setSelectedMatchResults(match);setShowMatchResults(true);};const hideMatchResultsHandler=()=>{setShowMatchResults(false);setSelectedMatchResults(null);};const handleViewTournamentResults=async tournament=>{try{setSelectedTournament(tournament);await loadTournamentData();alert(`‚úÖ Torneo \"${tournament.name}\" seleccionado\\n\\nAhora puedes ver todos los partidos y resultados en el panel derecho.`);}catch(err){console.error(\"‚ùå Error al cargar resultados del torneo:\",err);alert(\"Error al cargar los resultados del torneo. Int√©ntalo de nuevo.\");}};const recalculateMatchWinner=async matchId=>{try{const match=matches.find(m=>m.id===matchId);if(!match){console.error(\"Match not found:\",matchId);return;}const matchGames=await getGames(matchId);if(matchGames.length===0){console.log(\"No hay juegos para recalcular\");return;}let pair1Games=0;let pair2Games=0;matchGames.forEach(game=>{if(game.is_tie_break){if(game.tie_break_pair1_points>=10&&game.tie_break_pair1_points-game.tie_break_pair2_points>=2){pair1Games++;}else if(game.tie_break_pair2_points>=10&&game.tie_break_pair2_points-game.tie_break_pair1_points>=2){pair2Games++;}}else{if(game.pair1_games>game.pair2_games){pair1Games++;}else if(game.pair2_games>game.pair1_games){pair2Games++;}}});const isTie=pair1Games===pair2Games;const winnerId=isTie?undefined:pair1Games>pair2Games?match.pair1_id:match.pair2_id;await updateMatch(matchId,{winner_id:winnerId,is_finished:true});console.log(\"‚úÖ Ganador recalculado y actualizado en la base de datos\");}catch(error){console.error(\"Error recalculating match winner:\",error);}};const handleBackToHome=()=>{setSelectedTournament(null);setPairs([]);setMatches([]);setGames([]);setSelectedMatchId(null);setError(\"\");setShowWinnerScreen(false);setShowMatchResults(false);setSelectedMatchResults(null);setShowScoreCorrector(false);setSelectedCorrectorMatch(null);setForceRefresh(0);setShowDebugInfo(false);setEditingGames({});setEditingTieBreaks({});setShowSuccessModal(false);setSuccessModalData({title:\"\",message:\"\",icon:\"‚úÖ\"});};const openScoreCorrector=match=>{setSelectedCorrectorMatch(match);setShowScoreCorrector(true);};const closeScoreCorrector=()=>{setShowScoreCorrector(false);setSelectedCorrectorMatch(null);};const handleScoreCorrectorUpdate=async()=>{if(selectedTournament){await loadTournamentData();}closeScoreCorrector();};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDFC6 Gesti\\xF3n de Torneos Express y Retas\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u274C Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"error-help\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\uD83D\\uDCA1 Ayuda:\"}),/*#__PURE__*/_jsxs(\"ol\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Verifica tu conexi\\xF3n a internet\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Intenta recargar la p\\xE1gina\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Si el problema persiste, contacta al administrador\"})]})]})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u23F3 Cargando...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-panel\",children:/*#__PURE__*/_jsx(TournamentManager,{selectedTournament:selectedTournament||undefined,onTournamentSelect:setSelectedTournament,onViewResults:handleViewTournamentResults})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-panel\",children:selectedTournament?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tournament-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-title-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tournament-icon\",children:\"\\uD83C\\uDFC6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:selectedTournament.name}),selectedTournament.description&&/*#__PURE__*/_jsx(\"div\",{className:\"tournament-description\",children:selectedTournament.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-stats-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-badge\",children:[selectedTournament.courts,\" canchas\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-badge\",children:[pairs.length,\" parejas\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-badge\",children:[matches.length,\" partidos\"]}),/*#__PURE__*/_jsx(\"span\",{className:`status-badge ${selectedTournament.is_started?\"started\":\"pending\"}`,children:selectedTournament.is_started?\"En Progreso\":\"Pendiente\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-management-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"player-management-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDC65 Gesti\\xF3n de Jugadores\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-player-manager-btn\",onClick:()=>setShowPlayerManager(!showPlayerManager),children:showPlayerManager?\"üë• Ocultar Gesti√≥n de Jugadores\":\"üë• Mostrar Gesti√≥n de Jugadores\"})]}),showPlayerManager&&/*#__PURE__*/_jsx(\"div\",{className:\"player-manager-container\",children:/*#__PURE__*/_jsx(PlayerManager,{playersInPairs:pairs.flatMap(pair=>[pair.player1_id,pair.player2_id]),onPlayerSelect:players=>{console.log(\"=== SELECCI√ìN DE JUGADORES ===\");console.log(\"Players selected:\",players.length);players.forEach((player,index)=>{console.log(`Player ${index+1}:`,player.name,\"(ID:\",player.id+\")\");});// Validaci√≥n: Verificar si alg√∫n jugador ya est√° en una pareja\nconst playersInPairs=players.filter(player=>{const isInPair=pairs.some(pair=>pair.player1_id===player.id||pair.player2_id===player.id);if(isInPair){var _existingPair$player,_existingPair$player2,_existingPair$player3;const existingPair=pairs.find(pair=>pair.player1_id===player.id||pair.player2_id===player.id);console.log(`üö® JUGADOR YA EN PAREJA: ${player.name} est√° en pareja con ${(existingPair===null||existingPair===void 0?void 0:(_existingPair$player=existingPair.player1)===null||_existingPair$player===void 0?void 0:_existingPair$player.id)===player.id?existingPair===null||existingPair===void 0?void 0:(_existingPair$player2=existingPair.player2)===null||_existingPair$player2===void 0?void 0:_existingPair$player2.name:existingPair===null||existingPair===void 0?void 0:(_existingPair$player3=existingPair.player1)===null||_existingPair$player3===void 0?void 0:_existingPair$player3.name}`);}return isInPair;});if(playersInPairs.length>0){const playerNames=playersInPairs.map(p=>p.name).join(\", \");console.log(\"üö® ERROR: Jugadores ya est√°n en parejas:\",playerNames);setError(`Los jugadores ${playerNames} ya est√°n en parejas existentes. Debes eliminar sus parejas actuales antes de poder seleccionarlos nuevamente.`);return;}// Validaci√≥n: No permitir jugadores con nombres iguales\nif(players.length===2){const player1=players[0];const player2=players[1];if(player1.name.toLowerCase()===player2.name.toLowerCase()){console.log(\"üö® ERROR: Jugadores con nombres iguales detectados\");console.log(\"Player 1:\",player1.name,\"(ID:\",player1.id+\")\");console.log(\"Player 2:\",player2.name,\"(ID:\",player2.id+\")\");setError(\"No puedes seleccionar dos jugadores con el mismo nombre\");return;}// Validaci√≥n: Verificar si ya existe una pareja con estos jugadores\nconst existingPair=pairs.find(pair=>{var _pair$player5,_pair$player6,_pair$player7,_pair$player8;const sameIds=pair.player1_id===player1.id&&pair.player2_id===player2.id||pair.player1_id===player2.id&&pair.player2_id===player1.id;const sameNames=((_pair$player5=pair.player1)===null||_pair$player5===void 0?void 0:_pair$player5.name.toLowerCase())===player1.name.toLowerCase()&&((_pair$player6=pair.player2)===null||_pair$player6===void 0?void 0:_pair$player6.name.toLowerCase())===player2.name.toLowerCase()||((_pair$player7=pair.player1)===null||_pair$player7===void 0?void 0:_pair$player7.name.toLowerCase())===player2.name.toLowerCase()&&((_pair$player8=pair.player2)===null||_pair$player8===void 0?void 0:_pair$player8.name.toLowerCase())===player1.name.toLowerCase();if(sameIds||sameNames){console.log(\"üö® PAREJA DUPLICADA DETECTADA:\",player1.name,\"+\",player2.name);console.log(\"Existing pair:\",existingPair);}return sameIds||sameNames;});if(existingPair){console.log(\"üö® ERROR: Pareja ya existe en la base de datos\");setError(`La pareja ${player1.name} + ${player2.name} ya existe en el torneo`);return;}// Si llegamos aqu√≠, la pareja es v√°lida\nconsole.log(\"‚úÖ PAREJA V√ÅLIDA:\",player1.name,\"+\",player2.name);addPair(player1,player2);setSelectedPlayers([]);// Limpiar selecci√≥n despu√©s de crear la pareja\n}else{setSelectedPlayers(players);}},selectedPlayers:selectedPlayers,allowMultipleSelection:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair-management-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pair-management-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u270F\\uFE0F Gesti\\xF3n de Parejas\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-pair-manager-btn\",onClick:()=>setShowPairManager(!showPairManager),children:showPairManager?\"‚úèÔ∏è Ocultar Gesti√≥n de Parejas\":\"‚úèÔ∏è Mostrar Gesti√≥n de Parejas\"})]}),showPairManager&&/*#__PURE__*/_jsx(\"div\",{className:\"pair-manager-container\",children:/*#__PURE__*/_jsx(PairManager,{pairs:pairs,onPairUpdate:updatePairPlayers,onPairDelete:deletePair})})]}),!selectedTournament.is_started?/*#__PURE__*/_jsxs(\"div\",{className:\"start-tournament-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDE80 Iniciar Torneo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Tienes \",pairs.length,\" parejas registradas\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Se crear\\xE1n \",pairs.length*(pairs.length-1)/2,\" \",\"partidos (round-robin completo - todas las parejas se enfrentan)\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Estado del torneo:\",\" \",selectedTournament.is_started?\"Iniciado\":\"Pendiente\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"start-button\",onClick:startTournament,disabled:loading||pairs.length<2,children:loading?\"‚è≥ Iniciando...\":selectedTournament.is_started?\"üèÜ Torneo Ya Iniciado\":pairs.length<2?\"‚ùå Necesitas al menos 2 parejas\":\"üöÄ ¬°Iniciar Torneo!\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-status-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDFC6 Torneo en Progreso\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"El torneo ya est\\xE1 iniciado y en progreso\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tienes \",pairs.length,\" parejas registradas\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Estado del torneo: Iniciado\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"reset-button\",onClick:async()=>{if(window.confirm(\"¬øEst√°s seguro de que quieres resetear el torneo? Esto eliminar√° todos los partidos existentes.\")){try{setLoading(true);await deleteMatchesByTournament(selectedTournament.id);await updateTournament(selectedTournament.id,{is_started:false});setSelectedTournament(prev=>prev?{...prev,is_started:false}:null);setMatches([]);await loadTournamentData();setSuccessModalData({title:\"¬°Torneo Reseteado!\",message:\"El torneo ha sido reseteado y est√° listo para iniciar nuevamente.\",icon:\"üîÑ\"});setShowSuccessModal(true);}catch(error){setError(\"Error al resetear el torneo: \"+error.message);}finally{setLoading(false);}}},disabled:loading,children:loading?\"‚è≥ Reseteando...\":\"üîÑ Resetear Torneo\"})]}),selectedTournament&&/*#__PURE__*/_jsxs(\"div\",{className:\"debug-section\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"debug-toggle-btn\",onClick:()=>setShowDebugInfo(!showDebugInfo),children:[showDebugInfo?\"üîΩ\":\"üîº\",\" Debug Info\"]}),showDebugInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"debug-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"debug-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDD27 Informaci\\xF3n de Debug\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"debug-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Estado:\",\" \",selectedTournament.is_started?\"‚úÖ Iniciado\":\"‚è≥ Pendiente\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Parejas: \",pairs.length]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Partidos: \",matches.length]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"debug-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{console.log(\"=== PROBAR CONEXI√ìN ===\");const isConnected=await testConnection();if(isConnected){setError(\"\");}else{setError(\"‚ùå Error de conexi√≥n a Supabase. Verifica tu configuraci√≥n.\");}},className:\"debug-btn connection-btn\",children:\"\\uD83D\\uDD0C Probar Conexi\\xF3n\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log(\"=== FORZANDO RECARGA DE DATOS ===\");loadTournamentData();},className:\"debug-btn reload-btn\",children:\"\\uD83D\\uDD04 Recargar Datos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{console.log(\"=== VERIFICANDO ESTADO DEL TORNEO ===\");try{console.log(\"Estado actual del torneo:\",selectedTournament);console.log(\"Parejas en estado:\",pairs.length);console.log(\"Partidos en estado:\",matches.length);const dbPairs=await getPairs(selectedTournament.id);const dbMatches=await getMatches(selectedTournament.id);console.log(\"Parejas en BD:\",dbPairs.length);console.log(\"Partidos en BD:\",dbMatches.length);alert(`Estado del torneo:\\n\\nParejas: ${pairs.length} (estado) / ${dbPairs.length} (BD)\\nPartidos: ${matches.length} (estado) / ${dbMatches.length} (BD)\\n\\nTorneo iniciado: ${selectedTournament.is_started?\"S√≠\":\"No\"}`);}catch(error){console.error(\"Error verificando estado:\",error);}},className:\"debug-btn status-btn\",children:\"\\uD83D\\uDD0D Verificar Estado\"})]})]})]}),pairs.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"pairs-display\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDC65 Parejas Registradas (\",pairs.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"pairs-grid\",children:pairs.map((pair,index)=>{var _pair$player9,_pair$player0;return/*#__PURE__*/_jsxs(\"div\",{className:\"pair-display-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pair-number\",children:[\"#\",index+1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair-names\",children:[(_pair$player9=pair.player1)===null||_pair$player9===void 0?void 0:_pair$player9.name,\" y \",(_pair$player0=pair.player2)===null||_pair$player0===void 0?void 0:_pair$player0.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pair-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Sets: \",pair.sets_won]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Partidos: \",pair.matches_played]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Puntos: \",pair.points]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _pair$player1,_pair$player10;if(window.confirm(`¬øEst√°s seguro de que quieres eliminar la pareja \"${(_pair$player1=pair.player1)===null||_pair$player1===void 0?void 0:_pair$player1.name} y ${(_pair$player10=pair.player2)===null||_pair$player10===void 0?void 0:_pair$player10.name}\"?`)){deletePair(pair.id);}},className:\"delete-pair-btn\",title:\"Eliminar pareja\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]},pair.id);})})]}),selectedTournament.is_started&&/*#__PURE__*/_jsxs(\"div\",{className:\"tournament-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"matches-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83C\\uDFBE Partidos (\",matches.length,\" total)\"]}),matches.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-matches\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCDD No hay partidos programados a\\xFAn\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Inicia el torneo para generar los partidos autom\\xE1ticamente\"})]}):Object.entries(matchesByRound).map(_ref=>{let[round,roundMatches]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"round-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uD83D\\uDD04 Ronda \",round,\" (\",roundMatches.length,\" \",\"partidos)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"matches-container\",children:roundMatches.map(match=>{var _match$pair,_match$pair$player,_match$pair2,_match$pair2$player,_match$pair3,_match$pair3$player,_match$pair4,_match$pair4$player,_match$pair5,_match$pair5$player,_match$pair6,_match$pair6$player,_match$pair7,_match$pair7$player,_match$pair8,_match$pair8$player,_match$pair9,_match$pair9$player,_match$pair0,_match$pair0$player,_match$pair1,_match$pair1$player,_match$pair10,_match$pair10$player,_match$pair11,_match$pair11$player,_match$pair12,_match$pair12$player,_match$pair13,_match$pair13$player,_match$pair14,_match$pair14$player;return/*#__PURE__*/_jsxs(\"div\",{className:`match-card ${selectedMatchId===match.id?\"selected\":\"\"}`,onClick:()=>handleMatchSelect(match.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"match-header\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[(_match$pair=match.pair1)===null||_match$pair===void 0?void 0:(_match$pair$player=_match$pair.player1)===null||_match$pair$player===void 0?void 0:_match$pair$player.name,\" y\",\" \",(_match$pair2=match.pair1)===null||_match$pair2===void 0?void 0:(_match$pair2$player=_match$pair2.player2)===null||_match$pair2$player===void 0?void 0:_match$pair2$player.name,\" vs\",\" \",(_match$pair3=match.pair2)===null||_match$pair3===void 0?void 0:(_match$pair3$player=_match$pair3.player1)===null||_match$pair3$player===void 0?void 0:_match$pair3$player.name,\" y\",\" \",(_match$pair4=match.pair2)===null||_match$pair4===void 0?void 0:(_match$pair4$player=_match$pair4.player2)===null||_match$pair4$player===void 0?void 0:_match$pair4$player.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"match-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"court-badge\",children:[\"\\uD83C\\uDFDF\\uFE0F Cancha \",match.court]}),/*#__PURE__*/_jsxs(\"span\",{className:\"round-badge\",children:[\"\\uD83D\\uDD04 Ronda \",match.round]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"match-details\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"match-pairs\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pareja 1:\"}),\" \",(_match$pair5=match.pair1)===null||_match$pair5===void 0?void 0:(_match$pair5$player=_match$pair5.player1)===null||_match$pair5$player===void 0?void 0:_match$pair5$player.name,\" y\",\" \",(_match$pair6=match.pair1)===null||_match$pair6===void 0?void 0:(_match$pair6$player=_match$pair6.player2)===null||_match$pair6$player===void 0?void 0:_match$pair6$player.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"match-pairs\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pareja 2:\"}),\" \",(_match$pair7=match.pair2)===null||_match$pair7===void 0?void 0:(_match$pair7$player=_match$pair7.player1)===null||_match$pair7$player===void 0?void 0:_match$pair7$player.name,\" y\",\" \",(_match$pair8=match.pair2)===null||_match$pair8===void 0?void 0:(_match$pair8$player=_match$pair8.player2)===null||_match$pair8$player===void 0?void 0:_match$pair8$player.name]})]}),match.winner_id&&/*#__PURE__*/_jsxs(\"div\",{className:\"winner\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"winner-icon\",children:\"\\uD83C\\uDFC6\"}),\"Ganador:\",\" \",match.winner_id===match.pair1_id?`${(_match$pair9=match.pair1)===null||_match$pair9===void 0?void 0:(_match$pair9$player=_match$pair9.player1)===null||_match$pair9$player===void 0?void 0:_match$pair9$player.name} y ${(_match$pair0=match.pair1)===null||_match$pair0===void 0?void 0:(_match$pair0$player=_match$pair0.player2)===null||_match$pair0$player===void 0?void 0:_match$pair0$player.name}`:`${(_match$pair1=match.pair2)===null||_match$pair1===void 0?void 0:(_match$pair1$player=_match$pair1.player1)===null||_match$pair1$player===void 0?void 0:_match$pair1$player.name} y ${(_match$pair10=match.pair2)===null||_match$pair10===void 0?void 0:(_match$pair10$player=_match$pair10.player2)===null||_match$pair10$player===void 0?void 0:_match$pair10$player.name}`]}),match.is_finished&&!match.winner_id&&/*#__PURE__*/_jsxs(\"div\",{className:\"winner\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"winner-icon\",children:\"\\uD83E\\uDD1D\"}),\"Empate: \",(_match$pair11=match.pair1)===null||_match$pair11===void 0?void 0:(_match$pair11$player=_match$pair11.player1)===null||_match$pair11$player===void 0?void 0:_match$pair11$player.name,\" \",\"y \",(_match$pair12=match.pair1)===null||_match$pair12===void 0?void 0:(_match$pair12$player=_match$pair12.player2)===null||_match$pair12$player===void 0?void 0:_match$pair12$player.name,\" vs\",\" \",(_match$pair13=match.pair2)===null||_match$pair13===void 0?void 0:(_match$pair13$player=_match$pair13.player1)===null||_match$pair13$player===void 0?void 0:_match$pair13$player.name,\" y\",\" \",(_match$pair14=match.pair2)===null||_match$pair14===void 0?void 0:(_match$pair14$player=_match$pair14.player2)===null||_match$pair14$player===void 0?void 0:_match$pair14$player.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"match-status\",children:match.is_finished?/*#__PURE__*/_jsx(\"span\",{className:\"status-finished\",children:\"\\u2714 Finalizado\"}):/*#__PURE__*/_jsx(\"span\",{className:\"status-pending\",children:\"\\u23F3 Pendiente\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"match-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();showMatchResultsHandler(match);},className:\"view-results-btn\",children:\"\\uD83D\\uDCCA Ver Resultados\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();openScoreCorrector(match);},className:\"correct-result-btn\",children:\"\\u270F\\uFE0F Marcador\"})]})]},match.id);})})]},round);})]}),/*#__PURE__*/_jsx(StandingsTable,{tournamentId:selectedTournament.id,forceRefresh:forceRefresh}),isTournamentFinished&&winner&&/*#__PURE__*/_jsx(\"div\",{className:\"winner-button-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"show-winner-button\",onClick:showWinnerScreenHandler,children:\"\\uD83C\\uDFC6 \\xA1Ver Ganador!\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"back-home-button-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"back-home-button\",onClick:handleBackToHome,children:\"\\uD83C\\uDFE0 Volver al Inicio\"})})]})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-tournament-selected\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDFC6 Bienvenido al Gestor de Torneos\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Selecciona un torneo del panel izquierdo para comenzar a gestionar partidos y resultados.\"})]})})]}),showWinnerScreen&&winner&&/*#__PURE__*/_jsx(\"div\",{className:\"winner-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"winner-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"winner-celebration\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"winner-title\",children:\"\\uD83C\\uDFC6 \\xA1FELICIDADES! \\uD83C\\uDFC6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"winner-names\",children:[(_winner$player=winner.player1)===null||_winner$player===void 0?void 0:_winner$player.name,\" y \",(_winner$player2=winner.player2)===null||_winner$player2===void 0?void 0:_winner$player2.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"winner-subtitle\",children:\"\\xA1Son los campeones del torneo!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"winner-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:winner.sets_won}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Sets Ganados\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:winner.games_won}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Partidos Ganados\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:winner.points}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Puntos Totales\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:hideWinnerScreenHandler,children:\"\\uD83C\\uDFE0 Volver al Torneo\"})]})})}),showScoreCorrector&&selectedCorrectorMatch&&/*#__PURE__*/_jsx(ScoreCorrector,{match:selectedCorrectorMatch,onClose:closeScoreCorrector,onUpdate:handleScoreCorrectorUpdate}),showSuccessModal&&/*#__PURE__*/_jsx(SuccessModal,{title:successModalData.title,message:successModalData.message,icon:successModalData.icon,isOpen:showSuccessModal,onClose:()=>setShowSuccessModal(false)})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","TournamentManager","PlayerManager","PairManager","ScoreCorrector","StandingsTable","SuccessModal","createPair","getPairs","updatePair","deletePair","deletePairFromDB","createMatch","getMatches","updateMatch","deleteMatchesByTournament","createGame","getGames","updateGame","deleteGame","updateTournament","testConnection","FlexibleMatchFinisher","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_winner$player","_winner$player2","selectedTournament","setSelectedTournament","pairs","setPairs","matches","setMatches","games","setGames","selectedMatchId","setSelectedMatchId","error","setError","loading","setLoading","showPlayerManager","setShowPlayerManager","showPairManager","setShowPairManager","selectedPlayers","setSelectedPlayers","showWinnerScreen","setShowWinnerScreen","showMatchResults","setShowMatchResults","selectedMatchResults","setSelectedMatchResults","showScoreCorrector","setShowScoreCorrector","selectedCorrectorMatch","setSelectedCorrectorMatch","forceRefresh","setForceRefresh","showDebugInfo","setShowDebugInfo","editingGames","setEditingGames","editingTieBreaks","setEditingTieBreaks","showSuccessModal","setShowSuccessModal","successModalData","setSuccessModalData","title","message","icon","loadTournamentData","id","console","log","name","pairsData","matchesData","Promise","all","length","err","pairId","filter","p","updatePairPlayers","player1","player2","player1_id","player2_id","map","pair","addPair","existingPairLocal","find","_pair$player","_pair$player2","_pair$player3","_pair$player4","sameIds","sameNames","toLowerCase","newPair","startTournament","allPairs","allCombinations","i","j","push","pair1","pair2","finalMatches","remainingCombinations","round","roundMatches","usedPairs","Set","courtOrder","courts","rotatedCourt","courtIndex","court","bestIndex","bestScore","combo","has","score","futureCombo","match","add","splice","createdMatches","createdMatch","is_started","prev","addGame","matchId","gameNumber","g","match_id","newGame","updateGameScore","gameId","pair1Games","pair2Games","prevGames","pair1_games","pair2_games","handleGameScoreChange","handleTieBreakScoreChange","pair1Points","pair2Points","handleGameScoreBlur","editingGame","newState","handleTieBreakScoreBlur","editingTieBreak","updateTieBreakScore","tie_break_pair1_points","tie_break_pair2_points","toggleTieBreak","game","newIsTieBreak","is_tie_break","removeGame","correctGameScore","pair1TieBreakPoints","arguments","undefined","pair2TieBreakPoints","isTieBreak","updated_at","Date","toISOString","finishMatch","m","matchGames","canFinishMatch","result","success","winner_id","winnerId","is_finished","updatedPairsData","alert","handleMatchSelect","loadMatchGames","gamesData","selectedMatch","matchesByRound","reduce","acc","sortedPairs","sort","a","b","sets_won","games_won","points","isTournamentFinished","every","winner","showWinnerScreenHandler","hideWinnerScreenHandler","showMatchResultsHandler","hideMatchResultsHandler","handleViewTournamentResults","tournament","recalculateMatchWinner","forEach","isTie","pair1_id","pair2_id","handleBackToHome","openScoreCorrector","closeScoreCorrector","handleScoreCorrectorUpdate","className","children","onTournamentSelect","onViewResults","description","onClick","playersInPairs","flatMap","onPlayerSelect","players","player","index","isInPair","some","_existingPair$player","_existingPair$player2","_existingPair$player3","existingPair","playerNames","join","_pair$player5","_pair$player6","_pair$player7","_pair$player8","allowMultipleSelection","onPairUpdate","onPairDelete","disabled","window","confirm","isConnected","dbPairs","dbMatches","_pair$player9","_pair$player0","matches_played","_pair$player1","_pair$player10","Object","entries","_ref","_match$pair","_match$pair$player","_match$pair2","_match$pair2$player","_match$pair3","_match$pair3$player","_match$pair4","_match$pair4$player","_match$pair5","_match$pair5$player","_match$pair6","_match$pair6$player","_match$pair7","_match$pair7$player","_match$pair8","_match$pair8$player","_match$pair9","_match$pair9$player","_match$pair0","_match$pair0$player","_match$pair1","_match$pair1$player","_match$pair10","_match$pair10$player","_match$pair11","_match$pair11$player","_match$pair12","_match$pair12$player","_match$pair13","_match$pair13$player","_match$pair14","_match$pair14$player","e","stopPropagation","tournamentId","onClose","onUpdate","isOpen"],"sources":["/Users/nedev/padel-tournament-app/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport \"./App.css\";\nimport { TournamentManager } from \"./components/TournamentManager\";\nimport { PlayerManager } from \"./components/PlayerManager\";\nimport { PairManager } from \"./components/PairManager\";\nimport ScoreCorrector from \"./components/ScoreCorrector\";\nimport StandingsTable from \"./components/StandingsTable\";\nimport { SuccessModal } from \"./components/SuccessModal\";\n\nimport {\n  Tournament,\n  Player,\n  Pair,\n  Match,\n  Game,\n  createPair,\n  getPairs,\n  updatePair,\n  deletePair as deletePairFromDB,\n  deletePairsByTournament,\n  createMatch,\n  getMatches,\n  updateMatch,\n  deleteMatchesByTournament,\n  createGame,\n  getGames,\n  updateGame,\n  deleteGame,\n  updateTournament,\n} from \"./lib/database\";\nimport { testConnection } from \"./lib/supabaseClient\";\nimport { FlexibleMatchFinisher } from \"./components/FlexibleMatchFinisher\";\n\nfunction App() {\n  const [selectedTournament, setSelectedTournament] =\n    useState<Tournament | null>(null);\n  const [pairs, setPairs] = useState<Pair[]>([]);\n  const [matches, setMatches] = useState<Match[]>([]);\n  const [games, setGames] = useState<Game[]>([]);\n  const [selectedMatchId, setSelectedMatchId] = useState<string | null>(null);\n  const [error, setError] = useState<string>(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showPlayerManager, setShowPlayerManager] = useState(false);\n  const [showPairManager, setShowPairManager] = useState(false);\n  const [selectedPlayers, setSelectedPlayers] = useState<Player[]>([]);\n  const [showWinnerScreen, setShowWinnerScreen] = useState(false);\n  const [showMatchResults, setShowMatchResults] = useState(false);\n  const [selectedMatchResults, setSelectedMatchResults] =\n    useState<Match | null>(null);\n  const [showScoreCorrector, setShowScoreCorrector] = useState(false);\n  const [selectedCorrectorMatch, setSelectedCorrectorMatch] =\n    useState<Match | null>(null);\n  const [forceRefresh, setForceRefresh] = useState(0);\n  const [showDebugInfo, setShowDebugInfo] = useState(false);\n  const [editingGames, setEditingGames] = useState<{\n    [key: string]: { pair1: number; pair2: number };\n  }>({});\n  const [editingTieBreaks, setEditingTieBreaks] = useState<{\n    [key: string]: { pair1: number; pair2: number };\n  }>({});\n\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [successModalData, setSuccessModalData] = useState({\n    title: \"\",\n    message: \"\",\n    icon: \"‚úÖ\",\n  });\n\n  // Cargar datos cuando se selecciona un torneo\n  useEffect(() => {\n    if (selectedTournament) {\n      loadTournamentData();\n    }\n  }, [selectedTournament?.id]);\n\n  const loadTournamentData = useCallback(async () => {\n    if (!selectedTournament) return;\n\n    try {\n      setLoading(true);\n      setError(\"\");\n      console.log(\"Loading tournament data for:\", selectedTournament.name);\n\n      const [pairsData, matchesData] = await Promise.all([\n        getPairs(selectedTournament.id),\n        getMatches(selectedTournament.id),\n      ]);\n\n      console.log(\"Pairs loaded:\", pairsData.length, \"pairs\");\n      setPairs(pairsData);\n\n      console.log(\n        \"Matches loaded from database:\",\n        matchesData.length,\n        \"matches\"\n      );\n      setMatches(matchesData);\n    } catch (err) {\n      console.error(\"Error loading tournament data:\", err);\n      setError(\n        \"Error al cargar los datos del torneo: \" + (err as Error).message\n      );\n    } finally {\n      setLoading(false);\n    }\n  }, [selectedTournament]);\n\n  const deletePair = async (pairId: string) => {\n    try {\n      setError(\"\");\n      console.log(\"Eliminando pareja:\", pairId);\n\n      await deletePairFromDB(pairId);\n      setPairs(pairs.filter((p) => p.id !== pairId));\n\n      console.log(\"Pareja eliminada exitosamente\");\n    } catch (err) {\n      console.error(\"Error eliminando pareja:\", err);\n      setError(\"Error al eliminar la pareja: \" + (err as Error).message);\n    }\n  };\n\n  const updatePairPlayers = async (\n    pairId: string,\n    player1: Player,\n    player2: Player\n  ) => {\n    try {\n      setError(\"\");\n      console.log(\"Actualizando pareja:\", pairId);\n      console.log(\"Nuevos jugadores:\", player1.name, \"+\", player2.name);\n\n      // Actualizar la pareja en la base de datos\n      await updatePair(pairId, {\n        player1_id: player1.id,\n        player2_id: player2.id,\n      });\n\n      // Actualizar el estado local\n      setPairs(\n        pairs.map((pair) => {\n          if (pair.id === pairId) {\n            return {\n              ...pair,\n              player1_id: player1.id,\n              player2_id: player2.id,\n              player1: player1,\n              player2: player2,\n            };\n          }\n          return pair;\n        })\n      );\n\n      console.log(\"Pareja actualizada exitosamente\");\n    } catch (err) {\n      console.error(\"Error actualizando pareja:\", err);\n      setError(\"Error al actualizar la pareja: \" + (err as Error).message);\n    }\n  };\n\n  const addPair = async (player1: Player, player2: Player) => {\n    if (!selectedTournament) {\n      setError(\"No hay torneo seleccionado\");\n      return;\n    }\n\n    try {\n      setError(\"\");\n\n      // Verificar duplicados en estado local\n      const existingPairLocal = pairs.find((pair) => {\n        const sameIds =\n          (pair.player1_id === player1.id && pair.player2_id === player2.id) ||\n          (pair.player1_id === player2.id && pair.player2_id === player1.id);\n\n        const sameNames =\n          (pair.player1?.name.toLowerCase() === player1.name.toLowerCase() &&\n            pair.player2?.name.toLowerCase() === player2.name.toLowerCase()) ||\n          (pair.player1?.name.toLowerCase() === player2.name.toLowerCase() &&\n            pair.player2?.name.toLowerCase() === player1.name.toLowerCase());\n\n        return sameIds || sameNames;\n      });\n\n      if (existingPairLocal) {\n        setError(\n          `La pareja ${player1.name} y ${player2.name} ya est√° registrada`\n        );\n        return;\n      }\n\n      const newPair = await createPair(\n        selectedTournament.id,\n        player1.id,\n        player2.id\n      );\n\n      setPairs([...pairs, newPair]);\n      setSelectedPlayers([]);\n\n      console.log(\"Pair added successfully\");\n    } catch (err) {\n      console.error(\"Error creating pair:\", err);\n      setError(\"Error al crear la pareja: \" + (err as Error).message);\n    }\n  };\n\n  const startTournament = async () => {\n    if (!selectedTournament || pairs.length < 2) {\n      setError(\"Se necesitan al menos 2 parejas para iniciar el torneo\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(\"\");\n\n      console.log(\"üöÄ Iniciando torneo:\", selectedTournament.name);\n\n      // Limpiar partidos existentes\n      if (matches.length > 0) {\n        await deleteMatchesByTournament(selectedTournament.id);\n        setMatches([]);\n      }\n\n      const allPairs = [...pairs];\n      const allCombinations = [];\n\n      for (let i = 0; i < allPairs.length; i++) {\n        for (let j = i + 1; j < allPairs.length; j++) {\n          allCombinations.push({\n            pair1: allPairs[i],\n            pair2: allPairs[j],\n          });\n        }\n      }\n\n      const finalMatches = [];\n      const remainingCombinations = [...allCombinations];\n      let round = 1;\n\n      while (remainingCombinations.length > 0) {\n        const roundMatches = [];\n        const usedPairs = new Set();\n        const courtOrder = [];\n\n        for (let i = 0; i < selectedTournament.courts; i++) {\n          const rotatedCourt =\n            ((round - 1 + i) % selectedTournament.courts) + 1;\n          courtOrder.push(rotatedCourt);\n        }\n\n        for (let courtIndex = 0; courtIndex < courtOrder.length; courtIndex++) {\n          const court = courtOrder[courtIndex];\n          let bestIndex = -1;\n          let bestScore = -1;\n\n          for (let i = 0; i < remainingCombinations.length; i++) {\n            const combo = remainingCombinations[i];\n\n            if (\n              !usedPairs.has(combo.pair1.id) &&\n              !usedPairs.has(combo.pair2.id)\n            ) {\n              let score = 0;\n\n              for (let j = 0; j < remainingCombinations.length; j++) {\n                if (i !== j) {\n                  const futureCombo = remainingCombinations[j];\n                  if (\n                    !usedPairs.has(futureCombo.pair1.id) &&\n                    !usedPairs.has(futureCombo.pair2.id) &&\n                    futureCombo.pair1.id !== combo.pair1.id &&\n                    futureCombo.pair1.id !== combo.pair2.id &&\n                    futureCombo.pair2.id !== combo.pair1.id &&\n                    futureCombo.pair2.id !== combo.pair2.id\n                  ) {\n                    score++;\n                  }\n                }\n              }\n\n              if (score > bestScore) {\n                bestScore = score;\n                bestIndex = i;\n              }\n            }\n          }\n\n          if (bestIndex !== -1) {\n            const combo = remainingCombinations[bestIndex];\n\n            const match = {\n              pair1: combo.pair1,\n              pair2: combo.pair2,\n              round,\n              court,\n            };\n\n            roundMatches.push(match);\n            usedPairs.add(combo.pair1.id);\n            usedPairs.add(combo.pair2.id);\n            remainingCombinations.splice(bestIndex, 1);\n          } else {\n            break;\n          }\n        }\n\n        if (roundMatches.length > 0) {\n          finalMatches.push(...roundMatches);\n        }\n\n        round++;\n      }\n\n      const createdMatches = [];\n\n      for (const match of finalMatches) {\n        try {\n          const createdMatch = await createMatch(\n            selectedTournament.id,\n            match.pair1.id,\n            match.pair2.id,\n            match.court,\n            match.round\n          );\n          createdMatches.push(createdMatch);\n        } catch (error) {\n          console.error(\"Error creating match:\", error);\n        }\n      }\n\n      await updateTournament(selectedTournament.id, { is_started: true });\n      setSelectedTournament((prev) =>\n        prev ? { ...prev, is_started: true } : null\n      );\n\n      await loadTournamentData();\n\n      setSuccessModalData({\n        title: \"¬°Torneo Iniciado!\",\n        message: `Se han creado ${createdMatches.length} partidos exitosamente usando ${selectedTournament.courts} canchas. El torneo est√° listo para comenzar.`,\n        icon: \"üèÜ\",\n      });\n      setShowSuccessModal(true);\n    } catch (error) {\n      console.error(\"Error starting tournament:\", error);\n      setError(\"Error al iniciar el torneo: \" + (error as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addGame = async (matchId: string) => {\n    try {\n      setError(\"\");\n      const gameNumber = games.filter((g) => g.match_id === matchId).length + 1;\n\n      const newGame = await createGame(matchId, gameNumber);\n      setGames([...games, newGame]);\n    } catch (err) {\n      console.error(\"‚ùå Error al agregar el juego:\", err);\n      setError(\"Error al agregar el juego\");\n    }\n  };\n\n  const updateGameScore = useCallback(\n    async (gameId: string, pair1Games: number, pair2Games: number) => {\n      try {\n        setError(\"\");\n\n        setGames((prevGames) =>\n          prevGames.map((g) =>\n            g.id === gameId\n              ? { ...g, pair1_games: pair1Games, pair2_games: pair2Games }\n              : g\n          )\n        );\n\n        await updateGame(gameId, {\n          pair1_games: pair1Games,\n          pair2_games: pair2Games,\n        });\n      } catch (err) {\n        console.error(\"‚ùå Error al actualizar el marcador:\", err);\n        setError(\"Error al actualizar el marcador: \" + (err as Error).message);\n      }\n    },\n    [games, selectedTournament]\n  );\n\n  const handleGameScoreChange = useCallback(\n    (gameId: string, pair1Games: number, pair2Games: number) => {\n      setEditingGames((prev) => ({\n        ...prev,\n        [gameId]: { pair1: pair1Games, pair2: pair2Games },\n      }));\n    },\n    []\n  );\n\n  const handleTieBreakScoreChange = useCallback(\n    (gameId: string, pair1Points: number, pair2Points: number) => {\n      setEditingTieBreaks((prev) => ({\n        ...prev,\n        [gameId]: { pair1: pair1Points, pair2: pair2Points },\n      }));\n    },\n    []\n  );\n\n  const handleGameScoreBlur = useCallback(\n    async (gameId: string) => {\n      const editingGame = editingGames[gameId];\n      if (editingGame) {\n        await updateGameScore(gameId, editingGame.pair1, editingGame.pair2);\n        setEditingGames((prev) => {\n          const newState = { ...prev };\n          delete newState[gameId];\n          return newState;\n        });\n      }\n    },\n    [editingGames]\n  );\n\n  const handleTieBreakScoreBlur = useCallback(\n    async (gameId: string) => {\n      const editingTieBreak = editingTieBreaks[gameId];\n      if (editingTieBreak) {\n        await updateTieBreakScore(\n          gameId,\n          editingTieBreak.pair1,\n          editingTieBreak.pair2\n        );\n        setEditingTieBreaks((prev) => {\n          const newState = { ...prev };\n          delete newState[gameId];\n          return newState;\n        });\n      }\n    },\n    [editingTieBreaks]\n  );\n\n  const updateTieBreakScore = async (\n    gameId: string,\n    pair1Points: number,\n    pair2Points: number\n  ) => {\n    try {\n      setError(\"\");\n\n      setGames((prevGames) =>\n        prevGames.map((g) =>\n          g.id === gameId\n            ? {\n                ...g,\n                tie_break_pair1_points: pair1Points,\n                tie_break_pair2_points: pair2Points,\n              }\n            : g\n        )\n      );\n\n      await updateGame(gameId, {\n        tie_break_pair1_points: pair1Points,\n        tie_break_pair2_points: pair2Points,\n      });\n    } catch (err) {\n      console.error(\"‚ùå Error al actualizar el tie break:\", err);\n      setError(\"Error al actualizar el tie break: \" + (err as Error).message);\n    }\n  };\n\n  const toggleTieBreak = async (gameId: string) => {\n    try {\n      setError(\"\");\n      const game = games.find((g) => g.id === gameId);\n      if (!game) return;\n\n      const newIsTieBreak = !game.is_tie_break;\n\n      setGames((prevGames) =>\n        prevGames.map((g) =>\n          g.id === gameId\n            ? {\n                ...g,\n                is_tie_break: newIsTieBreak,\n                tie_break_pair1_points: 0,\n                tie_break_pair2_points: 0,\n              }\n            : g\n        )\n      );\n\n      await updateGame(gameId, {\n        is_tie_break: newIsTieBreak,\n        tie_break_pair1_points: 0,\n        tie_break_pair2_points: 0,\n      });\n    } catch (err) {\n      setError(\"Error al cambiar el tipo de juego\");\n      console.error(err);\n    }\n  };\n\n  const removeGame = async (gameId: string) => {\n    try {\n      setError(\"\");\n\n      await deleteGame(gameId);\n      setGames(games.filter((g) => g.id !== gameId));\n    } catch (err) {\n      console.error(\"‚ùå Error al eliminar el juego:\", err);\n      setError(\"Error al eliminar el juego: \" + (err as Error).message);\n    }\n  };\n\n  const correctGameScore = useCallback(\n    async (\n      gameId: string,\n      pair1Games: number,\n      pair2Games: number,\n      pair1TieBreakPoints: number = 0,\n      pair2TieBreakPoints: number = 0,\n      isTieBreak: boolean = false\n    ) => {\n      try {\n        setError(\"\");\n\n        setGames((prevGames) =>\n          prevGames.map((g) =>\n            g.id === gameId\n              ? {\n                  ...g,\n                  pair1_games: pair1Games,\n                  pair2_games: pair2Games,\n                  tie_break_pair1_points: pair1TieBreakPoints,\n                  tie_break_pair2_points: pair2TieBreakPoints,\n                  is_tie_break: isTieBreak,\n                  updated_at: new Date().toISOString(),\n                }\n              : g\n          )\n        );\n\n        await updateGame(gameId, {\n          pair1_games: pair1Games,\n          pair2_games: pair2Games,\n          tie_break_pair1_points: pair1TieBreakPoints,\n          tie_break_pair2_points: pair2TieBreakPoints,\n          is_tie_break: isTieBreak,\n        });\n      } catch (err) {\n        console.error(\"‚ùå Error al corregir el marcador:\", err);\n        setError(\"Error al corregir el marcador: \" + (err as Error).message);\n      }\n    },\n    []\n  );\n\n  const finishMatch = async (matchId: string) => {\n    try {\n      setError(\"\");\n      const match = matches.find((m) => m.id === matchId);\n      if (!match) {\n        console.error(\"Match not found:\", matchId);\n        return;\n      }\n\n      const matchGames = games.filter((g) => g.match_id === matchId);\n\n      if (!FlexibleMatchFinisher.canFinishMatch(matchGames)) {\n        setError(\n          \"No se puede finalizar el partido. Verifica que todos los juegos tengan marcadores v√°lidos.\"\n        );\n        return;\n      }\n\n      const result = await FlexibleMatchFinisher.finishMatch(\n        match,\n        matchGames,\n        pairs,\n        async () => {\n          if (selectedTournament) {\n            const pairsData = await getPairs(selectedTournament.id);\n            setPairs(pairsData);\n            setForceRefresh((prev) => prev + 1);\n            const matchesData = await getMatches(selectedTournament.id);\n            setMatches(matchesData);\n          }\n        }\n      );\n\n      if (result.success) {\n        setMatches(\n          matches.map((m) =>\n            m.id === matchId\n              ? { ...m, winner_id: result.winnerId, is_finished: true }\n              : m\n          )\n        );\n\n        if (selectedTournament) {\n          const updatedPairsData = await getPairs(selectedTournament.id);\n          setPairs(updatedPairsData);\n          setForceRefresh((prev) => prev + 1);\n        }\n\n        alert(result.message);\n      } else {\n        setError(result.message);\n      }\n    } catch (err) {\n      setError(\"Error al finalizar el partido\");\n      console.error(err);\n    }\n  };\n\n  const handleMatchSelect = (matchId: string) => {\n    setSelectedMatchId(matchId);\n    loadMatchGames(matchId);\n  };\n\n  const loadMatchGames = async (matchId: string) => {\n    try {\n      const gamesData = await getGames(matchId);\n      setGames(gamesData);\n    } catch (err) {\n      console.error(\"‚ùå Error al cargar juegos:\", err);\n    }\n  };\n\n  const selectedMatch = matches.find((match) => match.id === selectedMatchId);\n\n  const matchesByRound = matches.reduce((acc, match) => {\n    if (!acc[match.round]) {\n      acc[match.round] = [];\n    }\n    acc[match.round].push(match);\n    return acc;\n  }, {} as Record<number, Match[]>);\n\n  const sortedPairs = useMemo(() => {\n    return [...pairs].sort((a, b) => {\n      if (a.sets_won !== b.sets_won) {\n        return b.sets_won - a.sets_won;\n      }\n      if (a.games_won !== b.games_won) {\n        return b.games_won - a.games_won;\n      }\n      return b.points - a.points;\n    });\n  }, [pairs, forceRefresh]);\n\n  const isTournamentFinished = useMemo(() => {\n    return matches.length > 0 && matches.every((match) => match.is_finished);\n  }, [matches]);\n\n  const winner = useMemo(() => {\n    return sortedPairs.length > 0 ? sortedPairs[0] : null;\n  }, [sortedPairs]);\n\n  const showWinnerScreenHandler = () => {\n    setShowWinnerScreen(true);\n  };\n\n  const hideWinnerScreenHandler = () => {\n    setShowWinnerScreen(false);\n  };\n\n  const showMatchResultsHandler = (match: Match) => {\n    setSelectedMatchResults(match);\n    setShowMatchResults(true);\n  };\n\n  const hideMatchResultsHandler = () => {\n    setShowMatchResults(false);\n    setSelectedMatchResults(null);\n  };\n\n  const handleViewTournamentResults = async (tournament: Tournament) => {\n    try {\n      setSelectedTournament(tournament);\n      await loadTournamentData();\n      alert(\n        `‚úÖ Torneo \"${tournament.name}\" seleccionado\\n\\nAhora puedes ver todos los partidos y resultados en el panel derecho.`\n      );\n    } catch (err) {\n      console.error(\"‚ùå Error al cargar resultados del torneo:\", err);\n      alert(\"Error al cargar los resultados del torneo. Int√©ntalo de nuevo.\");\n    }\n  };\n\n  const recalculateMatchWinner = async (matchId: string) => {\n    try {\n      const match = matches.find((m) => m.id === matchId);\n      if (!match) {\n        console.error(\"Match not found:\", matchId);\n        return;\n      }\n\n      const matchGames = await getGames(matchId);\n\n      if (matchGames.length === 0) {\n        console.log(\"No hay juegos para recalcular\");\n        return;\n      }\n\n      let pair1Games = 0;\n      let pair2Games = 0;\n\n      matchGames.forEach((game) => {\n        if (game.is_tie_break) {\n          if (\n            game.tie_break_pair1_points >= 10 &&\n            game.tie_break_pair1_points - game.tie_break_pair2_points >= 2\n          ) {\n            pair1Games++;\n          } else if (\n            game.tie_break_pair2_points >= 10 &&\n            game.tie_break_pair2_points - game.tie_break_pair1_points >= 2\n          ) {\n            pair2Games++;\n          }\n        } else {\n          if (game.pair1_games > game.pair2_games) {\n            pair1Games++;\n          } else if (game.pair2_games > game.pair1_games) {\n            pair2Games++;\n          }\n        }\n      });\n\n      const isTie = pair1Games === pair2Games;\n      const winnerId = isTie\n        ? undefined\n        : pair1Games > pair2Games\n        ? match.pair1_id\n        : match.pair2_id;\n\n      await updateMatch(matchId, {\n        winner_id: winnerId,\n        is_finished: true,\n      });\n\n      console.log(\"‚úÖ Ganador recalculado y actualizado en la base de datos\");\n    } catch (error) {\n      console.error(\"Error recalculating match winner:\", error);\n    }\n  };\n\n  const handleBackToHome = () => {\n    setSelectedTournament(null);\n    setPairs([]);\n    setMatches([]);\n    setGames([]);\n    setSelectedMatchId(null);\n    setError(\"\");\n    setShowWinnerScreen(false);\n    setShowMatchResults(false);\n    setSelectedMatchResults(null);\n    setShowScoreCorrector(false);\n    setSelectedCorrectorMatch(null);\n    setForceRefresh(0);\n    setShowDebugInfo(false);\n    setEditingGames({});\n    setEditingTieBreaks({});\n    setShowSuccessModal(false);\n    setSuccessModalData({\n      title: \"\",\n      message: \"\",\n      icon: \"‚úÖ\",\n    });\n  };\n\n  const openScoreCorrector = (match: Match) => {\n    setSelectedCorrectorMatch(match);\n    setShowScoreCorrector(true);\n  };\n\n  const closeScoreCorrector = () => {\n    setShowScoreCorrector(false);\n    setSelectedCorrectorMatch(null);\n  };\n\n  const handleScoreCorrectorUpdate = async () => {\n    if (selectedTournament) {\n      await loadTournamentData();\n    }\n    closeScoreCorrector();\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <h1>üèÜ Gesti√≥n de Torneos Express y Retas</h1>\n\n        {error && (\n          <div className=\"error\">\n            <h4>‚ùå Error</h4>\n            <p>{error}</p>\n            <div className=\"error-help\">\n              <h5>üí° Ayuda:</h5>\n              <ol>\n                <li>Verifica tu conexi√≥n a internet</li>\n                <li>Intenta recargar la p√°gina</li>\n                <li>Si el problema persiste, contacta al administrador</li>\n              </ol>\n            </div>\n          </div>\n        )}\n\n        {loading && (\n          <div className=\"loading\">\n            <p>‚è≥ Cargando...</p>\n          </div>\n        )}\n\n        <div className=\"main-layout\">\n          <div className=\"left-panel\">\n            <TournamentManager\n              selectedTournament={selectedTournament || undefined}\n              onTournamentSelect={setSelectedTournament}\n              onViewResults={handleViewTournamentResults}\n            />\n          </div>\n\n          <div className=\"right-panel\">\n            {selectedTournament ? (\n              <>\n                <div className=\"tournament-details\">\n                  <div className=\"tournament-header\">\n                    <div className=\"tournament-header-content\">\n                      <div className=\"tournament-title-section\">\n                        <div className=\"tournament-icon\">üèÜ</div>\n                        <div className=\"tournament-info\">\n                          <h2>{selectedTournament.name}</h2>\n                          {selectedTournament.description && (\n                            <div className=\"tournament-description\">\n                              {selectedTournament.description}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"tournament-stats-section\">\n                        <div className=\"stats-row\">\n                          <span className=\"stat-badge\">\n                            {selectedTournament.courts} canchas\n                          </span>\n                          <span className=\"stat-badge\">\n                            {pairs.length} parejas\n                          </span>\n                        </div>\n                        <div className=\"stats-row\">\n                          <span className=\"stat-badge\">\n                            {matches.length} partidos\n                          </span>\n                          <span\n                            className={`status-badge ${\n                              selectedTournament.is_started\n                                ? \"started\"\n                                : \"pending\"\n                            }`}\n                          >\n                            {selectedTournament.is_started\n                              ? \"En Progreso\"\n                              : \"Pendiente\"}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Gesti√≥n de Jugadores - MOVIDA AQU√ç */}\n                  <div className=\"player-management-section\">\n                    <div className=\"player-management-header\">\n                      <h3>üë• Gesti√≥n de Jugadores</h3>\n                      <button\n                        className=\"toggle-player-manager-btn\"\n                        onClick={() => setShowPlayerManager(!showPlayerManager)}\n                      >\n                        {showPlayerManager\n                          ? \"üë• Ocultar Gesti√≥n de Jugadores\"\n                          : \"üë• Mostrar Gesti√≥n de Jugadores\"}\n                      </button>\n                    </div>\n\n                    {showPlayerManager && (\n                      <div className=\"player-manager-container\">\n                        <PlayerManager\n                          playersInPairs={pairs.flatMap((pair) => [\n                            pair.player1_id,\n                            pair.player2_id,\n                          ])}\n                          onPlayerSelect={(players) => {\n                            console.log(\"=== SELECCI√ìN DE JUGADORES ===\");\n                            console.log(\"Players selected:\", players.length);\n                            players.forEach((player, index) => {\n                              console.log(\n                                `Player ${index + 1}:`,\n                                player.name,\n                                \"(ID:\",\n                                player.id + \")\"\n                              );\n                            });\n\n                            // Validaci√≥n: Verificar si alg√∫n jugador ya est√° en una pareja\n                            const playersInPairs = players.filter((player) => {\n                              const isInPair = pairs.some(\n                                (pair) =>\n                                  pair.player1_id === player.id ||\n                                  pair.player2_id === player.id\n                              );\n\n                              if (isInPair) {\n                                const existingPair = pairs.find(\n                                  (pair) =>\n                                    pair.player1_id === player.id ||\n                                    pair.player2_id === player.id\n                                );\n                                console.log(\n                                  `üö® JUGADOR YA EN PAREJA: ${\n                                    player.name\n                                  } est√° en pareja con ${\n                                    existingPair?.player1?.id === player.id\n                                      ? existingPair?.player2?.name\n                                      : existingPair?.player1?.name\n                                  }`\n                                );\n                              }\n\n                              return isInPair;\n                            });\n\n                            if (playersInPairs.length > 0) {\n                              const playerNames = playersInPairs\n                                .map((p) => p.name)\n                                .join(\", \");\n                              console.log(\n                                \"üö® ERROR: Jugadores ya est√°n en parejas:\",\n                                playerNames\n                              );\n                              setError(\n                                `Los jugadores ${playerNames} ya est√°n en parejas existentes. Debes eliminar sus parejas actuales antes de poder seleccionarlos nuevamente.`\n                              );\n                              return;\n                            }\n\n                            // Validaci√≥n: No permitir jugadores con nombres iguales\n                            if (players.length === 2) {\n                              const player1 = players[0];\n                              const player2 = players[1];\n\n                              if (\n                                player1.name.toLowerCase() ===\n                                player2.name.toLowerCase()\n                              ) {\n                                console.log(\n                                  \"üö® ERROR: Jugadores con nombres iguales detectados\"\n                                );\n                                console.log(\n                                  \"Player 1:\",\n                                  player1.name,\n                                  \"(ID:\",\n                                  player1.id + \")\"\n                                );\n                                console.log(\n                                  \"Player 2:\",\n                                  player2.name,\n                                  \"(ID:\",\n                                  player2.id + \")\"\n                                );\n                                setError(\n                                  \"No puedes seleccionar dos jugadores con el mismo nombre\"\n                                );\n                                return;\n                              }\n\n                              // Validaci√≥n: Verificar si ya existe una pareja con estos jugadores\n                              const existingPair = pairs.find((pair) => {\n                                const sameIds =\n                                  (pair.player1_id === player1.id &&\n                                    pair.player2_id === player2.id) ||\n                                  (pair.player1_id === player2.id &&\n                                    pair.player2_id === player1.id);\n\n                                const sameNames =\n                                  (pair.player1?.name.toLowerCase() ===\n                                    player1.name.toLowerCase() &&\n                                    pair.player2?.name.toLowerCase() ===\n                                      player2.name.toLowerCase()) ||\n                                  (pair.player1?.name.toLowerCase() ===\n                                    player2.name.toLowerCase() &&\n                                    pair.player2?.name.toLowerCase() ===\n                                      player1.name.toLowerCase());\n\n                                if (sameIds || sameNames) {\n                                  console.log(\n                                    \"üö® PAREJA DUPLICADA DETECTADA:\",\n                                    player1.name,\n                                    \"+\",\n                                    player2.name\n                                  );\n                                  console.log(\"Existing pair:\", existingPair);\n                                }\n\n                                return sameIds || sameNames;\n                              });\n\n                              if (existingPair) {\n                                console.log(\n                                  \"üö® ERROR: Pareja ya existe en la base de datos\"\n                                );\n                                setError(\n                                  `La pareja ${player1.name} + ${player2.name} ya existe en el torneo`\n                                );\n                                return;\n                              }\n\n                              // Si llegamos aqu√≠, la pareja es v√°lida\n                              console.log(\n                                \"‚úÖ PAREJA V√ÅLIDA:\",\n                                player1.name,\n                                \"+\",\n                                player2.name\n                              );\n                              addPair(player1, player2);\n                              setSelectedPlayers([]); // Limpiar selecci√≥n despu√©s de crear la pareja\n                            } else {\n                              setSelectedPlayers(players);\n                            }\n                          }}\n                          selectedPlayers={selectedPlayers}\n                          allowMultipleSelection={true}\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Gesti√≥n de Parejas - NUEVO COMPONENTE */}\n                  <div className=\"pair-management-section\">\n                    <div className=\"pair-management-header\">\n                      <h3>‚úèÔ∏è Gesti√≥n de Parejas</h3>\n                      <button\n                        className=\"toggle-pair-manager-btn\"\n                        onClick={() => setShowPairManager(!showPairManager)}\n                      >\n                        {showPairManager\n                          ? \"‚úèÔ∏è Ocultar Gesti√≥n de Parejas\"\n                          : \"‚úèÔ∏è Mostrar Gesti√≥n de Parejas\"}\n                      </button>\n                    </div>\n\n                    {showPairManager && (\n                      <div className=\"pair-manager-container\">\n                        <PairManager\n                          pairs={pairs}\n                          onPairUpdate={updatePairPlayers}\n                          onPairDelete={deletePair}\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  {!selectedTournament.is_started ? (\n                    <div className=\"start-tournament-section\">\n                      <h3>üöÄ Iniciar Torneo</h3>\n                      <div className=\"tournament-info\">\n                        <p>Tienes {pairs.length} parejas registradas</p>\n                        <p>\n                          Se crear√°n {(pairs.length * (pairs.length - 1)) / 2}{\" \"}\n                          partidos (round-robin completo - todas las parejas se\n                          enfrentan)\n                        </p>\n                        <p>\n                          Estado del torneo:{\" \"}\n                          {selectedTournament.is_started\n                            ? \"Iniciado\"\n                            : \"Pendiente\"}\n                        </p>\n                      </div>\n                      <button\n                        className=\"start-button\"\n                        onClick={startTournament}\n                        disabled={loading || pairs.length < 2}\n                      >\n                        {loading\n                          ? \"‚è≥ Iniciando...\"\n                          : selectedTournament.is_started\n                          ? \"üèÜ Torneo Ya Iniciado\"\n                          : pairs.length < 2\n                          ? \"‚ùå Necesitas al menos 2 parejas\"\n                          : \"üöÄ ¬°Iniciar Torneo!\"}\n                      </button>\n                    </div>\n                  ) : (\n                    <div className=\"tournament-status-section\">\n                      <h3>üèÜ Torneo en Progreso</h3>\n                      <div className=\"tournament-info\">\n                        <p>El torneo ya est√° iniciado y en progreso</p>\n                        <p>Tienes {pairs.length} parejas registradas</p>\n                        <p>Estado del torneo: Iniciado</p>\n                      </div>\n                      <button\n                        className=\"reset-button\"\n                        onClick={async () => {\n                          if (\n                            window.confirm(\n                              \"¬øEst√°s seguro de que quieres resetear el torneo? Esto eliminar√° todos los partidos existentes.\"\n                            )\n                          ) {\n                            try {\n                              setLoading(true);\n                              await deleteMatchesByTournament(\n                                selectedTournament.id\n                              );\n                              await updateTournament(selectedTournament.id, {\n                                is_started: false,\n                              });\n                              setSelectedTournament((prev) =>\n                                prev ? { ...prev, is_started: false } : null\n                              );\n                              setMatches([]);\n                              await loadTournamentData();\n                              setSuccessModalData({\n                                title: \"¬°Torneo Reseteado!\",\n                                message:\n                                  \"El torneo ha sido reseteado y est√° listo para iniciar nuevamente.\",\n                                icon: \"üîÑ\",\n                              });\n                              setShowSuccessModal(true);\n                            } catch (error) {\n                              setError(\n                                \"Error al resetear el torneo: \" +\n                                  (error as Error).message\n                              );\n                            } finally {\n                              setLoading(false);\n                            }\n                          }\n                        }}\n                        disabled={loading}\n                      >\n                        {loading ? \"‚è≥ Reseteando...\" : \"üîÑ Resetear Torneo\"}\n                      </button>\n                    </div>\n                  )}\n\n                  {/* Debug info - COLAPSIBLE */}\n                  {selectedTournament && (\n                    <div className=\"debug-section\">\n                      <button\n                        className=\"debug-toggle-btn\"\n                        onClick={() => setShowDebugInfo(!showDebugInfo)}\n                      >\n                        {showDebugInfo ? \"üîΩ\" : \"üîº\"} Debug Info\n                      </button>\n\n                      {showDebugInfo && (\n                        <div className=\"debug-info\">\n                          <div className=\"debug-header\">\n                            <h4>üîß Informaci√≥n de Debug</h4>\n                            <div className=\"debug-stats\">\n                              <span>\n                                Estado:{\" \"}\n                                {selectedTournament.is_started\n                                  ? \"‚úÖ Iniciado\"\n                                  : \"‚è≥ Pendiente\"}\n                              </span>\n                              <span>Parejas: {pairs.length}</span>\n                              <span>Partidos: {matches.length}</span>\n                            </div>\n                          </div>\n\n                          <div className=\"debug-buttons\">\n                            <button\n                              onClick={async () => {\n                                console.log(\"=== PROBAR CONEXI√ìN ===\");\n                                const isConnected = await testConnection();\n                                if (isConnected) {\n                                  setError(\"\");\n                                } else {\n                                  setError(\n                                    \"‚ùå Error de conexi√≥n a Supabase. Verifica tu configuraci√≥n.\"\n                                  );\n                                }\n                              }}\n                              className=\"debug-btn connection-btn\"\n                            >\n                              üîå Probar Conexi√≥n\n                            </button>\n\n                            <button\n                              onClick={() => {\n                                console.log(\n                                  \"=== FORZANDO RECARGA DE DATOS ===\"\n                                );\n                                loadTournamentData();\n                              }}\n                              className=\"debug-btn reload-btn\"\n                            >\n                              üîÑ Recargar Datos\n                            </button>\n\n                            <button\n                              onClick={async () => {\n                                console.log(\n                                  \"=== VERIFICANDO ESTADO DEL TORNEO ===\"\n                                );\n                                try {\n                                  console.log(\n                                    \"Estado actual del torneo:\",\n                                    selectedTournament\n                                  );\n                                  console.log(\n                                    \"Parejas en estado:\",\n                                    pairs.length\n                                  );\n                                  console.log(\n                                    \"Partidos en estado:\",\n                                    matches.length\n                                  );\n\n                                  const dbPairs = await getPairs(\n                                    selectedTournament.id\n                                  );\n                                  const dbMatches = await getMatches(\n                                    selectedTournament.id\n                                  );\n\n                                  console.log(\"Parejas en BD:\", dbPairs.length);\n                                  console.log(\n                                    \"Partidos en BD:\",\n                                    dbMatches.length\n                                  );\n\n                                  alert(\n                                    `Estado del torneo:\\n\\nParejas: ${\n                                      pairs.length\n                                    } (estado) / ${\n                                      dbPairs.length\n                                    } (BD)\\nPartidos: ${\n                                      matches.length\n                                    } (estado) / ${\n                                      dbMatches.length\n                                    } (BD)\\n\\nTorneo iniciado: ${\n                                      selectedTournament.is_started\n                                        ? \"S√≠\"\n                                        : \"No\"\n                                    }`\n                                  );\n                                } catch (error) {\n                                  console.error(\n                                    \"Error verificando estado:\",\n                                    error\n                                  );\n                                }\n                              }}\n                              className=\"debug-btn status-btn\"\n                            >\n                              üîç Verificar Estado\n                            </button>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Mostrar parejas creadas */}\n                  {pairs.length > 0 && (\n                    <div className=\"pairs-display\">\n                      <h3>üë• Parejas Registradas ({pairs.length})</h3>\n                      <div className=\"pairs-grid\">\n                        {pairs.map((pair, index) => (\n                          <div key={pair.id} className=\"pair-display-card\">\n                            <div className=\"pair-number\">#{index + 1}</div>\n                            <div className=\"pair-names\">\n                              {pair.player1?.name} y {pair.player2?.name}\n                            </div>\n                            <div className=\"pair-stats\">\n                              <span>Sets: {pair.sets_won}</span>\n                              <span>Partidos: {pair.matches_played}</span>\n                              <span>Puntos: {pair.points}</span>\n                            </div>\n                            <button\n                              onClick={() => {\n                                if (\n                                  window.confirm(\n                                    `¬øEst√°s seguro de que quieres eliminar la pareja \"${pair.player1?.name} y ${pair.player2?.name}\"?`\n                                  )\n                                ) {\n                                  deletePair(pair.id);\n                                }\n                              }}\n                              className=\"delete-pair-btn\"\n                              title=\"Eliminar pareja\"\n                            >\n                              üóëÔ∏è\n                            </button>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {selectedTournament.is_started && (\n                    <div className=\"tournament-content\">\n                      {/* Lista de partidos */}\n                      <div className=\"matches-section\">\n                        <h3>üéæ Partidos ({matches.length} total)</h3>\n                        {matches.length === 0 ? (\n                          <div className=\"no-matches\">\n                            <p>üìù No hay partidos programados a√∫n</p>\n                            <p>\n                              Inicia el torneo para generar los partidos\n                              autom√°ticamente\n                            </p>\n                          </div>\n                        ) : (\n                          Object.entries(matchesByRound).map(\n                            ([round, roundMatches]) => (\n                              <div key={round} className=\"round-section\">\n                                <h4>\n                                  üîÑ Ronda {round} ({roundMatches.length}{\" \"}\n                                  partidos)\n                                </h4>\n                                <div className=\"matches-container\">\n                                  {roundMatches.map((match) => (\n                                    <div\n                                      key={match.id}\n                                      className={`match-card ${\n                                        selectedMatchId === match.id\n                                          ? \"selected\"\n                                          : \"\"\n                                      }`}\n                                      onClick={() =>\n                                        handleMatchSelect(match.id)\n                                      }\n                                    >\n                                      <div className=\"match-header\">\n                                        <h5>\n                                          {match.pair1?.player1?.name} y{\" \"}\n                                          {match.pair1?.player2?.name} vs{\" \"}\n                                          {match.pair2?.player1?.name} y{\" \"}\n                                          {match.pair2?.player2?.name}\n                                        </h5>\n                                        <div className=\"match-info\">\n                                          <span className=\"court-badge\">\n                                            üèüÔ∏è Cancha {match.court}\n                                          </span>\n                                          <span className=\"round-badge\">\n                                            üîÑ Ronda {match.round}\n                                          </span>\n                                        </div>\n                                      </div>\n                                      <div className=\"match-details\">\n                                        <p className=\"match-pairs\">\n                                          <strong>Pareja 1:</strong>{\" \"}\n                                          {match.pair1?.player1?.name} y{\" \"}\n                                          {match.pair1?.player2?.name}\n                                        </p>\n                                        <p className=\"match-pairs\">\n                                          <strong>Pareja 2:</strong>{\" \"}\n                                          {match.pair2?.player1?.name} y{\" \"}\n                                          {match.pair2?.player2?.name}\n                                        </p>\n                                      </div>\n                                      {match.winner_id && (\n                                        <div className=\"winner\">\n                                          <span className=\"winner-icon\">\n                                            üèÜ\n                                          </span>\n                                          Ganador:{\" \"}\n                                          {match.winner_id === match.pair1_id\n                                            ? `${match.pair1?.player1?.name} y ${match.pair1?.player2?.name}`\n                                            : `${match.pair2?.player1?.name} y ${match.pair2?.player2?.name}`}\n                                        </div>\n                                      )}\n                                      {match.is_finished &&\n                                        !match.winner_id && (\n                                          <div className=\"winner\">\n                                            <span className=\"winner-icon\">\n                                              ü§ù\n                                            </span>\n                                            Empate: {match.pair1?.player1?.name}{\" \"}\n                                            y {match.pair1?.player2?.name} vs{\" \"}\n                                            {match.pair2?.player1?.name} y{\" \"}\n                                            {match.pair2?.player2?.name}\n                                          </div>\n                                        )}\n                                      <div className=\"match-status\">\n                                        {match.is_finished ? (\n                                          <span className=\"status-finished\">\n                                            ‚úî Finalizado\n                                          </span>\n                                        ) : (\n                                          <span className=\"status-pending\">\n                                            ‚è≥ Pendiente\n                                          </span>\n                                        )}\n                                      </div>\n                                      <div className=\"match-actions\">\n                                        <button\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            showMatchResultsHandler(match);\n                                          }}\n                                          className=\"view-results-btn\"\n                                        >\n                                          üìä Ver Resultados\n                                        </button>\n                                        <button\n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            openScoreCorrector(match);\n                                          }}\n                                          className=\"correct-result-btn\"\n                                        >\n                                          ‚úèÔ∏è Marcador\n                                        </button>\n                                      </div>\n                                    </div>\n                                  ))}\n                                </div>\n                              </div>\n                            )\n                          )\n                        )}\n                      </div>\n\n                      {/* Tabla de clasificaci√≥n */}\n                      <StandingsTable\n                        tournamentId={selectedTournament.id}\n                        forceRefresh={forceRefresh}\n                      />\n\n                      {/* Bot√≥n para mostrar ganador */}\n                      {isTournamentFinished && winner && (\n                        <div className=\"winner-button-container\">\n                          <button\n                            className=\"show-winner-button\"\n                            onClick={showWinnerScreenHandler}\n                          >\n                            üèÜ ¬°Ver Ganador!\n                          </button>\n                        </div>\n                      )}\n\n                      {/* Bot√≥n para volver al inicio */}\n                      <div className=\"back-home-button-container\">\n                        <button\n                          className=\"back-home-button\"\n                          onClick={handleBackToHome}\n                        >\n                          üè† Volver al Inicio\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </>\n            ) : (\n              <div className=\"no-tournament-selected\">\n                <h2>üèÜ Bienvenido al Gestor de Torneos</h2>\n                <p>\n                  Selecciona un torneo del panel izquierdo para comenzar a\n                  gestionar partidos y resultados.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Pantalla de ganador */}\n        {showWinnerScreen && winner && (\n          <div className=\"winner-screen\">\n            <div className=\"winner-content\">\n              <div className=\"winner-celebration\">\n                <h1 className=\"winner-title\">üèÜ ¬°FELICIDADES! üèÜ</h1>\n                <div className=\"winner-names\">\n                  {winner.player1?.name} y {winner.player2?.name}\n                </div>\n                <div className=\"winner-subtitle\">\n                  ¬°Son los campeones del torneo!\n                </div>\n                <div className=\"winner-stats\">\n                  <div className=\"stat-item\">\n                    <span className=\"stat-number\">{winner.sets_won}</span>\n                    <span className=\"stat-label\">Sets Ganados</span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-number\">{winner.games_won}</span>\n                    <span className=\"stat-label\">Partidos Ganados</span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-number\">{winner.points}</span>\n                    <span className=\"stat-label\">Puntos Totales</span>\n                  </div>\n                </div>\n                <button\n                  className=\"back-button\"\n                  onClick={hideWinnerScreenHandler}\n                >\n                  üè† Volver al Torneo\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Modal de resultados de partido */}\n\n        {/* Modal de correcci√≥n de marcador */}\n        {showScoreCorrector && selectedCorrectorMatch && (\n          <ScoreCorrector\n            match={selectedCorrectorMatch}\n            onClose={closeScoreCorrector}\n            onUpdate={handleScoreCorrectorUpdate}\n          />\n        )}\n\n        {/* Modal de √©xito */}\n        {showSuccessModal && (\n          <SuccessModal\n            title={successModalData.title}\n            message={successModalData.message}\n            icon={successModalData.icon}\n            isOpen={showSuccessModal}\n            onClose={() => setShowSuccessModal(false)}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
/*! For license information please see main.b049f46b.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,j={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,a)&&!S.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:j.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+P(l,0):s,x(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),T(i,t,a,"",function(e){return e})):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+P(o=e[c],c);l+=T(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,a,u=s+P(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",function(e){return t.call(n,e,a++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var $={current:null},O={transition:null},I={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:O,ReactCurrentOwner:j};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=A,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=j.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return $.current.useCallback(e,t)},t.useContext=function(e){return $.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return $.current.useDeferredValue(e)},t.useEffect=function(e,t){return $.current.useEffect(e,t)},t.useId=function(){return $.current.useId()},t.useImperativeHandle=function(e,t,n){return $.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return $.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return $.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return $.current.useMemo(e,t)},t.useReducer=function(e,t,n){return $.current.useReducer(e,t,n)},t.useRef=function(e){return $.current.useRef(e)},t.useState=function(e){return $.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return $.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return $.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(829)),s=r(n(736));class i{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?`{${n.join(",")}}`:`${n}`]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(o="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new s.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,O(_);else{var t=r(u);null!==t&&I(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(N),N=-1),f=!0;var s=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),w(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&I(x,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,S=!1,k=null,N=-1,E=5,P=-1;function T(){return!(t.unstable_now()-P<E)}function C(){if(null!==k){var e=t.unstable_now();P=e;var n=!0;try{n=k(!0,e)}finally{n?j():(S=!1,k=null)}}else S=!1}if("function"===typeof b)j=function(){b(C)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,$=R.port2;R.port1.onmessage=C,j=function(){$.postMessage(null)}}else j=function(){v(C,0)};function O(e){k=e,S||(S=!0,j())}function I(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(N),N=-1):g=!0,I(x,s-i))):(e.sortIndex=o,n(c,e),m||f||(m=!0,O(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},286:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(630)),s=r(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,a;let i=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const a=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),s=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");a&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null===i||void 0===i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(286));class s extends a.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=a?`${a}.order`:"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof r?"offset":`${r}.offset`,s="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}t.default=s},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},535:(e,t,n)=>{n.d(t,{ND:()=>en,E2:()=>tn,rN:()=>nn});class r extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class a extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:r,region:a=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:l}=t;let c={},{region:u}=t;u||(u=this.region);const d=new URL(`${this.url}/${e}`);let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const p=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),r),body:h}).catch(e=>{throw new a(e)}),f=p.headers.get("x-relay-error");if(f&&"true"===f)throw new s(p);if(!p.ok)throw new i(p);let m,g=(null!==(n=p.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return m="application/json"===g?yield p.json():"application/octet-stream"===g?yield p.blob():"text/event-stream"===g?p:"multipart/form-data"===g?yield p.formData():yield p.text(),{data:m,error:null,response:p}}catch(r){return{data:null,error:r,response:r instanceof i||r instanceof s?r.context:void 0}}})}}var u=n(980);const{PostgrestClient:d,PostgrestQueryBuilder:h,PostgrestFilterBuilder:p,PostgrestTransformBuilder:f,PostgrestBuilder:m,PostgrestError:g}=u;const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},y=1e4;var b,w,x,_,j,S;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(b||(b={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(w||(w={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(x||(x={})),function(e){e.websocket="websocket"}(_||(_={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(j||(j={}));class k{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=n.decode(e.slice(s,s+r));s+=r;const o=n.decode(e.slice(s,s+a));s+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(s,e.byteLength)))}}}class N{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(S||(S={}));const E=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,a)=>(n[a]=P(a,e,t,r),n),{})},P=(e,t,n,r)=>{const a=t.find(t=>t.name===e),s=null===a||void 0===a?void 0:a.type,i=n[e];return s&&!r.includes(s)?T(s,i):C(i)},T=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return I(t,n)}switch(e){case S.bool:return R(t);case S.float4:case S.float8:case S.int2:case S.int4:case S.int8:case S.numeric:case S.oid:return $(t);case S.json:case S.jsonb:return O(t);case S.timestamp:return A(t);case S.abstime:case S.date:case S.daterange:case S.int4range:case S.int8range:case S.money:case S.reltime:case S.text:case S.time:case S.timestamptz:case S.timetz:case S.tsrange:case S.tstzrange:default:return C(t)}},C=e=>e,R=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},O=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},I=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(a){r=s?s.split(","):[]}return r.map(e=>T(t,e))}return e},A=e=>"string"===typeof e?e.replace(" ","T"):e,D=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class L{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U,z,M,F;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(U||(U={}));class W{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=W.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=W.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=W.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map(e=>e.presence_ref),r=s.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,s,r)}),this.map(s,(t,n)=>{let a=e[t];if(!a)return;const s=n.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(z||(z={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(M||(M={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(F||(F={}));class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=w.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new L(this,x.join,this.params,this.timeout),this.rejoinTimer=new N(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=w.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=w.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this._on(x.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new W(this),this.broadcastEndpointURL=D(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==w.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[M.PRESENCE]&&this.bindings[M.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(F.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(F.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,a=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,s=[];for(let r=0;r<a;r++){const a=t[r],{filter:{event:i,schema:o,table:l,filter:c}}=a,u=n&&n[r];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=w.errored,void(null===e||void 0===e||e(F.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(F.SUBSCRIBED))}null===e||void 0===e||e(F.SUBSCRIBED)}).receive("error",t=>{this.state=w.errored,null===e||void 0===e||e(F.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(F.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===w.joined&&e===M.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=w.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(x.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new L(this,x.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=w.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),s}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new L(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=x;if(n&&[i,o,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let u=this._onMessage(s,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s}).map(e=>e.callback(u,n)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var n,r,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:s}=e,i={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:s};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===w.closed}_isJoined(){return this.state===w.joined}_isJoining(){return this.state===w.joining}_isLeaving(){return this.state===w.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&B.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(x.close,{},e)}_onError(e){this._on(x.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=w.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=E(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=E(e.columns,e.old_record)),t}}const q=()=>{},G=25e3,V=10,H=100,J=[1e3,2e3,5e3,1e4];class K{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=y,this.transport=null,this.heartbeatIntervalMs=G,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=q,this.ref=0,this.reconnectTimer=null,this.logger=q,this.conn=null,this.sendBuffer=[],this.serializer=new k,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)})}:fetch),function(){return t(...arguments)}},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${_.websocket}`,this.httpEndpoint=D(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case b.connecting:return j.Connecting;case b.open:return j.Open;case b.closing:return j.Closing;default:return j.Closed}}isConnected(){return this.connectionState()===j.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new B(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${a})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},H)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:a}=e,s=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${n} ${s}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(x.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:"realtime-js/2.15.5"};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(x.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new N(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},V)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,s,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:y,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:G,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:q,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>J[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Q extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Y(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class X extends Q{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Z extends Q{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ee=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const te=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},ne=e=>{if(Array.isArray(e))return e.map(e=>ne(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const a=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=ne(r)}),t};var re=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const ae=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),se=(e,t,r)=>re(void 0,void 0,void 0,function*(){const a=yield ee(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof a&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{const r=e.status||500,a=(null===n||void 0===n?void 0:n.statusCode)||r+"";t(new X(ae(n),r,a))}).catch(e=>{t(new Z(ae(e),e))}):t(new Z(ae(e),e))}),ie=(e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n)):a};function oe(e,t,n,r,a,s){return re(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,ie(t,r,a,s)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>se(e,o,r))})})}function le(e,t,n,r){return re(this,void 0,void 0,function*(){return oe(e,"GET",t,n,r)})}function ce(e,t,n,r,a){return re(this,void 0,void 0,function*(){return oe(e,"POST",t,r,a,n)})}function ue(e,t,n,r,a){return re(this,void 0,void 0,function*(){return oe(e,"PUT",t,r,a,n)})}function de(e,t,n,r,a){return re(this,void 0,void 0,function*(){return oe(e,"DELETE",t,r,a,n)})}var he=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const pe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fe={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class me{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=te(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return he(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},fe),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(a=n,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=n,i["cache-control"]=`max-age=${s.cacheControl}`,i["content-type"]=s.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===r||void 0===r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?ue:ce)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null===s||void 0===s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Y(a))return{data:null,error:a};throw a}})}upload(e,t,n){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return he(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${s}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:fe.upsert},r),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield ue(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Y(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return he(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield ce(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),s=new URL(this.url+a.url),i=s.searchParams.get("token");if(!i)throw new Q("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}})}update(e,t,n){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return he(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}})}copy(e,t,n){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield ce(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return he(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield ce(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const s=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return he(this,void 0,void 0,function*(){try{const r=yield ce(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}})}download(e,t){return he(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield le(this.fetch,`${this.url}/${n}/${t}${a}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Y(s))return{data:null,error:s};throw s}})}info(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield le(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ne(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}})}exists(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return re(this,void 0,void 0,function*(){return oe(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Y(n)&&n instanceof Z){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}remove(e){return he(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Y(t))return{data:null,error:t};throw t}})}list(e,t,n){return he(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},pe),t),{prefix:e||""});return{data:yield ce(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Y(r))return{data:null,error:r};throw r}})}listV2(e,t){return he(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ce(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ge={"X-Client-Info":"storage-js/2.12.1"};var ve=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class ye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const a=new URL(e);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},ge),t),this.fetch=te(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ve(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Y(e))return{data:null,error:e};throw e}})}getBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Y(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ve(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Y(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Y(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Y(t))return{data:null,error:t};throw t}})}}class be extends ye{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new me(this.url,this.headers,e,this.fetch)}}let we="";we="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const xe={headers:{"X-Client-Info":`supabase-js-${we}/2.57.4`}},_e={schema:"public"},je={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Se={};var ke=n(630),Ne=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ee=e=>{let t;return t=e||("undefined"===typeof fetch?ke.default:fetch),function(){return t(...arguments)}},Pe=(e,t,n)=>{const r=Ee(n),a="undefined"===typeof Headers?ke.Headers:Headers;return(n,s)=>Ne(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},s),{headers:l}))})};var Te=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ce="2.71.1",Re=3e4,$e=9e4,Oe={"X-Client-Info":`gotrue-js/${Ce}`},Ie="X-Supabase-Api-Version",Ae={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},De=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Le extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Ue(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class ze extends Le{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Me extends Le{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Fe extends Le{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class We extends Fe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Be extends Fe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qe extends Fe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ge extends Fe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ve extends Fe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class He extends Fe{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Je(e){return Ue(e)&&"AuthRetryableFetchError"===e.name}class Ke extends Fe{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Qe extends Fe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xe=" \t\n\r=".split(""),Ze=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xe.length;t+=1)e[Xe[t].charCodeAt(0)]=-2;for(let t=0;t<Ye.length;t+=1)e[Ye[t].charCodeAt(0)]=t;return e})();function et(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Ye[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Ye[e]),t.queuedBits-=6}}function tt(e,t,n){const r=Ze[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function nt(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)tt(e.charCodeAt(i),a,s);return t.join("")}function rt(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function at(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}rt(r,t)}}function st(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)tt(e.charCodeAt(a),n,r);return new Uint8Array(t)}function it(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>et(e,n,r)),et(null,n,r),t.join("")}const ot=()=>"undefined"!==typeof window&&"undefined"!==typeof document,lt={tested:!1,writable:!1},ct=()=>{if(!ot())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(lt.tested)return lt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lt.tested=!0,lt.writable=!0}catch(t){lt.tested=!0,lt.writable=!1}return lt.writable};const ut=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},dt=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ht=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},pt=async(e,t)=>{await e.removeItem(t)};class ft{constructor(){this.promise=new ft.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function mt(e){const t=e.split(".");if(3!==t.length)throw new Qe("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!De.test(t[n]))throw new Qe("JWT not in base64url format");return{header:JSON.parse(nt(t[0])),payload:JSON.parse(nt(t[1])),signature:st(t[2]),raw:{header:t[0],payload:t[1]}}}function gt(e){return("0"+e.toString(16)).substr(-2)}async function vt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,gt).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await dt(e,`${t}-code-verifier`,a);const s=await vt(r);return[s,r===s?"plain":"s256"]}ft.promiseConstructor=Promise;const bt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const wt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xt(e){if(!wt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _t(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jt(e){return JSON.parse(JSON.stringify(e))}var St=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const kt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Nt=[502,503,504];async function Et(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new He(kt(e),0);if(Nt.includes(e.status))throw new He(kt(e),e.status);let r,a;try{r=await e.json()}catch(i){throw new Me(kt(i),i)}const s=function(e){const t=e.headers.get(Ie);if(!t)return null;if(!t.match(bt))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(s&&s.getTime()>=Ae.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?a=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new Ke(kt(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new We}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ke(kt(r),e.status,r.weak_password.reasons);throw new ze(kt(r),e.status||500,a)}async function Pt(e,t,n,r){var a;const s=Object.assign({},null===r||void 0===r?void 0:r.headers);s[Ie]||(s[Ie]=Ae.name),(null===r||void 0===r?void 0:r.jwt)&&(s.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null===r||void 0===r?void 0:r.query)&&void 0!==a?a:{};(null===r||void 0===r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,a,s){const i=((e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,a,s);let o;try{o=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new He(kt(l),0)}o.ok||await Et(o);if(null===r||void 0===r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await Et(l)}}(e,t,n+o,{headers:s,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Tt(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ct(e){const t=Tt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Rt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function $t(e){return{data:e,error:null}}function Ot(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,i=St(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function It(e){return e}const At=["global","local","others"];var Dt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};class Lt{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=ut(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At[0];if(At.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${At.join(", ")}`);try{return await Pt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Rt})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Dt(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ot,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Ue(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Pt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rt})}catch(t){if(Ue(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:It});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Ue(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){xt(e);try{return await Pt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rt})}catch(t){if(Ue(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){xt(e);try{return await Pt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Rt})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];xt(e);try{return await Pt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Rt})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){xt(e.userId);try{const{data:t,error:n}=await Pt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async _deleteFactor(e){xt(e.userId),xt(e.id);try{return{data:await Pt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}}}function Ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const zt=!!(globalThis&&ct()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Mt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ft extends Mt{}async function Wt(e,t,n){zt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),zt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw zt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ft(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}zt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{zt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Bt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Oe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qt(e,t,n){return await n()}const Gt={};class Vt{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vt.nextInstanceID,Vt.nextInstanceID+=1,this.instanceID>0&&ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Bt),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Lt({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ut(r.fetch),this.lock=r.lock||qt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:ot()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wt:this.lock=qt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:ct()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ut(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Ut(this.memoryStorage)),ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Gt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Gt[this.storageKey]=Object.assign(Object.assign({},Gt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Gt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gt[this.storageKey]=Object.assign(Object.assign({},Gt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(`GoTrueClient@${this.instanceID} (${Ce}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),ot()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Ue(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ue(t)?{error:t}:{error:new Me("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Tt}),{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Ue(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await yt(this.storage,this.storageKey)),a=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:Tt})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null===i||void 0===i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Tt})}}const{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Ct})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Ct})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Be}}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,a,s,i,o,l,c,u,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let v;if(ot())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:it(f)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Tt});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Be}}catch(m){if(Ue(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Tt});if(await pt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new Be}}catch(a){if(Ue(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:s}=e,i=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Tt}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Be}}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,a,s;try{if("email"in e){const{email:r,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await yt(this.storage,this.storageKey));const{error:o}=await Pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await Pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(s=null===n||void 0===n?void 0:n.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new qe("You must provide either an email or phone number.")}catch(i){if(Ue(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:i}=await Pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Tt});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let a=null,s=null;return"pkce"===this.flowType&&([a,s]=await yt(this.storage,this.storageKey)),await Pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:$t})}catch(a){if(Ue(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new We;const{error:r}=await Pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:a}=e,{error:s}=await Pt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:s,error:i}=await Pt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:i}}throw new qe("You must provide either an email or phone number and a type")}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<$e;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await ht(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=_t()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rt}):await this._useSession(async e=>{var t,n,r;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Rt}):{data:{user:null},error:new We}})}catch(t){if(Ue(t))return function(e){return Ue(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new We;const s=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await yt(this.storage,this.storageKey));const{data:l,error:c}=await Pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:Rt});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:s}=mt(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Ue(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new We;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ot())throw new Ge("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ge(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ve("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ge("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ve("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!a||!i||!s||!l)throw new Ge("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=Re&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const p=d-u;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:f,error:m}=await this._getUser(a);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(Ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{error:a};const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return Ue(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await yt(this.storage,this.storageKey,!0));try{return await Pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Ue(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,s,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Pt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return ot()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Ue(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)throw s;return await Pt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tt})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Je(t)&&Date.now()+n-a<Re},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(a){if(!r(s,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),Ue(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ot()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ht(this.storage,this.storageKey);if(a&&this.userStorage){let t=await ht(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await dt(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:_t()}else if(a&&!a.user&&!a.user){const e=await ht(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await pt(this.storage,this.storageKey+"-user"),await dt(this.storage,this.storageKey,a)):a.user=_t()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<$e;if(this._debug(n,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Je(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(n,"error",a),void console.error(a)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ft;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new We;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),Ue(a)){const e={session:null,error:a};return Je(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(a){r.push(a)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await dt(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=jt(e);await dt(this.storage,this.storageKey,r)}else{const e=jt(t);await dt(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await pt(this.storage,this.storageKey),await pt(this.storage,this.storageKey+"-code-verifier"),await pt(this.storage,this.storageKey+"-user"),this.userStorage&&await pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ot()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Re);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Re);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Mt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ot()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await yt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await Pt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)return{data:null,error:s};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Pt(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null===a||void 0===a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===o||void 0===o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:s,error:i}=await Pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:i})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await Pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=mt(r.access_token);let i=null;s.aal&&(i=s.aal);let o=i;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:a}=await Pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:a,signature:s,raw:{header:i,payload:o}}=mt(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,s,function(e){const t=[];return at(e,e=>t.push(e)),new Uint8Array(t)}(`${i}.${o}`)))throw new Qe("Invalid JWT signature");return{data:{claims:a,header:r,signature:s},error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}}Vt.nextInstanceID=0;const Ht=Vt;class Jt extends Ht{constructor(e){super(e)}}var Kt=function(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Qt{constructor(e,t,n){var r,a,s;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var n,r;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===o||void 0===o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>Te(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:_e,realtime:Se,auth:Object.assign(Object.assign({},je),{storageKey:o}),global:xe});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=l.auth)&&void 0!==s?s:{},this.headers,l.global.fetch),this.fetch=Pe(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new d(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new be(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Kt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,storageKey:l,flowType:c,lock:u,debug:d}=e;const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jt({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:r,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,flowType:c,lock:u,debug:d,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new K(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Yt=(e,t,n)=>new Qt(e,t,n);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Xt="https://cjdgebqralybtyhiuwmq.supabase.co",Zt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqZGdlYnFyYWx5YnR5aGl1d21xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NjU1MjAsImV4cCI6MjA3MzU0MTUyMH0.gBppBJxFbqjUTs5k-WzLVVCb2zHzluozXxSU4VkYK_A";console.log("\ud83d\udd27 Configuraci\xf3n de Supabase:"),console.log("URL:",Xt?"\u2705 Configurada":"\u274c No configurada"),console.log("Key:",Zt?"\u2705 Configurada":"\u274c No configurada");const en=Yt(Xt||"https://placeholder.supabase.co",Zt||"placeholder_key"),tn=Yt(Xt||"https://placeholder.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqZGdlYnFyYWx5YnR5aGl1d21xIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Nzk2NTUyMCwiZXhwIjoyMDczNTQxNTIwfQ.y0ilBqts4YJc5oFDLpIWBOJkzEidjmEIIahIZBYCMMQ",{auth:{autoRefreshToken:!1,persistSession:!1}}),nn=async()=>{try{console.log("\ud83e\uddea Probando conexi\xf3n a Supabase..."),console.log("\ud83d\udd17 URL:",Xt),console.log("\ud83d\udd11 Key:",Zt?"Configurada":"No configurada");const{error:e}=await en.from("users").select("count").limit(1);return e?(console.error("\u274c Error de conexi\xf3n:",e),!1):(console.log("\u2705 Conexi\xf3n exitosa a Supabase"),!0)}catch(e){return console.error("\u274c Error de conexi\xf3n:",e),!1}}},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>s,fetch:()=>a});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const a=r.fetch,s=r.fetch.bind(r),i=r.Headers,o=r.Request,l=r.Response},730:(e,t,n)=>{var r=n(43),a=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),E=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),$=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var D,L=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function M(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function F(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case _:return"Portal";case k:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case $:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,je=null,Se=null;function ke(e){if(e=ba(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=xa(t),_e(e.stateNode,e.type,t))}}function Ne(e){je?Se?Se.push(e):Se=[e]:je=e}function Ee(){if(je){var e=je,t=Se;if(Se=je=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Pe(e,t){return e(t)}function Te(){}var Ce=!1;function Re(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Pe(e,t,n)}finally{Ce=!1,(null!==je||null!==Se)&&(Te(),Ee())}}function $e(e,t){var n=e.stateNode;if(null===n)return null;var r=xa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){Oe=!1}function Ae(e,t,n,r,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Le=null,Ue=!1,ze=null,Me={onError:function(e){De=!0,Le=e}};function Fe(e,t,n,r,a,s,i,o,l){De=!1,Le=null,Ae.apply(Me,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return qe(a),e;if(i===r)return qe(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var He=a.unstable_scheduleCallback,Je=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=dt(o):0!==(s&=i)&&(r=dt(s))}else 0!==(i=n&~a)?r=dt(i):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,jt,St,kt,Nt=!1,Et=[],Pt=null,Tt=null,Ct=null,Rt=new Map,$t=new Map,Ot=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function At(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$t.delete(t.pointerId)}}function Dt(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void kt(e.priority,function(){jt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Ut(e)&&n.delete(t)}function Mt(){Nt=!1,null!==Pt&&Ut(Pt)&&(Pt=null),null!==Tt&&Ut(Tt)&&(Tt=null),null!==Ct&&Ut(Ct)&&(Ct=null),Rt.forEach(zt),$t.forEach(zt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Mt)))}function Wt(e){function t(t){return Ft(t,e)}if(0<Et.length){Ft(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pt&&Ft(Pt,e),null!==Tt&&Ft(Tt,e),null!==Ct&&Ft(Ct,e),Rt.forEach(t),$t.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var Bt=w.ReactCurrentBatchConfig,qt=!0;function Gt(e,t,n,r){var a=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Ht(e,t,n,r)}finally{bt=a,Bt.transition=s}}function Vt(e,t,n,r){var a=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Ht(e,t,n,r)}finally{bt=a,Bt.transition=s}}function Ht(e,t,n,r){if(qt){var a=Kt(e,t,n,r);if(null===a)qr(e,t,r,Jt,n),At(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Pt=Dt(Pt,e,t,n,r,a),!0;case"dragenter":return Tt=Dt(Tt,e,t,n,r,a),!0;case"mouseover":return Ct=Dt(Ct,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Rt.set(s,Dt(Rt.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,$t.set(s,Dt($t.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(At(e,r),4&t&&-1<It.indexOf(e)){for(;null!==a;){var s=ba(a);if(null!==s&&xt(s),null===(s=Kt(e,t,n,r))&&qr(e,t,r,Jt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Jt=null;function Kt(e,t,n,r){if(Jt=null,null!==(e=ya(e=xe(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=L({},cn,{view:0,detail:0}),hn=an(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=an(pn),mn=an(L({},pn,{dataTransfer:0})),gn=an(L({},dn,{relatedTarget:0})),vn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(L({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function kn(){return Sn}var Nn=L({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Nn),Pn=an(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Cn=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$n=an(Rn),On=[9,13,27,32],In=u&&"CompositionEvent"in window,An=null;u&&"documentMode"in document&&(An=document.documentMode);var Dn=u&&"TextEvent"in window&&!An,Ln=u&&(!In||An&&8<An&&11>=An),Un=String.fromCharCode(32),zn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ne(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Hn=null;function Jn(e){Ur(e,0)}function Kn(e){if(H(wa(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Hn=Vn=null)}function nr(e){if("value"===e.propertyName&&Kn(Hn)){var t=[];Gn(t,Hn,e,xe(e)),Re(Jn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Hn)}function sr(e,t){if("click"===e)return Kn(t)}function ir(e,t){if("input"===e||"change"===e)return Kn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=ur(n,s);var i=ur(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==J(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},jr={},Sr={};function kr(e){if(jr[e])return jr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return jr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=kr("animationend"),Er=kr("animationiteration"),Pr=kr("animationstart"),Tr=kr("transitionend"),Cr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(e,t){Cr.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Ir=Rr[Or];$r(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}$r(Nr,"onAnimationEnd"),$r(Er,"onAnimationIteration"),$r(Pr,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(Fe.apply(this,arguments),De){if(!De)throw Error(s(198));var u=Le;De=!1,Le=null,Ue||(Ue=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Lr(a,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Lr(a,o,c),s=l}}}if(Ue)throw e=ze,Ue=!1,ze=null,e}function zr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Mr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Fr]){e[Fr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Mr(t,!1,e),Mr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Mr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Qt(t)){case 1:var a=Gt;break;case 4:a=Vt;break;default:a=Ht}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}Re(function(){var r=s,a=xe(n),i=[];e:{var o=Cr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Nr:case Er:case Pr:l=vn;break;case Tr:l=Cn;break;case"scroll":l=hn;break;case"wheel":l=$n;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=$e(f,h))&&u.push(Gr(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[fa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:wa(l),p=null==c?o:wa(c),(o=new u(m,f+"leave",l,n,a)).target=d,o.relatedTarget=p,m=null,ya(a)===r&&((u=new u(h,f+"enter",c,n,a)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Hr(p))f++;for(p=0,m=h;m;m=Hr(m))p++;for(;0<f-p;)u=Hr(u),f--;for(;0<p-f;)h=Hr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Hr(u),h=Hr(h)}u=null}else u=null;null!==l&&Jr(i,o,l,u,!1),null!==c&&null!==d&&Jr(i,d,c,u,!0)}if("select"===(l=(o=r?wa(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(qn(o))if(Yn)g=ir;else{g=ar;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(i,g,n,a):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?wa(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(i,n,a)}var y;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Mn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Wn=!0)),0<(v=Vr(r,b)).length&&(b=new wn(b,e,null,n,a),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Fn(n))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(zn=!0,Un);case"textInput":return(e=t.data)===Un&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!In&&Mn(e,t)?(e=en(),Zt=Xt=Yt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Ur(i,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=$e(e,n))&&r.unshift(Gr(e,s,a)),null!=(s=$e(e,t))&&r.push(Gr(e,s,a))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=$e(n,s))&&i.unshift(Gr(n,l,o)):a||null!=(l=$e(n,s))&&i.push(Gr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Kr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,pa="__reactProps$"+da,fa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[fa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xa(e){return e[pa]||null}var _a=[],ja=-1;function Sa(e){return{current:e}}function ka(e){0>ja||(e.current=_a[ja],_a[ja]=null,ja--)}function Na(e,t){ja++,_a[ja]=e.current,e.current=t}var Ea={},Pa=Sa(Ea),Ta=Sa(!1),Ca=Ea;function Ra(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function $a(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){ka(Ta),ka(Pa)}function Ia(e,t,n){if(Pa.current!==Ea)throw Error(s(168));Na(Pa,t),Na(Ta,n)}function Aa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,B(e)||"Unknown",a));return L({},n,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Ca=Pa.current,Na(Pa,e),Na(Ta,Ta.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Aa(e,t,Ca),r.__reactInternalMemoizedMergedChildContext=e,ka(Ta),ka(Pa),Na(Pa,e)):ka(Ta),Na(Ta,n)}var Ua=null,za=!1,Ma=!1;function Fa(e){null===Ua?Ua=[e]:Ua.push(e)}function Wa(){if(!Ma&&null!==Ua){Ma=!0;var e=0,t=bt;try{var n=Ua;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ua=null,za=!1}catch(a){throw null!==Ua&&(Ua=Ua.slice(e+1)),He(Ze,Wa),a}finally{bt=t,Ma=!1}}return null}var Ba=[],qa=0,Ga=null,Va=0,Ha=[],Ja=0,Ka=null,Qa=1,Ya="";function Xa(e,t){Ba[qa++]=Va,Ba[qa++]=Ga,Ga=e,Va=t}function Za(e,t,n){Ha[Ja++]=Qa,Ha[Ja++]=Ya,Ha[Ja++]=Ka,Ka=e;var r=Qa;e=Ya;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Qa=1<<32-it(t)+a|n<<a|r,Ya=s+e}else Qa=1<<s|n<<a|r,Ya=e}function es(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ts(e){for(;e===Ga;)Ga=Ba[--qa],Ba[qa]=null,Va=Ba[--qa],Ba[qa]=null;for(;e===Ka;)Ka=Ha[--Ja],Ha[Ja]=null,Ya=Ha[--Ja],Ha[Ja]=null,Qa=Ha[--Ja],Ha[Ja]=null}var ns=null,rs=null,as=!1,ss=null;function is(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ka?{id:Qa,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(n.nextSibling);var r=ns;t&&os(e,t)?is(r,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!as)return us(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ca(e.nextSibling)}function ps(){rs=ns=null,as=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===j?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===$&&ys(s)===t.type)?((r=a(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Ac(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case $:return h(e,(0,t._init)(t._payload),n)}if(te(t)||A(t))return(t=Ac(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===a?c(e,t,n,r):null;case _:return n.key===a?u(e,t,n,r):null;case $:return p(e,t,(a=n._init)(n._payload),r)}if(te(n)||A(n))return null!==a?null:d(e,t,n,r,null);vs(e,n)}return null}function f(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case $:return f(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||A(r))return d(t,e=e.get(n)||null,r,a,null);vs(t,r)}return null}function m(a,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(a,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),s=i(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(a,d),as&&Xa(a,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===u?c=d:u.sibling=d,u=d);return as&&Xa(a,m),c}for(d=r(a,d);m<o.length;m++)null!==(g=f(d,a,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=i(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),as&&Xa(a,m),c}function g(a,o,l,c){var u=A(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(a,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(a,m),as&&Xa(a,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return as&&Xa(a,g),u}for(m=r(a,m);!y.done;g++,y=l.next())null!==(y=f(m,a,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(a,e)}),as&&Xa(a,g),u}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===j){if(7===u.tag){n(r,u.sibling),(s=a(u,i.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===$&&ys(c)===u.type){n(r,u.sibling),(s=a(u,i.props)).ref=gs(r,u,i),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===j?((s=Ac(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Ic(i.type,i.key,i.props,null,r.mode,l)).ref=gs(r,s,i),l.return=r,r=l)}return o(r);case _:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(i,r.mode,l)).return=r,r=s}return o(r);case $:return e(r,s,(u=i._init)(i._payload),l)}if(te(i))return m(r,s,i,l);if(A(i))return g(r,s,i,l);vs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Lc(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),_s=Sa(null),js=null,Ss=null,ks=null;function Ns(){ks=Ss=js=null}function Es(e){var t=_s.current;ka(_s),e._currentValue=t}function Ps(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){js=e,ks=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===js)throw Error(s(308));Ss=e,js.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Rs=null;function $s(e){null===Rs?Rs=[e]:Rs.push(e)}function Os(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,$s(t)):(n.next=a.next,a.next=n),t.interleaved=n,Is(e,r)}function Is(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Is(e,n)}return null===(a=r.interleaved)?(t.next=t,$s(r)):(t.next=a.next,a.next=t),r.interleaved=t,Is(e,n)}function Ms(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var a=e.updateQueue;As=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:As=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=d}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var qs={},Gs=Sa(qs),Vs=Sa(qs),Hs=Sa(qs);function Js(e){if(e===qs)throw Error(s(174));return e}function Ks(e,t){switch(Na(Hs,t),Na(Vs,e),Na(Gs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Gs),Na(Gs,t)}function Qs(){ka(Gs),ka(Vs),ka(Hs)}function Ys(e){Js(Hs.current);var t=Js(Gs.current),n=le(t,e.type);t!==n&&(Na(Vs,e),Na(Gs,n))}function Xs(e){Vs.current===e&&(ka(Gs),ka(Vs))}var Zs=Sa(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=w.ReactCurrentDispatcher,ai=w.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,hi=0;function pi(){throw Error(s(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function mi(e,t,n,r,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Xi:Zi,e=n(r,a),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,a)}while(ui)}if(ri.current=Yi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==di;return di=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=yi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((si&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Dl|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xi(e){var t=yi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);or(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _i(){}function ji(e,t){var n=ii,r=yi(),a=t(),i=!or(r.memoizedState,a);if(i&&(r.memoizedState=a,bo=!0),r=r.queue,Ai(Ni.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ci(9,ki.bind(null,n,r,a,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&si)||Si(n,t,a)}return a}function Si(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ki(e,t,n,r){t.value=n,t.getSnapshot=r,Ei(t)&&Pi(e)}function Ni(e,t,n){return n(function(){Ei(t)&&Pi(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Pi(e){var t=Is(e,1);null!==t&&nc(t,e,1,-1)}function Ti(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Hi.bind(null,ii,e),[t.memoizedState,e]}function Ci(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ri(){return yi().memoizedState}function $i(e,t,n,r){var a=vi();ii.flags|=e,a.memoizedState=Ci(1|t,n,void 0,void 0===r?null:r)}function Oi(e,t,n,r){var a=yi();r=void 0===r?null:r;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==r&&fi(r,i.deps))return void(a.memoizedState=Ci(t,n,s,r))}ii.flags|=e,a.memoizedState=Ci(1|t,n,s,r)}function Ii(e,t){return $i(8390656,8,e,t)}function Ai(e,t){return Oi(2048,8,e,t)}function Di(e,t){return Oi(4,2,e,t)}function Li(e,t){return Oi(4,4,e,t)}function Ui(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oi(4,4,Ui.bind(null,t,e),n)}function Mi(){}function Fi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bi(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ii.lanes|=n,Dl|=n,e.baseState=!0),t)}function qi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=n,ai.transition=r}}function Gi(){return yi().memoizedState}function Vi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ji(e))Ki(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),Qi(n,t,r)}}function Hi(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Ki(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(a.next=a,$s(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Os(e,t,a,r))&&(nc(n,e,r,a=ec()),Qi(n,t,r))}}function Ji(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ki(e,t){ui=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Yi={readContext:Cs,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Xi={readContext:Cs,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:Ii,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,$i(4194308,4,Ui.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $i(4194308,4,e,t)},useInsertionEffect:function(e,t){return $i(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Ti,useDebugValue:Mi,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=qi.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,a=vi();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Tl)throw Error(s(349));0!==(30&si)||Si(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Ii(Ni.bind(null,r,i,e),[e]),r.flags|=2048,Ci(9,ki.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=vi(),t=Tl.identifierPrefix;if(as){var n=Ya;t=":"+t+"R"+(n=(Qa&~(1<<32-it(Qa)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Cs,useCallback:Fi,useContext:Cs,useEffect:Ai,useImperativeHandle:zi,useInsertionEffect:Di,useLayoutEffect:Li,useMemo:Wi,useReducer:wi,useRef:Ri,useState:function(){return wi(bi)},useDebugValue:Mi,useDeferredValue:function(e){return Bi(yi(),oi.memoizedState,e)},useTransition:function(){return[wi(bi)[0],yi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ji,useId:Gi,unstable_isNewReconciler:!1},eo={readContext:Cs,useCallback:Fi,useContext:Cs,useEffect:Ai,useImperativeHandle:zi,useInsertionEffect:Di,useLayoutEffect:Li,useMemo:Wi,useReducer:xi,useRef:Ri,useState:function(){return xi(bi)},useDebugValue:Mi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Bi(t,oi.memoizedState,e)},useTransition:function(){return[xi(bi)[0],yi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ji,useId:Gi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Us(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,a))&&(nc(t,e,a,r),Ms(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Us(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,a))&&(nc(t,e,a,r),Ms(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Us(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zs(e,a,r))&&(nc(t,e,r,n),Ms(t,e,r))}};function ao(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,s))}function so(e,t,n){var r=!1,a=Ea,s=t.contextType;return"object"===typeof s&&null!==s?s=Cs(s):(a=$a(t)?Ca:Pa.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ra(e,a):Ea),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Cs(s):(s=$a(t)?Ca:Pa.current,a.context=Ra(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),Ws(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Gl=r),uo(0,t)},n}function fo(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,a){n=n.render;var s=t.ref;return Ts(t,a),r=mi(e,t,n,r,s,a),n=gi(),null===e||bo?(as&&n&&es(t),t.flags|=1,wo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qo(e,t,a))}function _o(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||$c(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,jo(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return qo(e,t,a)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,qo(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return No(e,t,n,r,a)}function So(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na(Ol,$l),$l|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na(Ol,$l),$l|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Na(Ol,$l),$l|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Na(Ol,$l),$l|=r;return wo(e,t,a,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,a){var s=$a(n)?Ca:Pa.current;return s=Ra(t,s),Ts(t,a),n=mi(e,t,n,r,s,a),r=gi(),null===e||bo?(as&&r&&es(t),t.flags|=1,wo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qo(e,t,a))}function Eo(e,t,n,r,a){if($a(n)){var s=!0;Da(t)}else s=!1;if(Ts(t,a),null===t.stateNode)Bo(e,t),so(t,n,r),oo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Cs(c):c=Ra(t,c=$a(n)?Ca:Pa.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),As=!1;var h=t.memoizedState;i.state=h,Ws(t,r,i,a),l=t.memoizedState,o!==r||h!==l||Ta.current||As?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=As||ao(t,n,o,r,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ls(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Cs(l):l=Ra(t,l=$a(n)?Ca:Pa.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&io(t,i,r,l),As=!1,h=t.memoizedState,i.state=h,Ws(t,r,i,a);var f=t.memoizedState;o!==d||h!==f||Ta.current||As?("function"===typeof p&&(no(t,n,p,r),f=t.memoizedState),(c=As||ao(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Po(e,t,n,r,s,a)}function Po(e,t,n,r,a,s){ko(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&La(t,n,!1),qo(e,t,s);r=t.stateNode,yo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Ks(e,t.containerInfo)}function Co(e,t,n,r,a){return ps(),fs(a),t.flags|=256,wo(e,t,n,r),t.child}var Ro,$o,Oo,Io,Ao={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Na(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,a,0,null),e=Ac(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Ao,e):Uo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Dc({mode:"visible",children:r.children},a,0,null),(i=Ac(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Ao,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Is(e,a),nc(r,e,a,-1))}return mc(),zo(e,t,o,r=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,rs=ca(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(Ha[Ja++]=Qa,Ha[Ja++]=Ya,Ha[Ja++]=Ka,Qa=e.id,Ya=e.overflow,Ka=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Oc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Oc(r,o):(o=Ac(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ao,a}return e=(o=e.child).sibling,a=Oc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Uo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&fs(r),ws(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ps(e.return,t,n)}function Fo(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Wo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mo(e,n,t);else if(19===e.tag)Mo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Na(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fo(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fo(t,!0,n,null,s);break;case"together":Fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ho(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(t),null;case 1:case 17:return $a(t.type)&&Oa(),Vo(t),null;case 3:return r=t.stateNode,Qs(),ka(Ta),ka(Pa),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),$o(e,t),Vo(t),null;case 5:Xs(t);var a=Js(Hs.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Vo(t),null}if(e=Js(Gs.current),ds(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ha]=t,r[pa]=i,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Ar.length;a++)zr(Ar[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Q(r,i),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},zr("invalid",r);break;case"textarea":ae(r,i),zr("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":V(r),Z(r,i,!0);break;case"textarea":V(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[pa]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ar.length;a++)zr(Ar[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":Q(e,r),a=K(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&zr("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vo(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Js(Hs.current),Js(Gs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(i=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Vo(t),null;case 13:if(ka(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,i=!1;else if(i=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vo(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Il&&(Il=3):mc())),null!==t.updateQueue&&(t.flags|=4),Vo(t),null);case 4:return Qs(),$o(e,t),null===e&&Wr(t.stateNode.containerInfo),Vo(t),null;case 10:return Es(t.type._context),Vo(t),null;case 19:if(ka(Zs),null===(i=t.memoizedState))return Vo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Go(i,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Go(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Na(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>Wl&&(t.flags|=128,r=!0,Go(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Vo(t),null}else 2*Ye()-i.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Go(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,Na(Zs,r?1&n|2:1&n),t):(Vo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&$l)&&(Vo(t),6&t.subtreeFlags&&(t.flags|=8192)):Vo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Jo(e,t){switch(ts(t),t.tag){case 1:return $a(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),ka(Ta),ka(Pa),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(ka(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(Zs),null;case 4:return Qs(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(){},Oo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Js(Gs.current);var s,i=null;switch(n){case"input":a=K(e,a),r=K(e,r),i=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Io=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Qo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,n,s)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[ma],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var r=ul,a=dl;ul=null,hl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Wt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Sc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(a,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":X(a,i);break;case"textarea":se(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(a,!!i.multiple,f,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[pa]=i}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Fl=Ye())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(u=Qo)||d,ml(t,e),Qo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Xo=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var a=Xo,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Ko;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Ko;var c=Qo;if(Ko=i,(Qo=l)&&!c)for(Xo=a;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?_l(a):null!==l?(l.return=i,Xo=l):_l(a);for(;null!==s;)Xo=s,bl(s,t,n),s=s.sibling;Xo=a,Ko=o,Qo=c}wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Xo=s):wl(e)}}function wl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Bs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&al(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function xl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Sc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Sc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var jl,Sl=Math.ceil,kl=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,El=w.ReactCurrentBatchConfig,Pl=0,Tl=null,Cl=null,Rl=0,$l=0,Ol=Sa(0),Il=0,Al=null,Dl=0,Ll=0,Ul=0,zl=null,Ml=null,Fl=0,Wl=1/0,Bl=null,ql=!1,Gl=null,Vl=null,Hl=!1,Jl=null,Kl=0,Ql=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Pl)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Yl=null,Error(s(185));vt(e,n,r),0!==(2&Pl)&&e===Tl||(e===Tl&&(0===(2&Pl)&&(Ll|=n),4===Il&&oc(e,Rl)),rc(e,r),1===n&&0===Pl&&0===(1&t.mode)&&(Wl=Ye()+500,za&&Wa()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Tl?Rl:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){za=!0,Fa(e)}(lc.bind(null,e)):Fa(lc.bind(null,e)),ia(function(){0===(6&Pl)&&Wa()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Xl=-1,Zl=0,0!==(6&Pl))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Pl;Pl|=2;var i=fc();for(Tl===e&&Rl===t||(Bl=null,Wl=Ye()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ns(),kl.current=i,Pl=a,null!==Cl?t=0:(Tl=null,Rl=0,t=Il)}if(0!==t){if(2===t&&(0!==(a=ft(e))&&(r=a,t=sc(e,a))),1===t)throw n=Al,hc(e,0),oc(e,r),rc(e,Ye()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!or(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=ft(e))&&(r=i,t=sc(e,i))),1===t))throw n=Al,hc(e,0),oc(e,r),rc(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Ml,Bl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Fl+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xc.bind(null,e,Ml,Bl),t);break}xc(e,Ml,Bl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ra(xc.bind(null,e,Ml,Bl),r);break}xc(e,Ml,Bl);break;default:throw Error(s(329))}}}return rc(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ml,Ml=n,null!==t&&ic(t)),e}function ic(e){null===Ml?Ml=e:Ml.push.apply(Ml,e)}function oc(e,t){for(t&=~Ul,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Pl))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Al,hc(e,0),oc(e,t),rc(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ml,Bl),rc(e,Ye()),null}function cc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Wl=Ye()+500,za&&Wa())}}function uc(e){null!==Jl&&0===Jl.tag&&0===(6&Pl)&&_c();var t=Pl;Pl|=1;var n=El.transition,r=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=r,El.transition=n,0===(6&(Pl=t))&&Wa()}}function dc(){$l=Ol.current,ka(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:Qs(),ka(Ta),ka(Pa),ni();break;case 5:Xs(r);break;case 4:Qs();break;case 13:case 19:ka(Zs);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Cl=e=Oc(e.current,null),Rl=$l=t,Il=0,Al=null,Ul=Ll=Dl=0,Ml=zl=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}Rs=null}return e}function pc(e,t){for(;;){var n=Cl;try{if(Ns(),ri.current=Yi,ci){for(var r=ii.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ci=!1}if(si=0,li=oi=ii=null,ui=!1,di=0,Nl.current=null,null===n||null===n.return){Il=1,Al=t,Cl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&mo(i,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(i,u,t),mc();break e}c=Error(s(426))}else if(as&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fs(lo(c,l));break e}}i=c=lo(c,l),4!==Il&&(Il=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Fs(i,po(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vl||!Vl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Fs(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}wc(n)}catch(w){t=w,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function fc(){var e=kl.current;return kl.current=Yi,null===e?Yi:e}function mc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Tl||0===(268435455&Dl)&&0===(268435455&Ll)||oc(Tl,Rl)}function gc(e,t){var n=Pl;Pl|=2;var r=fc();for(Tl===e&&Rl===t||(Bl=null,hc(e,t));;)try{vc();break}catch(a){pc(e,a)}if(Ns(),Pl=n,kl.current=r,null!==Cl)throw Error(s(261));return Tl=null,Rl=0,Il}function vc(){for(;null!==Cl;)bc(Cl)}function yc(){for(;null!==Cl&&!Ke();)bc(Cl)}function bc(e){var t=jl(e.alternate,e,$l);e.memoizedProps=e.pendingProps,null===t?wc(e):Cl=t,Nl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ho(n,t,$l)))return void(Cl=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Il=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Il&&(Il=5)}function xc(e,t,n){var r=bt,a=El.transition;try{El.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Jl);if(0!==(6&Pl))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Tl&&(Cl=Tl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Tc(tt,function(){return _c(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=El.transition,El.transition=null;var o=bt;bt=1;var l=Pl;Pl|=4,Nl.current=null,function(e,t){if(ea=qt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===a&&(l=o),p===i&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},qt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ta),qt=!!ea,ta=ea=null,e.current=n,yl(n,e,a),Qe(),Pl=l,bt=o,El.transition=i}else e.current=n;if(Hl&&(Hl=!1,Jl=e,Kl=a),i=e.pendingLanes,0===i&&(Vl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ql)throw ql=!1,e=Gl,Gl=null,e;0!==(1&Kl)&&0!==e.tag&&_c(),i=e.pendingLanes,0!==(1&i)?e===Yl?Ql++:(Ql=0,Yl=e):Ql=0,Wa()}(e,t,n,r)}finally{El.transition=a,bt=r}return null}function _c(){if(null!==Jl){var e=wt(Kl),t=El.transition,n=bt;try{if(El.transition=null,bt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Kl=0,0!==(6&Pl))throw Error(s(331));var a=Pl;for(Pl|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var p=(d=Xo).sibling,f=d.return;if(sl(d),d===u){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xo=y;break e}Xo=i.return}}var b=e.current;for(Xo=b;null!==Xo;){var w=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Xo=w;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Xo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xo=x;break e}Xo=l.return}}if(Pl=a,Wa(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(_){}r=!0}return r}finally{bt=n,El.transition=t}}return!1}function jc(e,t,n){e=zs(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=zs(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Rl&n)===n&&(4===Il||3===Il&&(130023424&Rl)===Rl&&500>Ye()-Fl?hc(e,0):Ul|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Is(e,t))&&(vt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Nc(e,n)}function Tc(e,t){return He(e,t)}function Cc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Cc(e,t,n,r)}function $c(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)$c(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Ac(n.children,a,i,t);case S:o=8,a|=8;break;case k:return(e=Rc(12,n,t,2|a)).elementType=k,e.lanes=i,e;case T:return(e=Rc(13,n,t,a)).elementType=T,e.lanes=i,e;case C:return(e=Rc(19,n,t,a)).elementType=C,e.lanes=i,e;case O:return Dc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case E:o=9;break e;case P:o=11;break e;case R:o=14;break e;case $:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Ac(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Mc(e,t,n,r,a,s,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Fc(e){if(!e)return Ea;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($a(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if($a(n))return Aa(e,n,t)}return t}function Wc(e,t,n,r,a,s,i,o,l){return(e=Mc(n,r,!0,e,0,s,0,o,l)).context=Fc(null),n=e.current,(s=Us(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,a),e.current.lanes=a,vt(e,a,r),rc(e,r),e}function Bc(e,t,n,r){var a=t.current,s=ec(),i=tc(a);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(a,t,i))&&(nc(e,a,i,s),Ms(e,a,i)),i}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:To(t),ps();break;case 5:Ys(t);break;case 1:$a(t.type)&&Da(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Na(_s,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Na(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Na(Zs,1&Zs.current),null!==(e=qo(e,t,n))?e.sibling:null);Na(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Na(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return qo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,as&&0!==(1048576&t.flags)&&Za(t,Va,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var a=Ra(t,Pa.current);Ts(t,n),a=mi(null,t,r,e,a,n);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$a(r)?(i=!0,Da(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ds(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,oo(t,r,e,n),t=Po(null,t,r,!0,i,n)):(t.tag=0,as&&i&&es(t),wo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return $c(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===R)return 14}return 2}(r),e=to(r,e),a){case 0:t=No(null,t,r,e,n);break e;case 1:t=Eo(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,No(e,t,r,a=t.elementType===r?a:to(r,a),n);case 1:return r=t.type,a=t.pendingProps,Eo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 3:e:{if(To(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ls(e,t),Ws(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Co(e,t,r,n,a=lo(Error(s(423)),t));break e}if(r!==a){t=Co(e,t,r,n,a=lo(Error(s(424)),t));break e}for(rs=ca(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===a){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==i&&na(r,i)&&(t.flags|=32),ko(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Lo(e,t,n);case 4:return Ks(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,xo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Na(_s,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===a.children&&!Ta.current){t=qo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Us(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ps(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ps(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}wo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ts(t,n),r=r(a=Cs(a)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return a=to(r=t.type,t.pendingProps),_o(e,t,r,a=to(r.type,a),n);case 15:return jo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:to(r,a),Bo(e,t),t.tag=1,$a(r)?(e=!0,Da(t)):e=!1,Ts(t,n),so(t,r,a),oo(t,r,a,n),Po(null,t,r,!0,e,n);case 19:return Wo(e,t,n);case 22:return So(e,t,n)}throw Error(s(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=qc(i);o.call(e)}}Bc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=qc(i);s.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[fa]=i.current,Wr(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Mc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fa]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc(function(){Bc(t,l,n,r)}),l}(n,t,e,a,r);return qc(i)}Kc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Kc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Bc(null,e,null,null)}),t[fa]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ye()),0===(6&Pl)&&(Wl=Ye()+500,Wa()))}break;case 13:uc(function(){var t=Is(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Vc(e,1)}},_t=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)nc(t,e,134217728,ec());Vc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=Is(e,t);if(null!==n)nc(n,e,t,ec());Vc(e,t)}},St=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=xa(r);if(!a)throw Error(s(90));H(r),X(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[ba,wa,xa,Ne,Ee,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,r="",a=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Mc(e,1,!1,null,0,n,0,r,a),e[fa]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,a,0,i,o),e[fa]=t.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(374));class s extends a.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const s=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=s},765:(e,t,n)=>{n.r(t),n.d(t,{createGame:()=>w,createMatch:()=>g,createPair:()=>d,createPlayer:()=>l,createTournament:()=>a,deleteGame:()=>S,deleteMatchesByTournament:()=>b,deletePair:()=>f,deletePairsByTournament:()=>m,deletePlayer:()=>u,deleteTournament:()=>o,getGames:()=>x,getMatches:()=>v,getPairs:()=>h,getPlayers:()=>c,getTournamentGames:()=>_,getTournaments:()=>s,updateGame:()=>j,updateMatch:()=>y,updatePair:()=>p,updateTournament:()=>i});var r=n(535);const a=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;console.log("Creating tournament:",{name:e,description:n,courts:a,userId:t});const{data:s,error:i}=await r.ND.from("tournaments").insert([{name:e,description:n,courts:a,user_id:t,is_public:!0}]).select().single();if(i)throw console.error("Error creating tournament:",i),i;return console.log("Tournament created successfully:",s),s},s=async e=>{console.log("Fetching tournaments for user:",e);let t=r.ND.from("tournaments").select("*").order("created_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:n,error:a}=await t;if(a)throw console.error("Error fetching tournaments:",a),a;return console.log("Tournaments fetched successfully:",(null===n||void 0===n?void 0:n.length)||0,"tournaments"),n||[]},i=async(e,t)=>{const{data:n,error:a}=await r.ND.from("tournaments").update(t).eq("id",e).select().single();if(a)throw a;return n},o=async e=>{const{error:t}=await r.ND.from("tournaments").delete().eq("id",e);if(t)throw t},l=async(e,t)=>{const n=`${e.toLowerCase().replace(/\s+/g,"")}@padel.local`;console.log("Creating player:",{name:e,email:n,userId:t});const{data:a,error:s}=await r.ND.from("players").insert([{name:e,email:n,user_id:t}]).select().single();if(s)throw console.error("Error creating player:",s),s;return console.log("Player created successfully:",a),a},c=async e=>{console.log("Fetching players for user:",e);let t=r.ND.from("players").select("*").order("name");e&&(t=t.eq("user_id",e));const{data:n,error:a}=await t;if(a)throw console.error("Error fetching players:",a),a;return console.log("Players fetched successfully:",(null===n||void 0===n?void 0:n.length)||0,"players"),n||[]},u=async e=>{const{error:t}=await r.ND.from("players").delete().eq("id",e);if(t)throw t},d=async(e,t,n,a)=>{console.log("=== CREATING PAIR IN DATABASE ==="),console.log("Tournament ID:",e),console.log("Player 1 ID:",t),console.log("Player 2 ID:",n);const{data:s,error:i}=await r.ND.from("players").select("name").eq("id",t).single();if(i)throw console.error("Error fetching player 1:",i),i;const{data:o,error:l}=await r.ND.from("players").select("name").eq("id",n).single();if(l)throw console.error("Error fetching player 2:",l),l;console.log("Player 1 name:",s.name),console.log("Player 2 name:",o.name);const{data:c,error:u}=await r.ND.from("pairs").insert([{tournament_id:e,player1_id:t,player2_id:n,player1_name:s.name,player2_name:o.name,user_id:a}]).select("\n      *,\n      player1:players!player1_id(*),\n      player2:players!player2_id(*)\n    ").single();if(u)throw console.error("Database error creating pair:",u),u;return console.log("Pair created in database:",c),c},h=async e=>{console.log("=== FETCHING PAIRS FROM DATABASE ==="),console.log("Tournament ID:",e);const{data:t,error:n}=await r.ND.from("pairs").select("\n      *,\n      player1:players!player1_id(*),\n      player2:players!player2_id(*)\n    ").eq("tournament_id",e).order("created_at");if(n)throw console.error("Database error fetching pairs:",n),n;return console.log("Pairs fetched from database:",t),t},p=async(e,t)=>{const{data:n,error:a}=await r.ND.from("pairs").update(t).eq("id",e).select().single();if(a)throw a;return n},f=async e=>{const{error:t}=await r.ND.from("pairs").delete().eq("id",e);if(t)throw t},m=async e=>{const{error:t}=await r.ND.from("pairs").delete().eq("tournament_id",e);if(t)throw t},g=async function(e,t,n,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5?arguments[5]:void 0;console.log("=== CREATING MATCH IN DATABASE ==="),console.log("Tournament ID:",e),console.log("Pair 1 ID:",t),console.log("Pair 2 ID:",n),console.log("Court:",a),console.log("Round:",s);const{data:o,error:l}=await r.ND.from("pairs").select("player1_name, player2_name").eq("id",t).single();if(l)throw console.error("Error fetching pair 1:",l),l;const{data:c,error:u}=await r.ND.from("pairs").select("player1_name, player2_name").eq("id",n).single();if(u)throw console.error("Error fetching pair 2:",u),u;const d=`${o.player1_name}/${o.player2_name}`,h=`${c.player1_name}/${c.player2_name}`;console.log("Pair 1 name:",d),console.log("Pair 2 name:",h);const p={tournament_id:e,pair1_id:t,pair2_id:n,pair1_name:d,pair2_name:h,court:a,user_id:i};p.round=s;const{data:f,error:m}=await r.ND.from("matches").insert([p]).select("*").single();if(m)throw console.error("Database error creating match:",m),m;return console.log("Match created in database:",f),f},v=async e=>{const{data:t,error:n}=await r.ND.from("matches").select("*").eq("tournament_id",e).order("court");if(n)throw n;return t},y=async(e,t)=>{const{data:n,error:a}=await r.ND.from("matches").update(t).eq("id",e).select().single();if(a)throw a;return n},b=async e=>{const{error:t}=await r.ND.from("matches").delete().eq("tournament_id",e);if(t)throw t},w=async(e,t,n)=>{const{data:a,error:s}=await r.ND.from("games").insert([{match_id:e,game_number:t,user_id:n}]).select().single();if(s)throw s;return a},x=async e=>{const{data:t,error:n}=await r.ND.from("games").select("*").eq("match_id",e).order("game_number");if(n)throw n;return t},_=async e=>{try{const{data:t,error:n}=await r.ND.from("matches").select("id").eq("tournament_id",e);if(n)throw n;if(!t||0===t.length)return[];const a=t.map(e=>e.id),{data:s,error:i}=await r.ND.from("games").select("*").in("match_id",a).order("game_number");if(i)throw i;return s||[]}catch(t){throw console.error("Error getting tournament games:",t),t}},j=async(e,t)=>{const{data:n,error:a}=await r.ND.from("games").update(t).eq("id",e).select().single();if(a)throw a;return n},S=async e=>{const{error:t}=await r.ND.from("games").delete().eq("id",e);if(t)throw t}},829:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:a}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let s=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer",`count=${n}`),new a.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer",`count=${t}`),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer",`count=${e}`),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=r(n(210));t.PostgrestClient=a.default;const s=r(n(829));t.PostgrestQueryBuilder=s.default;const i=r(n(736));t.PostgrestFilterBuilder=i.default;const o=r(n(374));t.PostgrestTransformBuilder=o.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),a=n(391),s=n(579);const i=(0,r.createContext)(void 0),o=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(()=>"dark"),o="dark"===n;(0,r.useEffect)(()=>{localStorage.setItem("padel-tournament-theme",n),document.documentElement.setAttribute("data-theme",n);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",o?"#1a1a1a":"#ffffff")},[n,o]);const l={theme:n,toggleTheme:()=>{a(e=>"light"===e?"dark":"light")},isDark:o};return(0,s.jsx)(i.Provider,{value:l,children:t})};var l=n(535);const c={BASE_URL:"https://retas-new.vercel.app",BASE_URL_PRODUCTION:"https://retas-new.vercel.app",EMAIL_CONFIRM_REDIRECT:"/auth/callback",PASSWORD_RESET_REDIRECT:"/auth/reset-password",ALLOWED_REDIRECT_URLS:["https://retas-new.vercel.app/auth/callback","http://localhost:3000/auth/callback","https://retas-new.vercel.app/auth/reset-password","http://localhost:3000/auth/reset-password"]},u=(0,r.createContext)(void 0),d=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(!0),m=(0,r.useCallback)(async(e,t,n)=>{try{console.log("\ud83d\udd0d Obteniendo perfil para usuario:",e);const{data:r,error:a}=await l.ND.from("users").select("*").eq("id",e).single();if(a){if(console.error("\u274c Error obteniendo perfil:",a),"PGRST116"===a.code){console.log("\ud83d\udc64 Perfil no existe, creando uno b\xe1sico...");const{data:r,error:a}=await l.ND.from("users").insert({id:e,email:t||e,name:n||"Usuario"}).select().single();if(a)return void console.error("\u274c Error creando perfil:",a);console.log("\u2705 Perfil creado:",r),o(r)}return}console.log("\u2705 Perfil obtenido:",r),o(r)}catch(r){console.error("\u274c Error obteniendo perfil:",r)}},[]);(0,r.useEffect)(()=>{let e=!0;const{data:{subscription:t}}=l.ND.auth.onAuthStateChange(async(t,n)=>{var r,s;if(e){var i,l;if(console.log("\ud83d\udd04 Cambio de autenticaci\xf3n:",t,null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.id),h(n),"admin@test.com"===(null===n||void 0===n||null===(s=n.user)||void 0===s?void 0:s.email))console.log("\ud83d\udd10 Usuario admin detectado, NO procesando como usuario normal"),a(null),o(null);else if(a(null!==(i=null===n||void 0===n?void 0:n.user)&&void 0!==i?i:null),null!==n&&void 0!==n&&n.user)console.log("\ud83d\udc64 Usuario normal encontrado, obteniendo perfil..."),console.log("\ud83d\udc64 Usuario data:",n.user),m(n.user.id,n.user.email,null===(l=n.user.user_metadata)||void 0===l?void 0:l.name);else o(null);f(!1)}});return()=>{e=!1,t.unsubscribe()}},[]);const g={user:n,userProfile:i,session:d,loading:p,signUp:async(e,t,n)=>{try{const r=`${c.BASE_URL_PRODUCTION}${c.EMAIL_CONFIRM_REDIRECT}`;console.log("\ud83d\ude80 Iniciando registro de usuario:"),console.log("Email:",e),console.log("Name:",n),console.log("Redirect URL:",r);const{data:a,error:s}=await l.ND.auth.signUp({email:e,password:t,options:{data:{name:n},emailRedirectTo:r}});return console.log("\ud83d\udce7 Respuesta de signUp:"),console.log("Data:",a),console.log("Error:",s),s?(console.error("\u274c Error en signUp:",s),{error:s}):(console.log("\u2705 Usuario registrado exitosamente"),{error:null})}catch(r){return console.error("\u274c Error catch en signUp:",r),{error:r}}},signIn:async(e,t)=>{try{if("admin@test.com"===e)return console.log("\ud83d\udd10 Intento de login de admin como usuario normal - DENEGADO"),{error:{message:"Admin debe usar el panel de administraci\xf3n"}};const{error:n}=await l.ND.auth.signInWithPassword({email:e,password:t});return n?{error:n}:{error:null}}catch(n){return{error:n}}},signOut:async()=>{try{console.log("\ud83d\udeaa Cerrando sesi\xf3n..."),a(null),o(null),h(null);const{error:e}=await l.ND.auth.signOut();if(e)throw console.error("\u274c Error al cerrar sesi\xf3n:",e),e;console.log("\u2705 Sesi\xf3n cerrada exitosamente")}catch(e){throw console.error("\u274c Error al cerrar sesi\xf3n:",e),e}},updateProfile:async e=>{if(!n)return{error:new Error("No user logged in")};try{const{data:t,error:r}=await l.ND.from("users").update(e).eq("id",n.id).select().single();return r?{error:r}:(o(t),{error:null})}catch(t){return{error:t}}}};return(0,s.jsx)(u.Provider,{value:g,children:t})},h=()=>{const e=(0,r.useContext)(u);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e};var p=n(765);const f=e=>{let{onCreateClick:t,isCreating:n}=e;return(0,s.jsx)("header",{className:"app-header",children:(0,s.jsxs)("div",{className:"app-header-container",children:[(0,s.jsx)("h1",{className:"app-header-title",children:"\ud83c\udfc6 Organiza tu Reta de P\xe1del"}),(0,s.jsx)("p",{className:"app-header-subtitle",children:"\xa1Selecciona o crea una reta y comienza a jugar!"}),(0,s.jsx)("button",{className:"app-header-button",onClick:t,children:n?"\u274c Cancelar":"+ Crear Nueva Reta"})]})})},m=e=>{let{onTournamentSelect:t,selectedTournament:n}=e;const{user:a}=h(),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[,u]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)({name:"",description:"",courts:1});(0,r.useEffect)(()=>{if(console.log("\ud83d\udd04 useEffect ejecutado, usuario:",null===a||void 0===a?void 0:a.id),null===a||void 0===a||!a.id)return console.log("\u274c No hay usuario, no se pueden cargar retas"),c(!1),void o([]);let e=!0;return(async()=>{console.log("\ud83d\udd04 Cargando retas para usuario:",a.id);try{c(!0);const t=await(0,p.getTournaments)(a.id);if(!e)return;console.log("\u2705 Retas cargadas:",(null===t||void 0===t?void 0:t.length)||0),o(t||[])}catch(t){if(!e)return;console.error("\u274c Error al cargar retas:",t),u("Error al cargar las retas"),o([])}finally{e&&c(!1)}})(),()=>{e=!1}},[null===a||void 0===a?void 0:a.id]);return l?(0,s.jsx)("div",{className:"loading",children:"Cargando retas..."}):(0,s.jsxs)("div",{className:"tournament-manager",children:[(0,s.jsx)(f,{onCreateClick:()=>m(!d),isCreating:d}),d&&(0,s.jsxs)("div",{className:"create-reta-form",children:[(0,s.jsx)("h3",{children:"Crear Nueva Reta"}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a)try{u("");const e=await(0,p.createTournament)(g.name,a.id,g.description||void 0,g.courts);o([e,...i]),v({name:"",description:"",courts:1}),m(!1)}catch(t){u("Error al crear la reta"),console.error(t)}},children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"tournament-name",children:"Nombre de la Reta:"}),(0,s.jsx)("input",{id:"tournament-name",type:"text",value:g.name,onChange:e=>v({...g,name:e.target.value}),placeholder:"Ej: Reta de Verano 2024",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"tournament-description",children:"Descripci\xf3n (opcional):"}),(0,s.jsx)("textarea",{id:"tournament-description",value:g.description,onChange:e=>v({...g,description:e.target.value}),placeholder:"Descripci\xf3n de la reta...",rows:3})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"tournament-courts",children:"N\xfamero de Canchas:"}),(0,s.jsx)("input",{id:"tournament-courts",type:"number",min:"1",max:"10",value:g.courts,onChange:e=>v({...g,courts:parseInt(e.target.value)}),required:!0})]}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsx)("button",{type:"submit",className:"submit-btn",children:"\ud83c\udfc6 Crear Reta"}),(0,s.jsx)("button",{type:"button",onClick:()=>m(!1),className:"cancel-btn",children:"\u274c Cancelar"})]})]})]}),(0,s.jsxs)("div",{className:"retas-list",children:[(0,s.jsx)("h2",{children:"Mis Retas"}),l?(0,s.jsx)("div",{className:"loading-tournaments",children:(0,s.jsx)("p",{children:"\u23f3 Cargando retas..."})}):0===i.length?(0,s.jsx)("div",{className:"no-tournaments",children:(0,s.jsxs)("div",{className:"no-tournaments-content",children:[(0,s.jsx)("h3",{children:"\ud83c\udfc6 \xa1No tienes ninguna reta!"}),(0,s.jsx)("p",{children:"\xa1Inicia una ya y comienza a organizar tus torneos de p\xe1del!"}),(0,s.jsx)("button",{onClick:()=>m(!0),className:"create-first-tournament-btn",children:"\ud83d\ude80 Crear Mi Primera Reta"})]})}):(0,s.jsx)("div",{className:"tournaments-grid",children:i.map(e=>(0,s.jsxs)("div",{className:"reta-card "+((null===n||void 0===n?void 0:n.id)===e.id?"selected":""),onClick:()=>t(e),style:{cursor:"pointer"},children:[(0,s.jsxs)("div",{className:"reta-card-header",children:[(0,s.jsx)("h4",{className:"reta-card-title",children:e.name}),(0,s.jsx)("button",{onClick:r=>{r.stopPropagation(),(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar esta reta? Esta acci\xf3n no se puede deshacer."))try{u(""),await(0,p.deleteTournament)(e),o(i.filter(t=>t.id!==e)),(null===n||void 0===n?void 0:n.id)===e&&t(i[0]||null)}catch(r){u("Error al eliminar la reta"),console.error(r)}})(e.id)},className:"reta-btn reta-btn-delete",children:"\ud83d\uddd1\ufe0f"})]}),(0,s.jsxs)("div",{className:"reta-card-info",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"info-icon",children:"\ud83c\udfdf\ufe0f"}),e.courts," ",1===e.courts?"cancha":"canchas"]}),e.description&&(0,s.jsxs)("div",{className:"reta-card-description",children:[(0,s.jsx)("span",{className:"description-icon",children:"\ud83d\udcdd"}),(0,s.jsx)("span",{className:"description-text",children:e.description})]}),!e.description&&(0,s.jsxs)("div",{className:"reta-card-description",children:[(0,s.jsx)("span",{className:"description-icon",children:"\ud83d\udcdd"}),(0,s.jsx)("span",{className:"description-text",children:"Sin descripci\xf3n"})]})]}),(0,s.jsxs)("div",{className:"reta-card-actions",children:[(0,s.jsxs)("div",{className:"status-indicator "+(e.is_finished?"finalizada":e.is_started?"en-curso":"pendiente"),children:[(0,s.jsx)("span",{children:e.is_finished?"\ud83c\udfc6":e.is_started?"\u26a1":"\u23f3"}),(0,s.jsx)("span",{children:e.is_finished?"Finalizada":e.is_started?"En curso":"Pendiente"})]}),e.is_started&&!e.is_finished&&(0,s.jsx)("button",{onClick:r=>{r.stopPropagation(),(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres finalizar la reta? Esta acci\xf3n no se puede deshacer."))try{u(""),c(!0),console.log("\ud83c\udfc1 Finalizando reta:",e.name),await(0,p.updateTournament)(e.id,{is_finished:!0}),o(i.map(t=>t.id===e.id?{...t,is_finished:!0}:t)),n&&n.id===e.id&&t({...e,is_finished:!0}),console.log("\u2705 Reta finalizada exitosamente"),alert("\xa1Reta finalizada exitosamente! \ud83c\udfc6")}catch(r){console.error("\u274c Error finalizando reta:",r),u("Error al finalizar la reta: "+r.message)}finally{c(!1)}})(e)},className:"reta-btn reta-btn-finish",disabled:l,children:l?"\u23f3 Finalizando...":"Finalizar"})]})]},e.id))})]})]})};if("undefined"!==typeof document){const e=document.createElement("style");e.textContent="\n  .loading-tournaments {\n    text-align: center;\n    padding: 40px 20px;\n    color: var(--text-secondary);\n  }\n\n  .no-tournaments {\n    text-align: center;\n    padding: 40px 20px;\n  }\n\n  .no-tournaments-content {\n    background: var(--card-bg);\n    border: 1px solid var(--border-color);\n    border-radius: 12px;\n    padding: 40px 20px;\n    max-width: 400px;\n    margin: 0 auto;\n  }\n\n  .no-tournaments-content h3 {\n    color: var(--accent-color);\n    font-size: 24px;\n    margin: 0 0 16px 0;\n    font-weight: 700;\n  }\n\n  .no-tournaments-content p {\n    color: var(--text-secondary);\n    font-size: 16px;\n    margin: 0 0 24px 0;\n    line-height: 1.5;\n  }\n\n  .create-first-tournament-btn {\n    background: var(--accent-color);\n    color: var(--bg-primary);\n    border: none;\n    padding: 12px 24px;\n    border-radius: 8px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: none;\n  }\n\n  .create-first-tournament-btn:hover {\n    background: var(--accent-hover);\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(255, 214, 0, 0.2);\n  }\n\n  .create-first-tournament-btn:active {\n    transform: translateY(0);\n    box-shadow: 0 2px 6px rgba(255, 214, 0, 0.1);\n  }\n",document.head.appendChild(e)}const g=e=>{let{isVisible:t}=e;return t?(0,s.jsxs)("div",{className:"welcome-banner",children:[(0,s.jsx)("h2",{children:"Bienvenido"}),(0,s.jsx)("p",{children:"Organiza y gestiona tus retas de p\xe1del de manera profesional. Crea tu primera reta para comenzar."})]}):null},v=e=>{let{onPlayerSelect:t,selectedPlayers:n=[],allowMultipleSelection:a=!1,playersInPairs:i=[],userId:o}=e;const[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[,h]=(0,r.useState)(""),[f,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(null),w=(0,r.useCallback)(async()=>{if(o)try{d(!0);const e=await(0,p.getPlayers)(o);c(e)}catch(e){h("Error al cargar los jugadores"),console.error(e)}finally{d(!1)}},[o]);(0,r.useEffect)(()=>{o&&w()},[o,w]);return u?(0,s.jsx)("div",{className:"elegant-player-manager",children:(0,s.jsxs)("div",{className:"elegant-loading",children:[(0,s.jsx)("div",{className:"elegant-loading-spinner"}),(0,s.jsx)("p",{children:"Cargando jugadores..."})]})}):(0,s.jsxs)("div",{className:"elegant-player-manager",children:[(0,s.jsx)("div",{className:"elegant-player-header",children:(0,s.jsxs)("div",{className:"elegant-header-content",children:[(0,s.jsxs)("div",{className:"elegant-header-title",children:[(0,s.jsx)("h3",{children:"Jugadores"}),(0,s.jsx)("div",{className:"elegant-player-count",children:l.length})]}),(0,s.jsxs)("button",{onClick:()=>m(!f),className:"elegant-add-btn",children:[(0,s.jsx)("span",{className:"elegant-btn-icon",children:f?"\u2715":"+"}),(0,s.jsx)("span",{className:"elegant-btn-text",children:f?"Cancelar":"Agregar"})]})]})}),f&&(0,s.jsxs)("div",{className:"elegant-create-form",children:[(0,s.jsxs)("div",{className:"elegant-form-header",children:[(0,s.jsx)("h4",{children:"\u2728 Nuevo Jugador"}),(0,s.jsx)("p",{children:"Agrega un nuevo jugador a tu reta"})]}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g.trim()&&o)try{h("");const e=await(0,p.createPlayer)(g.trim(),o);c([...l,e]),v(""),m(!1)}catch(t){h("Error al crear el jugador"),console.error(t)}},className:"elegant-form",children:[(0,s.jsxs)("div",{className:"elegant-input-group",children:[(0,s.jsx)("input",{type:"text",value:g,onChange:e=>v(e.target.value),placeholder:"Nombre del jugador",required:!0,autoFocus:!0,className:"elegant-input"}),(0,s.jsx)("div",{className:"elegant-input-border"})]}),(0,s.jsxs)("div",{className:"elegant-form-actions",children:[(0,s.jsxs)("button",{type:"submit",className:"elegant-submit-btn",children:[(0,s.jsx)("span",{className:"elegant-btn-icon",children:"\u2713"}),(0,s.jsx)("span",{children:"Agregar"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{m(!1),v("")},className:"elegant-cancel-btn",children:[(0,s.jsx)("span",{className:"elegant-btn-icon",children:"\u2715"}),(0,s.jsx)("span",{children:"Cancelar"})]})]})]})]}),0===l.length?(0,s.jsxs)("div",{className:"elegant-empty-state",children:[(0,s.jsx)("h4",{children:"No hay jugadores"}),(0,s.jsx)("p",{children:"Agrega jugadores para poder crear parejas"})]}):(0,s.jsx)("div",{className:"elegant-players-grid",children:l.map(e=>{const r=n.some(t=>t.id===e.id),o=i.includes(e.id),u=y===e.id;return(0,s.jsxs)("div",{className:`elegant-player-card ${r?"selected":""} ${o?"in-pair":""} ${u?"hovered":""}`,onClick:()=>(e=>{if(i.includes(e.id))return console.log(`\ud83d\udea8 JUGADOR BLOQUEADO: ${e.name} ya est\xe1 en una pareja`),void alert(`No puedes seleccionar a ${e.name} porque ya est\xe1 en una pareja. Debes eliminar su pareja actual primero.`);if(t)if(a){const r=n.some(t=>t.id===e.id);t(r?n.filter(t=>t.id!==e.id):[...n,e])}else t([e])})(e),onMouseEnter:()=>b(e.id),onMouseLeave:()=>b(null),children:[(0,s.jsx)("div",{className:"elegant-card-background"}),(0,s.jsxs)("div",{className:"elegant-player-content",children:[(0,s.jsx)("div",{className:"elegant-player-avatar",children:e.name.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"elegant-player-info",children:[(0,s.jsx)("span",{className:"elegant-player-name",children:e.name}),o&&(0,s.jsxs)("span",{className:"elegant-pair-indicator",children:[(0,s.jsx)("span",{className:"elegant-indicator-dot"}),"En pareja"]})]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este jugador? Esta acci\xf3n no se puede deshacer."))try{h(""),await(0,p.deletePlayer)(e),c(l.filter(t=>t.id!==e))}catch(t){h("Error al eliminar el jugador"),console.error(t)}})(e.id)},className:"elegant-delete-btn",title:"Eliminar jugador",children:(0,s.jsx)("span",{className:"elegant-delete-icon",children:"\xd7"})})]}),r&&(0,s.jsx)("div",{className:"elegant-selection-indicator",children:(0,s.jsx)("span",{className:"elegant-check-icon",children:"\u2713"})}),(0,s.jsxs)("div",{className:"elegant-particles",children:[(0,s.jsx)("div",{className:"elegant-particle"}),(0,s.jsx)("div",{className:"elegant-particle"}),(0,s.jsx)("div",{className:"elegant-particle"})]})]},e.id)})})]})},y=e=>{let{pairs:t,onPairUpdate:a,onPairDelete:i}=e;const[,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{p()},[]);const p=async()=>{try{c(!0);const e=await Promise.resolve().then(n.bind(n,765)).then(e=>e.getPlayers),t=await e();o(t)}catch(e){console.error("Error loading players:",e),u("Error al cargar jugadores: "+e.message)}finally{c(!1)}};return l?(0,s.jsx)("div",{className:"elegant-pair-manager",children:(0,s.jsxs)("div",{className:"elegant-loading",children:[(0,s.jsx)("div",{className:"elegant-loading-spinner"}),(0,s.jsx)("p",{children:"Cargando parejas..."})]})}):(0,s.jsxs)("div",{className:"elegant-pair-manager",children:[(0,s.jsx)("div",{className:"elegant-pair-header",children:(0,s.jsx)("div",{className:"elegant-header-content",children:(0,s.jsx)("div",{className:"elegant-header-title",children:(0,s.jsxs)("div",{className:"elegant-pair-count",children:[t.length," parejas"]})})})}),0===t.length?(0,s.jsxs)("div",{className:"elegant-empty-state",children:[(0,s.jsx)("h4",{children:"No hay parejas registradas"}),(0,s.jsx)("p",{children:"Crea parejas para comenzar la reta"})]}):(0,s.jsx)("div",{className:"elegant-pairs-grid",children:t.map((e,t)=>{var n,r;const a=d===e.id;return(0,s.jsxs)("div",{className:"elegant-pair-card "+(a?"hovered":""),onMouseEnter:()=>h(e.id),onMouseLeave:()=>h(null),children:[(0,s.jsx)("div",{className:"elegant-card-background"}),(0,s.jsxs)("div",{className:"elegant-pair-content",children:[(0,s.jsx)("div",{className:"elegant-pair-names",children:(0,s.jsxs)("h4",{children:[(null===(n=e.player1)||void 0===n?void 0:n.name)||"Jugador 1"," /"," ",(null===(r=e.player2)||void 0===r?void 0:r.name)||"Jugador 2"]})}),(0,s.jsx)("button",{className:"elegant-delete-btn",onClick:()=>i(e.id),title:"Eliminar pareja",children:(0,s.jsx)("span",{className:"elegant-delete-icon",children:"\ud83d\uddd1\ufe0f"})})]}),(0,s.jsxs)("div",{className:"elegant-particles",children:[(0,s.jsx)("div",{className:"elegant-particle"}),(0,s.jsx)("div",{className:"elegant-particle"}),(0,s.jsx)("div",{className:"elegant-particle"})]})]},e.id)})})]})},b=e=>{let{tournament:t,pairsCount:n,loading:r,onReset:a}=e;return console.log("\ud83d\udd04 TournamentStatusContent renderizado:",{loading:r,pairsCount:n}),(0,s.jsxs)("div",{className:"elegant-reta-status",children:[(0,s.jsx)("div",{className:"elegant-status-header",children:(0,s.jsx)("div",{className:"elegant-header-content",children:(0,s.jsx)("div",{className:"elegant-header-title",children:(0,s.jsx)("p",{children:"Estado de la Reta"})})})}),(0,s.jsxs)("div",{className:"elegant-status-indicators",children:[(0,s.jsxs)("div",{className:"elegant-status-card",children:[(0,s.jsx)("div",{className:"elegant-status-icon",children:(0,s.jsx)("span",{className:"elegant-status-dot reta-status"})}),(0,s.jsxs)("div",{className:"elegant-status-info",children:[(0,s.jsx)("span",{className:"elegant-status-label",children:"ESTADO"}),(0,s.jsx)("span",{className:"elegant-status-value",children:t.is_finished?"Finalizada":"En Progreso"})]})]}),(0,s.jsxs)("div",{className:"elegant-status-card",children:[(0,s.jsx)("div",{className:"elegant-status-icon",children:(0,s.jsx)("span",{className:"elegant-status-dot pairs-status"})}),(0,s.jsxs)("div",{className:"elegant-status-info",children:[(0,s.jsx)("span",{className:"elegant-status-label",children:"PAREJAS"}),(0,s.jsx)("span",{className:"elegant-status-value",children:n})]})]}),(0,s.jsxs)("div",{className:"elegant-status-card",children:[(0,s.jsx)("div",{className:"elegant-status-icon",children:(0,s.jsx)("span",{className:"elegant-status-dot info-status"})}),(0,s.jsxs)("div",{className:"elegant-status-info",children:[(0,s.jsx)("span",{className:"elegant-status-label",children:"INFO"}),(0,s.jsx)("span",{className:"elegant-status-value",children:t.is_finished?"Exitosa":"Activa"})]})]})]}),(0,s.jsxs)("div",{className:"elegant-status-details",children:[(0,s.jsxs)("div",{className:"elegant-detail-item",children:[(0,s.jsx)("span",{className:"elegant-detail-icon",children:"\u2705"}),(0,s.jsx)("span",{className:"elegant-detail-text",children:t.is_finished?"La reta ha sido finalizada exitosamente":"La reta ya est\xe1 iniciada y en progreso"})]}),(0,s.jsxs)("div",{className:"elegant-detail-item",children:[(0,s.jsx)("span",{className:"elegant-detail-icon",children:"\ud83d\udc65"}),(0,s.jsxs)("span",{className:"elegant-detail-text",children:["Tienes ",n," parejas registradas"]})]}),(0,s.jsxs)("div",{className:"elegant-detail-item",children:[(0,s.jsx)("span",{className:"elegant-detail-icon",children:"\ud83d\udcca"}),(0,s.jsxs)("span",{className:"elegant-detail-text",children:["Estado de la reta:"," ",t.is_finished?"Finalizada":"Iniciada"]})]})]}),(0,s.jsxs)("button",{className:"elegant-reset-btn",onClick:e=>{console.log("\ud83d\udd04 Click en bot\xf3n de reset detectado, loading:",r),e.preventDefault(),e.stopPropagation(),r?console.log("\u274c Bot\xf3n deshabilitado por loading"):(console.log("\u2705 Ejecutando funci\xf3n onReset"),a())},disabled:r,type:"button",style:{pointerEvents:r?"none":"auto",position:"relative",zIndex:1e3},children:[(0,s.jsxs)("div",{className:"elegant-reset-content",children:[(0,s.jsx)("span",{className:"elegant-reset-icon",children:r?"\u23f3":"\ud83d\udd04"}),(0,s.jsx)("span",{className:"elegant-reset-text",children:r?"Reseteando...":"Resetear Reta"})]}),(0,s.jsx)("div",{className:"elegant-reset-background"})]}),(0,s.jsxs)("div",{className:"elegant-status-particles",children:[(0,s.jsx)("div",{className:"elegant-status-particle"}),(0,s.jsx)("div",{className:"elegant-status-particle"}),(0,s.jsx)("div",{className:"elegant-status-particle"})]})]})},w=e=>{let{status:t,pairsCount:n,matchesCount:a,onTestConnection:i,onReloadData:o,onVerifyStatus:l}=e;const[c,u]=(0,r.useState)(!1),d=async e=>{u(!0);try{await e()}finally{setTimeout(()=>u(!1),1e3)}};return(0,s.jsxs)("div",{className:"elegant-debug-panel",children:[(0,s.jsx)("div",{className:"elegant-debug-header",children:(0,s.jsx)("div",{className:"elegant-header-content",children:(0,s.jsx)("div",{className:"elegant-header-title",children:(0,s.jsx)("p",{children:"Informaci\xf3n del Sistema"})})})}),(0,s.jsxs)("div",{className:"elegant-debug-indicators",children:[(0,s.jsxs)("div",{className:"elegant-debug-card",children:[(0,s.jsx)("div",{className:"elegant-debug-icon",children:(0,s.jsx)("span",{className:"elegant-debug-dot active"})}),(0,s.jsxs)("div",{className:"elegant-debug-info",children:[(0,s.jsx)("span",{className:"elegant-debug-label",children:"ESTADO"}),(0,s.jsx)("span",{className:"elegant-debug-value",children:t})]})]}),(0,s.jsxs)("div",{className:"elegant-debug-card",children:[(0,s.jsx)("div",{className:"elegant-debug-icon",children:(0,s.jsx)("span",{className:"elegant-debug-dot pairs"})}),(0,s.jsxs)("div",{className:"elegant-debug-info",children:[(0,s.jsx)("span",{className:"elegant-debug-label",children:"PAREJAS"}),(0,s.jsx)("span",{className:"elegant-debug-value",children:n})]})]}),(0,s.jsxs)("div",{className:"elegant-debug-card",children:[(0,s.jsx)("div",{className:"elegant-debug-icon",children:(0,s.jsx)("span",{className:"elegant-debug-dot matches"})}),(0,s.jsxs)("div",{className:"elegant-debug-info",children:[(0,s.jsx)("span",{className:"elegant-debug-label",children:"PARTIDOS"}),(0,s.jsx)("span",{className:"elegant-debug-value",children:a})]})]})]}),(0,s.jsxs)("div",{className:"elegant-debug-actions",children:[(0,s.jsxs)("button",{className:"elegant-action-btn connection-btn",onClick:()=>d(i),disabled:c,children:[(0,s.jsxs)("div",{className:"elegant-btn-content",children:[(0,s.jsx)("span",{className:"elegant-btn-icon",children:"\u26a1"}),(0,s.jsx)("span",{className:"elegant-btn-text",children:"Probar Conexi\xf3n"})]}),(0,s.jsx)("div",{className:"elegant-btn-background"})]}),(0,s.jsxs)("button",{className:"elegant-action-btn reload-btn",onClick:()=>d(o),disabled:c,children:[(0,s.jsxs)("div",{className:"elegant-btn-content",children:[(0,s.jsx)("span",{className:"elegant-btn-icon",children:"\ud83d\udd04"}),(0,s.jsx)("span",{className:"elegant-btn-text",children:"Recargar Datos"})]}),(0,s.jsx)("div",{className:"elegant-btn-background"})]}),(0,s.jsxs)("button",{className:"elegant-action-btn verify-btn",onClick:()=>d(l),disabled:c,children:[(0,s.jsxs)("div",{className:"elegant-btn-content",children:[(0,s.jsx)("span",{className:"elegant-btn-icon",children:"\ud83d\udd0d"}),(0,s.jsx)("span",{className:"elegant-btn-text",children:"Verificar Estado"})]}),(0,s.jsx)("div",{className:"elegant-btn-background"})]})]}),c&&(0,s.jsxs)("div",{className:"elegant-loading-overlay",children:[(0,s.jsx)("div",{className:"elegant-loading-spinner"}),(0,s.jsx)("span",{children:"Procesando..."})]}),(0,s.jsxs)("div",{className:"elegant-debug-particles",children:[(0,s.jsx)("div",{className:"elegant-debug-particle"}),(0,s.jsx)("div",{className:"elegant-debug-particle"}),(0,s.jsx)("div",{className:"elegant-debug-particle"})]})]})},x=e=>{let{selectedTournament:t,pairs:n,matches:r,showPlayerManager:a,setShowPlayerManager:i,showPairManager:o,setShowPairManager:c,showTournamentStatus:u,setShowTournamentStatus:d,showDebugInfo:h,setShowDebugInfo:p,selectedPlayers:f,setSelectedPlayers:m,setError:g,addPair:x,updatePairPlayers:_,deletePair:j,loading:S,onReset:k,loadTournamentData:N,setForceRefresh:E}=e;const{validatePlayerSelection:P}={validatePlayerSelection:(e,t,n,r,a)=>{console.log("=== SELECCI\xd3N DE JUGADORES ==="),console.log("Players selected:",e.length),e.forEach((e,t)=>{console.log(`Player ${t+1}:`,e.name,"(ID:",e.id+")")});const s=e.filter(e=>{const n=t.some(t=>t.player1_id===e.id||t.player2_id===e.id);if(n){var r,a,s;const n=t.find(t=>t.player1_id===e.id||t.player2_id===e.id);console.log(`\ud83d\udea8 JUGADOR YA EN PAREJA: ${e.name} est\xe1 en pareja con ${(null===n||void 0===n||null===(r=n.player1)||void 0===r?void 0:r.id)===e.id?null===n||void 0===n||null===(a=n.player2)||void 0===a?void 0:a.name:null===n||void 0===n||null===(s=n.player1)||void 0===s?void 0:s.name}`)}return n});if(s.length>0){const e=s.map(e=>e.name).join(", ");return console.log("\ud83d\udea8 ERROR: Jugadores ya est\xe1n en parejas:",e),void n(`Los jugadores ${e} ya est\xe1n en parejas existentes. Debes eliminar sus parejas actuales antes de poder seleccionarlos nuevamente.`)}if(2===e.length){const s=e[0],i=e[1];if(s.name.toLowerCase()===i.name.toLowerCase())return console.log("\ud83d\udea8 ERROR: Jugadores con nombres iguales detectados"),console.log("Player 1:",s.name,"(ID:",s.id+")"),console.log("Player 2:",i.name,"(ID:",i.id+")"),void n("No puedes seleccionar dos jugadores con el mismo nombre");if(t.find(e=>{var t,n,r,a;const o=e.player1_id===s.id&&e.player2_id===i.id||e.player1_id===i.id&&e.player2_id===s.id,l=(null===(t=e.player1)||void 0===t?void 0:t.name.toLowerCase())===s.name.toLowerCase()&&(null===(n=e.player2)||void 0===n?void 0:n.name.toLowerCase())===i.name.toLowerCase()||(null===(r=e.player1)||void 0===r?void 0:r.name.toLowerCase())===i.name.toLowerCase()&&(null===(a=e.player2)||void 0===a?void 0:a.name.toLowerCase())===s.name.toLowerCase();return(o||l)&&(console.log("\ud83d\udea8 PAREJA DUPLICADA DETECTADA:",s.name,"+",i.name),console.log("Existing pair:",e)),o||l}))return console.log("\ud83d\udea8 ERROR: Pareja ya existe en la base de datos"),void n(`La pareja ${s.name} / ${i.name} ya existe en la reta`);console.log("\u2705 PAREJA V\xc1LIDA:",s.name,"+",i.name),r(s,i),a([])}else a(e)}};return(0,s.jsxs)("div",{className:"four-components-grid",children:[(0,s.jsxs)("div",{className:"component-card player-management-section",children:[(0,s.jsxs)("div",{className:"component-header",children:[(0,s.jsx)("div",{className:"component-icon",children:"\ud83d\udc65"}),(0,s.jsxs)("div",{className:"component-title",children:[(0,s.jsx)("h3",{children:"Gesti\xf3n de Jugadores"}),(0,s.jsx)("span",{className:"component-subtitle",children:"Administrar Participantes"})]}),(0,s.jsx)("button",{className:"component-toggle-btn",onClick:()=>i(!a),children:a?"\u274c":"\ud83d\udc41\ufe0f"})]}),a&&(0,s.jsx)("div",{className:"component-content",children:(0,s.jsx)(v,{playersInPairs:n.flatMap(e=>[e.player1_id,e.player2_id]),onPlayerSelect:e=>{P(e,n,g,x,m)},selectedPlayers:f,allowMultipleSelection:!0,userId:t.user_id})})]}),(0,s.jsxs)("div",{className:"component-card pair-management-section",children:[(0,s.jsxs)("div",{className:"component-header",children:[(0,s.jsx)("div",{className:"component-icon",children:"\u270f\ufe0f"}),(0,s.jsxs)("div",{className:"component-title",children:[(0,s.jsx)("h3",{children:"Gesti\xf3n de Parejas"}),(0,s.jsx)("span",{className:"component-subtitle",children:"Administrar Equipos"})]}),(0,s.jsx)("button",{className:"component-toggle-btn",onClick:()=>c(!o),children:o?"\u274c":"\ud83d\udc41\ufe0f"})]}),o&&(0,s.jsx)("div",{className:"component-content",children:(0,s.jsx)(y,{pairs:n,onPairUpdate:_,onPairDelete:j})})]}),(0,s.jsxs)("div",{className:"component-card reta-status-card",children:[(0,s.jsxs)("div",{className:"component-header",children:[(0,s.jsx)("div",{className:"component-icon",children:"\ud83c\udfc6"}),(0,s.jsxs)("div",{className:"component-title",children:[(0,s.jsx)("h3",{children:t.is_finished?"Reta Finalizada":"Reta en Progreso"}),(0,s.jsx)("span",{className:"component-subtitle",children:"Estado de la Reta"})]}),(0,s.jsx)("button",{className:"component-toggle-btn",onClick:()=>d(!u),children:u?"\u274c":"\ud83d\udc41\ufe0f"})]}),u&&(0,s.jsx)("div",{className:"component-content",children:(0,s.jsx)(b,{tournament:t,pairsCount:n.length,loading:S,onReset:k})})]}),(0,s.jsxs)("div",{className:"component-card debug-panel-card",children:[(0,s.jsxs)("div",{className:"component-header",children:[(0,s.jsx)("div",{className:"component-icon",children:"\ud83d\udd27"}),(0,s.jsxs)("div",{className:"component-title",children:[(0,s.jsx)("h3",{children:"Panel de Debug"}),(0,s.jsx)("span",{className:"component-subtitle",children:"Informaci\xf3n del Sistema"})]}),(0,s.jsx)("button",{className:"component-toggle-btn",onClick:()=>p(!h),children:h?"\u274c":"\ud83d\udc41\ufe0f"})]}),h&&(0,s.jsx)("div",{className:"component-content",children:(0,s.jsx)(w,{status:t.is_started?"\u2705 Iniciado":"\u23f3 Pendiente",pairsCount:n.length,matchesCount:r.length,onTestConnection:async()=>{try{const e=await(0,l.rN)();alert(e?"\u2705 Conexi\xf3n exitosa a la base de datos":"\u274c Error de conexi\xf3n")}catch(e){alert("\u274c Error al probar la conexi\xf3n: "+e.message)}},onReloadData:()=>{N(),E(e=>e+1)},onVerifyStatus:async()=>{try{alert(`\ud83d\udcca Estado del Sistema:\n\u2022 Retas: 1\n\u2022 Parejas: ${n.length}\n\u2022 Partidos: ${r.length}\n\u2022 Estado: \u2705 Todo funcionando correctamente`)}catch(e){alert("\u274c Error al verificar estado: "+e.message)}}})})]})]})},_=e=>{let{tournament:t,pairs:n,loading:r,onStartTournament:a}=e;return t.is_started?null:(0,s.jsxs)("div",{className:"start-tournament-section",children:[(0,s.jsx)("h3",{children:"\ud83d\ude80 Iniciar Reta"}),(0,s.jsxs)("div",{className:"tournament-info",children:[(0,s.jsxs)("p",{children:["Tienes ",n.length," parejas registradas"]}),(0,s.jsxs)("p",{children:["Se crear\xe1n ",n.length*(n.length-1)/2," partidos (round-robin completo - todas las parejas se enfrentan)"]}),(0,s.jsxs)("p",{children:["Estado de la reta: ",t.is_started?"Iniciada":"Pendiente"]})]}),(0,s.jsx)("button",{className:"start-button",onClick:a,disabled:r||n.length<2,children:r?"\u23f3 Iniciando...":t.is_started?"\ud83c\udfc6 Reta Ya Iniciada":n.length<2?"\u274c Necesitas al menos 2 parejas":"\ud83d\ude80 \xa1Iniciar Reta!"})]})},j=e=>{let{tournament:t,onCopyPublicLink:n,generatePublicLink:r}=e;return t.is_started?(0,s.jsxs)("div",{className:"public-link-section",children:[(0,s.jsx)("h3",{children:"\ud83d\udd17 Enlace P\xfablico"}),(0,s.jsxs)("div",{className:"public-link-info",children:[(0,s.jsx)("p",{children:"Comparte este enlace con los participantes para que vean los resultados en tiempo real"}),(0,s.jsx)("p",{children:"Los participantes solo podr\xe1n ver los resultados, no podr\xe1n editar nada"})]}),(0,s.jsxs)("div",{className:"public-link-actions",children:[(0,s.jsx)("button",{className:"public-link-button",onClick:()=>n(t.id),children:"\ud83d\udccb Copiar Enlace"}),(0,s.jsx)("a",{href:r(t.id),target:"_blank",rel:"noopener noreferrer",className:"public-link-preview",children:"\ud83d\udc41\ufe0f Ver Vista P\xfablica"})]})]}):null},S=e=>{let{pairs:t,pairStats:n}=e;return 0===t.length?null:(0,s.jsxs)("div",{className:"compact-pairs-manager",children:[(0,s.jsx)("div",{className:"compact-header",children:(0,s.jsx)("div",{className:"compact-header-content",children:(0,s.jsxs)("div",{className:"compact-title",children:[(0,s.jsx)("span",{className:"compact-icon",children:"\ud83d\udc65"}),(0,s.jsxs)("h3",{children:["Parejas Registradas (",t.length,")"]})]})})}),(0,s.jsx)("div",{className:"compact-pairs-grid",children:t.map((e,t)=>{var r,a,i,o,l;return(0,s.jsxs)("div",{className:"compact-pair-card",style:{animationDelay:.1*t+"s"},children:[(0,s.jsxs)("div",{className:"compact-pair-number",children:["#",t+1]}),(0,s.jsxs)("div",{className:"compact-pair-info",children:[(0,s.jsxs)("div",{className:"compact-pair-names",children:[(null===(r=e.player1)||void 0===r?void 0:r.name)||"Jugador 1"," /"," ",(null===(a=e.player2)||void 0===a?void 0:a.name)||"Jugador 2"]}),(0,s.jsxs)("div",{className:"compact-stats",children:[(0,s.jsxs)("div",{className:"compact-stat",children:[(0,s.jsx)("span",{className:"compact-stat-label",children:"SETS"}),(0,s.jsx)("span",{className:"compact-stat-value",children:(null===(i=n.get(e.id))||void 0===i?void 0:i.sets)||0})]}),(0,s.jsxs)("div",{className:"compact-stat",children:[(0,s.jsx)("span",{className:"compact-stat-label",children:"PARTIDOS"}),(0,s.jsx)("span",{className:"compact-stat-value",children:(null===(o=n.get(e.id))||void 0===o?void 0:o.matches)||0})]}),(0,s.jsxs)("div",{className:"compact-stat",children:[(0,s.jsx)("span",{className:"compact-stat-label",children:"PUNTOS"}),(0,s.jsx)("span",{className:"compact-stat-value",children:(null===(l=n.get(e.id))||void 0===l?void 0:l.points)||0})]})]})]}),(0,s.jsxs)("div",{className:"compact-particles",children:[(0,s.jsx)("div",{className:"compact-particle"}),(0,s.jsx)("div",{className:"compact-particle"}),(0,s.jsx)("div",{className:"compact-particle"})]})]},e.id)})})]})};class k{static calculateMatchStatistics(e,t){console.log("\ud83c\udfaf === C\xc1LCULO DE ESTAD\xcdSTICAS DEL PARTIDO ==="),console.log("\ud83c\udfaf Partido ID:",e.id),console.log("\ud83c\udfaf Total de juegos:",t.length);let n=0,r=0,a=0,s=0,i=0,o=0;t.forEach((e,t)=>{console.log(`\ud83d\udcca === JUEGO ${t+1} ===`),console.log("\ud83d\udcca Datos del juego:",{pair1_games:e.pair1_games,pair2_games:e.pair2_games,is_tie_break:e.is_tie_break,tie_break_pair1:e.tie_break_pair1_points,tie_break_pair2:e.tie_break_pair2_points}),e.is_tie_break?(console.log("\ud83d\udcca Es un tie-break"),e.tie_break_pair1_points>e.tie_break_pair2_points?(n++,console.log(`\u2705 Pareja 1 gana tie-break: ${e.tie_break_pair1_points}-${e.tie_break_pair2_points}`)):e.tie_break_pair2_points>e.tie_break_pair1_points?(r++,console.log(`\u2705 Pareja 2 gana tie-break: ${e.tie_break_pair1_points}-${e.tie_break_pair2_points}`)):console.log(`\ud83e\udd1d Empate en tie-break: ${e.tie_break_pair1_points}-${e.tie_break_pair2_points}`),a+=e.tie_break_pair1_points||0,s+=e.tie_break_pair2_points||0):(console.log("\ud83d\udcca Es un juego normal"),console.log(`\ud83d\udcca Puntos Pareja 1: ${e.pair1_games}, Puntos Pareja 2: ${e.pair2_games}`),e.pair1_games>e.pair2_games?(n++,console.log(`\u2705 Pareja 1 gana juego: ${e.pair1_games}-${e.pair2_games}`)):e.pair2_games>e.pair1_games?(r++,console.log(`\u2705 Pareja 2 gana juego: ${e.pair1_games}-${e.pair2_games}`)):console.log(`\ud83e\udd1d Empate en juego: ${e.pair1_games}-${e.pair2_games}`),a+=e.pair1_games,s+=e.pair2_games),e.is_tie_break||(e.pair1_games>=6&&(i++,console.log(`\ud83c\udfc6 Pareja 1 gana 1 SET en juego ${t+1} con ${e.pair1_games} puntos`)),e.pair2_games>=6&&(o++,console.log(`\ud83c\udfc6 Pareja 2 gana 1 SET en juego ${t+1} con ${e.pair2_games} puntos`))),console.log(`\ud83d\udcca Despu\xe9s del juego ${t+1}: Pareja 1 = ${n} juegos, Pareja 2 = ${r} juegos`)}),console.log("\ud83d\udd0d === RESULTADO FINAL DEL PARTIDO ==="),console.log(`\ud83d\udd0d Juegos: Pareja 1 = ${n}, Pareja 2 = ${r}`),console.log(`\ud83d\udd0d Sets: Pareja 1 = ${i}, Pareja 2 = ${o}`),console.log(`\ud83d\udd0d Puntos totales: Pareja 1 = ${a}, Pareja 2 = ${s}`);const l=a===s;return console.log(`\ud83d\udd0d Es empate: ${l} (${a}-${s} puntos totales)`),console.log("\ud83c\udfaf === FIN C\xc1LCULO DEL PARTIDO ==="),{pair1GamesWon:n,pair2GamesWon:r,pair1SetsWon:i,pair2SetsWon:o,pair1TotalPoints:a,pair2TotalPoints:s,isTie:l}}static async recalculateMatchStatistics(e,t,n){try{console.log("\ud83d\udd04 === REC\xc1LCULO DE ESTAD\xcdSTICAS DEL PARTIDO ==="),console.log("\ud83d\udd04 SOLO rec\xe1lculo - NO acumula estad\xedsticas");const o=this.calculateMatchStatistics(e,t),l=n.find(t=>t.id===e.pair1_id),c=n.find(t=>t.id===e.pair2_id);let u,d;if(console.log("\ud83d\udcca Estad\xedsticas recalculadas del partido:",{pair1GamesWon:o.pair1GamesWon,pair2GamesWon:o.pair2GamesWon,pair1SetsWon:o.pair1SetsWon,pair2SetsWon:o.pair2SetsWon,isTie:o.isTie}),console.log("\u2705 Solo rec\xe1lculo completado - NO se actualizaron estad\xedsticas"),console.log("\ud83c\udfc6 === DETERMINACI\xd3N DEL GANADOR DEL PARTIDO ==="),console.log(`\ud83c\udfc6 Sets: Pareja 1 = ${o.pair1SetsWon}, Pareja 2 = ${o.pair2SetsWon}`),console.log(`\ud83c\udfc6 Juegos: Pareja 1 = ${o.pair1GamesWon}, Pareja 2 = ${o.pair2GamesWon}`),console.log(`\ud83c\udfc6 Es empate: ${o.isTie}`),o.isTie?(u=void 0,console.log("\ud83e\udd1d Partido termin\xf3 en EMPATE por puntos totales")):o.pair1TotalPoints>o.pair2TotalPoints?(u=e.pair1_id,console.log("\ud83c\udfc6 Pareja 1 gana por puntos totales")):o.pair2TotalPoints>o.pair1TotalPoints?(u=e.pair2_id,console.log("\ud83c\udfc6 Pareja 2 gana por puntos totales")):(u=void 0,console.log("\u274c Caso inesperado en determinaci\xf3n del ganador")),o.isTie)d=`\u2705 Partido recalculado.\n\n\ud83e\udd1d EMPATE (${o.pair1TotalPoints}-${o.pair2TotalPoints} puntos totales)`;else if(u){var r,a,s,i;d=`\u2705 Partido recalculado.\n\n\ud83c\udfc6 Ganador: ${u===e.pair1_id?`${null===l||void 0===l||null===(r=l.player1)||void 0===r?void 0:r.name} / ${null===l||void 0===l||null===(a=l.player2)||void 0===a?void 0:a.name}`:`${null===c||void 0===c||null===(s=c.player1)||void 0===s?void 0:s.name} / ${null===c||void 0===c||null===(i=c.player2)||void 0===i?void 0:i.name}`} (${o.pair1TotalPoints}-${o.pair2TotalPoints} puntos totales)`}else d=`\u2705 Partido recalculado.\n\n\ud83e\udd1d Empate (${o.pair1TotalPoints}-${o.pair2TotalPoints} puntos totales)`;return console.log("\ud83d\udd04 === FIN REC\xc1LCULO DEL PARTIDO ==="),{success:!0,message:d,pair1Stats:{gamesWon:o.pair1GamesWon,setsWon:o.pair1SetsWon,points:o.pair1TotalPoints},pair2Stats:{gamesWon:o.pair2GamesWon,setsWon:o.pair2SetsWon,points:o.pair2TotalPoints},winnerId:u,isTie:o.isTie}}catch(o){return console.error("\u274c Error en recalculateMatchStatistics:",o),{success:!1,message:"Error al recalcular estad\xedsticas del partido",pair1Stats:{gamesWon:0,setsWon:0,points:0},pair2Stats:{gamesWon:0,setsWon:0,points:0},isTie:!1}}}static async accumulateMatchStatistics(e,t,n){try{console.log("\ud83c\udfc6 === ACUMULACI\xd3N DE ESTAD\xcdSTICAS DEL PARTIDO ==="),console.log("\ud83c\udfc6 ACUMULANDO estad\xedsticas al finalizar partido");const d=this.calculateMatchStatistics(e,t),h=n.find(t=>t.id===e.pair1_id),p=n.find(t=>t.id===e.pair2_id);var r,a,s,i;if(console.log("\ud83d\udcca Estad\xedsticas del partido a acumular:",{pair1GamesWon:d.pair1GamesWon,pair2GamesWon:d.pair2GamesWon,pair1SetsWon:d.pair1SetsWon,pair2SetsWon:d.pair2SetsWon,isTie:d.isTie}),h)console.log(`\ud83d\udcca Calculando estad\xedsticas Pareja 1: ${(null===(r=h.player1)||void 0===r?void 0:r.name)||h.player1_name} / ${(null===(a=h.player2)||void 0===a?void 0:a.name)||h.player2_name}`),console.log(`\ud83d\udcca Estad\xedsticas del partido: ${d.pair1GamesWon} juegos, ${d.pair1SetsWon} sets, ${d.pair1TotalPoints} puntos`),console.log(`\u2705 Pareja 1: ${d.pair1GamesWon} juegos, ${d.pair1SetsWon} sets, ${d.pair1TotalPoints} puntos`);if(p)console.log(`\ud83d\udcca Calculando estad\xedsticas Pareja 2: ${(null===(s=p.player1)||void 0===s?void 0:s.name)||p.player1_name} / ${(null===(i=p.player2)||void 0===i?void 0:i.name)||p.player2_name}`),console.log(`\ud83d\udcca Estad\xedsticas del partido: ${d.pair2GamesWon} juegos, ${d.pair2SetsWon} sets, ${d.pair2TotalPoints} puntos`),console.log(`\u2705 Pareja 2: ${d.pair2GamesWon} juegos, ${d.pair2SetsWon} sets, ${d.pair2TotalPoints} puntos`);let f,m;if(console.log("\ud83c\udfc6 === DETERMINACI\xd3N DEL GANADOR ==="),console.log(`\ud83c\udfc6 Sets: Pareja 1 = ${d.pair1SetsWon}, Pareja 2 = ${d.pair2SetsWon}`),console.log(`\ud83c\udfc6 Juegos: Pareja 1 = ${d.pair1GamesWon}, Pareja 2 = ${d.pair2GamesWon}`),console.log(`\ud83c\udfc6 Es empate: ${d.isTie}`),d.isTie?(f=void 0,console.log("\ud83e\udd1d Partido termin\xf3 en EMPATE por puntos totales")):d.pair1TotalPoints>d.pair2TotalPoints?(f=e.pair1_id,console.log("\ud83c\udfc6 Pareja 1 gana por puntos totales")):d.pair2TotalPoints>d.pair1TotalPoints?(f=e.pair2_id,console.log("\ud83c\udfc6 Pareja 2 gana por puntos totales")):(f=void 0,console.log("\u274c Caso inesperado en determinaci\xf3n del ganador")),d.isTie)m=`\u2705 Partido finalizado.\n\n\ud83e\udd1d EMPATE (${d.pair1TotalPoints}-${d.pair2TotalPoints} puntos totales)`;else if(f){var o,l,c,u;m=`\u2705 Partido finalizado.\n\n\ud83c\udfc6 Ganador: ${f===e.pair1_id?`${null===h||void 0===h||null===(o=h.player1)||void 0===o?void 0:o.name} / ${null===h||void 0===h||null===(l=h.player2)||void 0===l?void 0:l.name}`:`${null===p||void 0===p||null===(c=p.player1)||void 0===c?void 0:c.name} / ${null===p||void 0===p||null===(u=p.player2)||void 0===u?void 0:u.name}`} (${d.pair1TotalPoints}-${d.pair2TotalPoints} puntos totales)`}else m=`\u2705 Partido finalizado.\n\n\ud83e\udd1d Empate (${d.pair1TotalPoints}-${d.pair2TotalPoints} puntos totales)`;return console.log("\ud83c\udfc6 === FIN ACUMULACI\xd3N DEL PARTIDO ==="),{success:!0,message:m,pair1Stats:{gamesWon:d.pair1GamesWon,setsWon:d.pair1SetsWon,points:d.pair1TotalPoints},pair2Stats:{gamesWon:d.pair2GamesWon,setsWon:d.pair2SetsWon,points:d.pair2TotalPoints},winnerId:f,isTie:d.isTie}}catch(d){return console.error("\u274c Error en accumulateMatchStatistics:",d),{success:!1,message:"Error al acumular estad\xedsticas del partido",pair1Stats:{gamesWon:0,setsWon:0,points:0},pair2Stats:{gamesWon:0,setsWon:0,points:0},isTie:!1}}}static async recalculateAllStatistics(e){try{console.log("\ud83d\udd04 === INICIO REC\xc1LCULO COMPLETO ===");const r=await(0,p.getPairs)(e),a=await(0,p.getMatches)(e);console.log("\ud83d\udd04 Reseteando estad\xedsticas de todas las parejas...");for(const e of r)console.log(`\ud83d\udd04 Reseteando pareja: ${e.player1_name}/${e.player2_name}`);const s=new Map;for(const e of r)s.set(e.id,{gamesWon:0,setsWon:0,points:0,matchesPlayed:0});let i=0;for(const e of a)if("finished"===e.status){console.log(`\ud83d\udd04 Procesando partido finalizado: ${e.id}`);const t=await(0,p.getGames)(e.id);if(t.length>0){const n=this.calculateMatchStatistics(e,t),r=s.get(e.pair1_id);r.gamesWon+=n.pair1GamesWon,r.setsWon+=n.pair1SetsWon,r.points+=n.pair1TotalPoints,r.matchesPlayed+=1;const a=s.get(e.pair2_id);a.gamesWon+=n.pair2GamesWon,a.setsWon+=n.pair2SetsWon,a.points+=n.pair2TotalPoints,a.matchesPlayed+=1,i++}}console.log("\ud83d\udd04 Estad\xedsticas calculadas:");for(const e of r){const r=s.get(e.id);var t,n;if(r)console.log(`\ud83d\udcca Pareja ${(null===(t=e.player1)||void 0===t?void 0:t.name)||e.player1_name}/${(null===(n=e.player2)||void 0===n?void 0:n.name)||e.player2_name}: ${r.points} puntos, ${r.setsWon} sets, ${r.gamesWon} juegos, ${r.matchesPlayed} partidos`)}return console.log(`\u2705 Estad\xedsticas recalculadas para ${i} partidos`),console.log("\ud83d\udd04 === FIN REC\xc1LCULO COMPLETO ==="),{success:!0,message:`\u2705 Estad\xedsticas recalculadas exitosamente para ${i} partidos`}}catch(r){return console.error("\u274c Error en recalculateAllStatistics:",r),{success:!1,message:"Error al recalcular estad\xedsticas de la reta"}}}static calculateRanking(e){return[...e].sort((e,t)=>{const n=`${e.player1_name}/${e.player2_name}`,r=`${t.player1_name}/${t.player2_name}`;return n.localeCompare(r)})}}const N=e=>{var t,n,a;let{match:i,pairs:o,isSelected:l,onSelect:c,onCorrectScore:u,forceRefresh:d=0,userId:h}=e;const[f,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),[w,x]=(0,r.useState)([]),[_,j]=(0,r.useState)(!1),[S,N]=(0,r.useState)(null),[E,P]=(0,r.useState)(!1),[T,C]=(0,r.useState)(""),[R,$]=(0,r.useState)(""),O=(0,r.useRef)(!1),I=(0,r.useCallback)(async()=>{if(O.current)console.log("\u23f3 Actualizaci\xf3n ya en progreso, ignorando...");else try{O.current=!0,m(i);const e=o.find(e=>e.id===i.pair1_id),t=o.find(e=>e.id===i.pair2_id);v(e||null),b(t||null);const n=await(0,p.getGames)(i.id);x(n),u&&u(i)}catch(e){console.error("\u274c Error recargando datos:",e)}finally{O.current=!1}},[i,o,u]),A=e=>{var t,n;return e?`${(null===(t=e.player1)||void 0===t?void 0:t.name)||e.player1_name||"Jugador 1"} / ${(null===(n=e.player2)||void 0===n?void 0:n.name)||e.player2_name||"Jugador 2"}`:"Pareja desconocida"},D=()=>{const e=(()=>{if(0===w.length)return null;let e=0,t=0;return w.forEach(n=>{n.pair1_games>n.pair2_games?e++:n.pair2_games>n.pair1_games&&t++}),e>t?{winner:"pair1",pair1Wins:e,pair2Wins:t}:t>e?{winner:"pair2",pair1Wins:e,pair2Wins:t}:{winner:"tie",pair1Wins:e,pair2Wins:t}})();return e?"pair1"===e.winner?{text:`Ganador: ${A(g)}`,type:"winner",icon:"\ud83c\udfc6"}:"pair2"===e.winner?{text:`Ganador: ${A(y)}`,type:"winner",icon:"\ud83c\udfc6"}:{text:"Empate",type:"tie",icon:"\ud83e\udd1d"}:null},L=async()=>{if(!f)return;const e=parseInt(T),t=parseInt(R),n=h||"";if(isNaN(e)||isNaN(t))N("Ingresa puntuaciones v\xe1lidas");else if(n)try{j(!0),N(null);const r=w.length+1,a=await(0,p.createGame)(f.id,r,n);await(0,p.updateGame)(a.id,{pair1_games:e,pair2_games:t,is_tie_break:!1,tie_break_pair1_points:0,tie_break_pair2_points:0}),C(""),$(""),await I(),console.log("\u2705 Juego agregado y UI actualizada")}catch(r){console.error("\u274c Error agregando juego:",r),N("Error al agregar juego")}finally{j(!1)}else N("No se pudo identificar al usuario para guardar el juego")},U=async e=>{if(f)try{j(!0),N(null),await(0,p.deleteGame)(e),await I(),console.log("\u2705 Juego eliminado")}catch(t){console.error("\u274c Error eliminando juego:",t),N("Error al eliminar juego")}finally{j(!1)}},z=async()=>{if(f)try{j(!0),N(null);const e=await k.accumulateMatchStatistics(f,w,o);if(e.success){const e=await(0,p.getGames)(f.id);let t=0,n=0;e.forEach(e=>{e.pair1_games>=6&&t++,e.pair2_games>=6&&n++}),await(0,p.updateMatch)(f.id,{status:"finished",pair1_score:t,pair2_score:n}),console.log(`\ud83c\udfc6 Partido finalizado: ${t} - ${n}`),P(!1),await I(),console.log("\u2705 Partido finalizado, juegos:",e.length)}else N("Error: "+e.message)}catch(e){console.error("\u274c Error finalizando partido:",e),N("Error al finalizar partido")}finally{j(!1)}};return(0,r.useEffect)(()=>{m(i);const e=o.find(e=>e.id===i.pair1_id),t=o.find(e=>e.id===i.pair2_id);v(e||null),b(t||null);let n=!0;return(async()=>{try{j(!0);const e=await(0,p.getGames)(i.id);if(!n)return;x(e),console.log("\u2705 Juegos cargados para partido:",i.id)}catch(e){if(!n)return;console.error("\u274c Error cargando juegos:",e),N("Error cargando juegos")}finally{n&&j(!1)}})(),()=>{n=!1}},[i.id,i,o]),(0,r.useEffect)(()=>{if(i&&(!f||i.id!==f.id||i.status!==f.status||i.pair1_score!==f.pair1_score||i.pair2_score!==f.pair2_score)){if(m(i),"finished"===i.status&&E&&P(!1),i.pair1_id&&i.pair2_id){const e=o.find(e=>e.id===i.pair1_id),t=o.find(e=>e.id===i.pair2_id);v(e||null),b(t||null)}i.id!==(null===f||void 0===f?void 0:f.id)||i.status===f.status&&i.pair1_score===f.pair1_score&&i.pair2_score===f.pair2_score||(0,p.getGames)(i.id).then(e=>{x(e)}).catch(e=>{console.error("\u274c Error recargando juegos:",e)})}},[i,o,f,E]),_?(0,s.jsx)("div",{className:"modern-match-card",children:(0,s.jsxs)("div",{className:"modern-loading",children:[(0,s.jsx)("div",{className:"modern-loading-spinner"}),(0,s.jsx)("p",{children:"Cargando..."})]})}):f?(0,s.jsxs)("div",{className:"modern-match-card "+(l?"selected":""),onClick:()=>c(f.id),children:[(0,s.jsxs)("div",{className:"modern-match-header",children:[(0,s.jsxs)("h5",{className:"modern-match-title",children:[A(g)," vs ",A(y)]}),(0,s.jsx)("div",{className:"modern-match-status "+("finished"===f.status?"finished":"progress"),children:"finished"===f.status?"FINALIZADO":"En progreso"})]}),(0,s.jsxs)("div",{className:"modern-match-badges",children:[(0,s.jsxs)("span",{className:"modern-match-badge",children:[(0,s.jsx)("span",{className:"modern-badge-icon",children:"\ud83c\udfdf\ufe0f"}),"Cancha ",f.court]}),(0,s.jsxs)("span",{className:"modern-match-badge",children:[(0,s.jsx)("span",{className:"modern-badge-icon",children:"\ud83d\udd04"}),"Ronda ",f.round||1]})]}),(0,s.jsxs)("div",{className:"modern-match-pairs",children:[(0,s.jsxs)("div",{className:"modern-pair-info",children:[(0,s.jsx)("span",{className:"modern-pair-label",children:"Pareja 1:"}),(0,s.jsx)("span",{className:"modern-pair-names",children:A(g)})]}),(0,s.jsxs)("div",{className:"modern-pair-info",children:[(0,s.jsx)("span",{className:"modern-pair-label",children:"Pareja 2:"}),(0,s.jsx)("span",{className:"modern-pair-names",children:A(y)})]})]}),w.length>0&&D()&&(0,s.jsx)("div",{className:"modern-winner-label",children:(0,s.jsxs)("div",{className:`modern-winner-badge modern-winner-${null===(t=D())||void 0===t?void 0:t.type}`,children:[(0,s.jsx)("span",{className:"modern-winner-icon",children:null===(n=D())||void 0===n?void 0:n.icon}),(0,s.jsx)("span",{className:"modern-winner-text",children:null===(a=D())||void 0===a?void 0:a.text})]})}),w.length>0&&(0,s.jsxs)("div",{className:"modern-games-results",children:[(0,s.jsx)("h6",{className:"modern-games-title",children:"\ud83d\udcca Juegos:"}),(0,s.jsx)("div",{className:"modern-games-grid",children:w.map((e,t)=>(0,s.jsxs)("div",{className:"modern-game-result",children:[(0,s.jsxs)("span",{className:"modern-game-number",children:["J",t+1,":"]}),(0,s.jsxs)("span",{className:"modern-game-score",children:[e.pair1_games,"-",e.pair2_games]})]},e.id))})]}),E&&(0,s.jsx)("div",{className:"modern-match-editor",children:(0,s.jsxs)("div",{className:"modern-editor-content",children:[(0,s.jsxs)("div",{className:"modern-add-game-section",children:[(0,s.jsx)("h6",{className:"modern-add-game-title",children:"\ud83d\udcdd Registrar Resultado"}),(0,s.jsxs)("div",{className:"modern-score-inputs",children:[(0,s.jsxs)("div",{className:"modern-score-input-group",children:[(0,s.jsx)("label",{className:"modern-score-label",children:A(g)}),(0,s.jsx)("input",{type:"number",min:"0",max:"7",value:T,onChange:e=>C(e.target.value),className:"modern-score-input",onClick:e=>e.stopPropagation(),placeholder:"0"})]}),(0,s.jsx)("span",{className:"modern-score-separator",children:"vs"}),(0,s.jsxs)("div",{className:"modern-score-input-group",children:[(0,s.jsx)("label",{className:"modern-score-label",children:A(y)}),(0,s.jsx)("input",{type:"number",min:"0",max:"7",value:R,onChange:e=>$(e.target.value),className:"modern-score-input",onClick:e=>e.stopPropagation(),placeholder:"0"})]})]}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),L()},onTouchStart:e=>{e.stopPropagation()},onTouchEnd:e=>{e.stopPropagation(),e.preventDefault(),L()},className:"modern-add-game-btn",disabled:_,children:"\u2795 Agregar Juego"})]}),w.length>0&&(0,s.jsxs)("div",{className:"modern-games-list",children:[(0,s.jsx)("h6",{className:"modern-games-list-title",children:"\ud83d\uddd1\ufe0f Eliminar Juegos"}),w.map((e,t)=>(0,s.jsxs)("div",{className:"modern-game-item",children:[(0,s.jsxs)("span",{className:"modern-game-info",children:["J",t+1,": ",e.pair1_games,"-",e.pair2_games]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),t.preventDefault(),U(e.id)},onTouchStart:e=>{e.stopPropagation()},onTouchEnd:t=>{t.stopPropagation(),t.preventDefault(),U(e.id)},className:"modern-delete-game-btn",disabled:_,children:"\ud83d\uddd1\ufe0f"})]},e.id))]}),"finished"!==f.status?(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),z()},onTouchStart:e=>{e.stopPropagation()},onTouchEnd:e=>{e.stopPropagation(),e.preventDefault(),z()},className:"modern-finish-match-btn",disabled:_,children:"\ud83c\udfc6 Finalizar Partido"}):(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),(async()=>{if(f)try{j(!0),N(null),await(0,p.updateMatch)(f.id,{status:"pending"}),await I(),console.log("\u2705 Partido reabierto")}catch(e){console.error("\u274c Error reabriendo partido:",e),N("Error al reabrir partido")}finally{j(!1)}})()},className:"modern-reopen-match-btn",disabled:_,children:"\ud83d\udd04 Reabrir Partido"})]})}),S&&(0,s.jsxs)("div",{className:"modern-error",children:[(0,s.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),S]}),(0,s.jsxs)("div",{className:"modern-match-actions",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),I()},onTouchStart:e=>{e.stopPropagation()},onTouchEnd:async e=>{e.stopPropagation(),e.preventDefault(),await I()},className:"modern-match-btn modern-refresh-btn",title:"Actualizar datos",disabled:_,children:"\ud83d\udd04 Actualizar"}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),P(!E)},className:"modern-match-btn modern-edit-btn",title:"Editar marcador",children:E?"\u274c Cerrar":"\u270f\ufe0f Editar"})]})]}):null},E=r.memo(N,(e,t)=>e.match.id===t.match.id&&e.match.status===t.match.status&&e.match.pair1_score===t.match.pair1_score&&e.match.pair2_score===t.match.pair2_score&&e.forceRefresh===t.forceRefresh&&e.pairs.length===t.pairs.length&&e.pairs.every((e,n)=>{var r;return e.id===(null===(r=t.pairs[n])||void 0===r?void 0:r.id)})),P=e=>{let{tournamentId:t,onUpdate:n,enabled:a=!0}=e;const s=(0,r.useRef)([]),i=(0,r.useRef)(!1),o=(0,r.useCallback)(()=>{console.log("\ud83d\udd04 Cambio detectado en tiempo real, actualizando..."),setTimeout(()=>{n()},300)},[n]);return(0,r.useEffect)(()=>{if(t&&a){i.current&&s.current.length>0&&(console.log("\ud83d\udd0c Limpiando suscripciones anteriores..."),s.current.forEach(e=>{try{l.ND.removeChannel(e)}catch(t){console.error("Error al limpiar canal:",t)}}),s.current=[],i.current=!1);try{console.log("\ud83d\udd0c Iniciando suscripciones en tiempo real para torneo:",t);const e=l.ND.channel(`matches:${t}`).on("postgres_changes",{event:"*",schema:"public",table:"matches",filter:`tournament_id=eq.${t}`},e=>{console.log("\ud83d\udcca Cambio en matches:",e.eventType),o()}).subscribe(e=>{"SUBSCRIBED"===e?console.log("\u2705 Suscrito a cambios en matches"):"CHANNEL_ERROR"===e&&console.warn("\u26a0\ufe0f Error en suscripci\xf3n a matches, usando polling como fallback")}),n=l.ND.channel(`games:${t}`).on("postgres_changes",{event:"*",schema:"public",table:"games"},e=>{console.log("\ud83c\udfae Cambio en games:",e.eventType),o()}).subscribe(e=>{"SUBSCRIBED"===e?console.log("\u2705 Suscrito a cambios en games"):"CHANNEL_ERROR"===e&&console.warn("\u26a0\ufe0f Error en suscripci\xf3n a games, usando polling como fallback")});s.current=[e,n],i.current=!0,console.log("\u2705 Suscripciones en tiempo real activadas")}catch(e){console.error("\u274c Error configurando suscripciones en tiempo real:",e),console.log("\u2139\ufe0f Continuando con polling como m\xe9todo de actualizaci\xf3n")}return()=>{console.log("\ud83d\udd0c Desuscribiendo de canales en tiempo real"),s.current.forEach(t=>{try{l.ND.removeChannel(t)}catch(e){console.error("Error al desuscribirse:",e)}}),s.current=[],i.current=!1}}},[t,a,o]),{isSubscribed:i.current,unsubscribe:()=>{s.current.forEach(e=>{try{l.ND.removeChannel(e)}catch(t){console.error("Error al desuscribirse:",t)}}),s.current=[],i.current=!1}}},T=e=>{let{tournamentId:t,forceRefresh:n}=e;const[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(""),g=(0,r.useRef)(!1),v=(0,r.useCallback)(async()=>{if(t)if(g.current)console.log("\u23f3 Ya hay una recarga en progreso en RealTimeStandingsTable, ignorando...");else try{g.current=!0,h(!0),m("");const[e,n]=await Promise.all([(0,p.getPairs)(t),(0,p.getMatches)(t)]);console.log("\ud83d\udd0d Datos cargados:"),console.log("- Parejas:",e.length),console.log("- Partidos:",n.length),console.log("- Partidos finalizados:",n.filter(e=>"finished"===e.status).length),i(e),l(n);const r=n.map(e=>(0,p.getGames)(e.id)),a=(await Promise.all(r)).flat();u(a),console.log("- Juegos cargados:",a.length),n.forEach((e,t)=>{t<3&&console.log(`Partido ${t+1}:`,{id:e.id,status:e.status,pair1_score:e.pair1_score,pair2_score:e.pair2_score,games_count:a.filter(t=>t.match_id===e.id).length})});const s=n.filter(e=>"finished"===e.status&&!e.pair1_score&&!e.pair2_score);s.length>0&&(console.log(`\u26a0\ufe0f ENCONTRADOS ${s.length} partidos finalizados sin marcador final`),console.log("\ud83d\udca1 Usa el bot\xf3n 'Actualizar Scores' para corregir esto"))}catch(f){console.error("Error cargando datos:",f),m("Error al cargar los datos de la reta")}finally{h(!1),g.current=!1}},[t]);P({tournamentId:t,onUpdate:v,enabled:!0}),(0,r.useEffect)(()=>{if(!t)return;v();const e=setInterval(()=>{console.log("\u23f0 Polling de respaldo (60s) - Realtime deber\xeda actualizar antes"),v()},6e4);return()=>clearInterval(e)},[t]),(0,r.useEffect)(()=>{if(!t||0===n)return;const e=setTimeout(()=>{v()},500);return()=>clearTimeout(e)},[n]);const y=(0,r.useMemo)(()=>{if(!a.length)return[];if(!o.length)return a.map(e=>({...e,gamesWon:0,setsWon:0,points:0,matchesPlayed:0}));const e=new Map;return a.forEach(t=>{e.set(t.id,{gamesWon:0,setsWon:0,points:0,matchesPlayed:0})}),o.forEach(t=>{if("finished"===t.status){const n=c.filter(e=>e.match_id===t.id),r=e.get(t.pair1_id),a=e.get(t.pair2_id);if(r&&a)if(r.matchesPlayed+=1,a.matchesPlayed+=1,n.length>0){const e=((e,t)=>{let n=0,r=0,a=0,s=0,i=0,o=0;return t.forEach(e=>{e.is_tie_break?(e.tie_break_pair1_points>e.tie_break_pair2_points?n++:e.tie_break_pair2_points>e.tie_break_pair1_points&&r++,i+=e.tie_break_pair1_points||0,o+=e.tie_break_pair2_points||0):(e.pair1_games>e.pair2_games?n++:e.pair2_games>e.pair1_games&&r++,i+=e.pair1_games,o+=e.pair2_games,e.pair1_games>=6&&a++,e.pair2_games>=6&&s++)}),{pair1GamesWon:n,pair2GamesWon:r,pair1SetsWon:a,pair2SetsWon:s,pair1TotalPoints:i,pair2TotalPoints:o}})(0,n);r.gamesWon+=e.pair1GamesWon,r.setsWon+=e.pair1SetsWon,r.points+=e.pair1TotalPoints,a.gamesWon+=e.pair2GamesWon,a.setsWon+=e.pair2SetsWon,a.points+=e.pair2TotalPoints}else{const e=t.pair1_score||0,n=t.pair2_score||0;r.points+=e,a.points+=n,e>n?(r.setsWon+=1,r.gamesWon+=1):n>e&&(a.setsWon+=1,a.gamesWon+=1)}}}),a.map(t=>{const n=e.get(t.id)||{gamesWon:0,setsWon:0,points:0,matchesPlayed:0};return{...t,...n}})},[a,o,c]),b=(0,r.useMemo)(()=>[...y].sort((e,t)=>{if(t.points!==e.points)return t.points-e.points;if(t.setsWon!==e.setsWon)return t.setsWon-e.setsWon;if(t.gamesWon!==e.gamesWon)return t.gamesWon-e.gamesWon;const n=`${e.player1_name}/${e.player2_name}`,r=`${t.player1_name}/${t.player2_name}`;return n.localeCompare(r)}),[y]),w=e=>{switch(e){case 1:return"\ud83e\udd47";case 2:return"\ud83e\udd48";case 3:return"\ud83e\udd49";default:return""}};return d?(0,s.jsxs)("div",{className:"new-standings-container",children:[(0,s.jsx)("div",{className:"new-standings-header",children:(0,s.jsx)("h2",{children:"\ud83d\udcca Clasificaci\xf3n"})}),(0,s.jsxs)("div",{className:"new-loading-state",children:[(0,s.jsx)("div",{className:"new-loading-spinner"}),(0,s.jsx)("p",{children:"Cargando clasificaci\xf3n..."})]})]}):(0,s.jsxs)("div",{className:"new-standings-container",children:[(0,s.jsxs)("div",{className:"new-standings-header",children:[(0,s.jsx)("h2",{children:"\ud83d\udcca Clasificaci\xf3n"}),(0,s.jsx)("button",{onClick:async()=>{await v()},className:"new-recalculate-button",disabled:d,children:"\ud83d\udd04 Recalcular"})]}),(0,s.jsx)("div",{className:"new-standings-table-wrapper",children:(0,s.jsxs)("table",{className:"new-standings-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Pos"}),(0,s.jsx)("th",{children:"Pareja"}),(0,s.jsx)("th",{children:"Sets"}),(0,s.jsx)("th",{children:"Partidos"}),(0,s.jsx)("th",{children:"Puntos"})]})}),(0,s.jsx)("tbody",{children:b.map((e,t)=>(0,s.jsxs)("tr",{className:0===t?"new-first-place":1===t?"new-second-place":2===t?"new-third-place":"new-normal-place",children:[(0,s.jsxs)("td",{className:"new-position-cell",children:[(0,s.jsx)("span",{className:"new-position-number",children:t+1}),(0,s.jsx)("span",{className:"new-position-icon",children:w(t+1)})]}),(0,s.jsxs)("td",{className:"new-team-cell",children:[e.player1_name," / ",e.player2_name]}),(0,s.jsx)("td",{className:"new-stats-cell",children:e.setsWon}),(0,s.jsx)("td",{className:"new-stats-cell",children:e.matchesPlayed}),(0,s.jsx)("td",{className:"new-points-cell",children:e.points})]},e.id))})]})}),0===b.length&&(0,s.jsx)("div",{className:"new-empty-state",children:(0,s.jsx)("p",{children:"\ud83d\udcdd No hay parejas registradas en esta reta"})}),f&&(0,s.jsx)("div",{className:"new-error-state",children:(0,s.jsxs)("p",{children:["\u274c ",f]})})]})},C=e=>{let{pairs:t,matches:n,round:r,courts:a}=e;const i=((e,t,n)=>{const r=t.filter(e=>e.round===n),a=new Set;return r.forEach(e=>{a.add(e.pair1_id),a.add(e.pair2_id)}),e.filter(e=>!a.has(e.id))})(t,n,r);if(0===i.length)return null;const o=t.length-i.length,l=2*a;return(0,s.jsxs)("div",{className:"resting-pairs-section",children:[(0,s.jsxs)("div",{className:"resting-pairs-header",children:[(0,s.jsx)("span",{className:"resting-pairs-icon",children:"\ud83d\ude34"}),(0,s.jsxs)("span",{className:"resting-pairs-title",children:["Parejas que Descansan (",i.length,")"]})]}),(0,s.jsx)("div",{className:"resting-pairs-list",children:i.map(e=>(0,s.jsx)("div",{className:"resting-pair-card",children:(0,s.jsxs)("span",{className:"resting-pair-name",children:[e.player1_name," / ",e.player2_name]})},e.id))}),i.length>0&&(0,s.jsx)("div",{className:"resting-pairs-info",children:(0,s.jsxs)("span",{className:"resting-pairs-info-text",children:[o," parejas jugando (",a," canchas \xd7 2 parejas = ",l," m\xe1ximo)"]})})]})},R=e=>{let{tournament:t,matches:n,pairs:r,matchesByRound:a,forceRefresh:i,setForceRefresh:o,isTournamentFinished:l,winner:c,onShowWinnerScreen:u,onBackToHome:d,userId:h}=e;return t.is_started?(0,s.jsxs)("div",{className:"matches-container-simplified",children:[(0,s.jsxs)("div",{className:"matches-header-simplified",children:[(0,s.jsx)("h3",{children:"\ud83c\udfbe Partidos"}),(0,s.jsxs)("span",{className:"matches-count-simplified",children:[n.length," total"]})]}),0===n.length?(0,s.jsxs)("div",{className:"matches-error-simplified",children:[(0,s.jsx)("p",{children:"\ud83d\udcdd No hay partidos programados a\xfan"}),(0,s.jsx)("p",{children:"Inicia la reta para generar los partidos autom\xe1ticamente"})]}):Object.entries(a).map(e=>{let[a,l]=e;return(0,s.jsxs)("div",{className:"round-section-simplified",children:[(0,s.jsxs)("div",{className:"round-header-simplified",children:[(0,s.jsxs)("h4",{children:["\ud83d\udd04 Ronda ",a]}),(0,s.jsxs)("span",{children:[l.length," partidos"]})]}),(0,s.jsx)("div",{className:"matches-grid-simplified",children:l.map(e=>(0,s.jsx)(E,{match:e,pairs:r,isSelected:!1,onSelect:()=>{},onCorrectScore:async e=>{console.log("\ud83d\udd04 Actualizando tabla para partido:",e.id);try{o(e=>e+1),console.log("\u2705 ForceRefresh incrementado")}catch(t){console.error("\u274c Error en actualizaci\xf3n:",t)}},forceRefresh:i,userId:h},e.id))}),(0,s.jsx)(C,{pairs:r,matches:n,round:parseInt(a),courts:t.courts})]},a)}),(0,s.jsx)(T,{tournamentId:t.id,forceRefresh:i}),(l||t.is_finished)&&c&&(0,s.jsx)("div",{className:"winner-button-container",children:(0,s.jsx)("button",{className:"show-winner-button",onClick:u,children:"\ud83c\udfc6 Ver Ganadores de la Reta"})}),(0,s.jsx)("div",{className:"back-home-button-container",children:(0,s.jsx)("button",{className:"back-home-button",onClick:d,children:"\ud83c\udfe0 Volver al Inicio"})})]}):null},$=e=>{let{selectedTournament:t,pairs:n,matches:r,pairStats:a,matchesByRound:i,loading:o,showPlayerManager:l,setShowPlayerManager:c,showPairManager:u,setShowPairManager:d,showTournamentStatus:h,setShowTournamentStatus:p,showDebugInfo:f,setShowDebugInfo:m,selectedPlayers:g,setSelectedPlayers:v,setError:y,addPair:b,updatePairPlayers:w,deletePair:k,userId:N,onReset:E,loadTournamentData:P,setForceRefresh:T,forceRefresh:C,onStartTournament:$,onCopyPublicLink:O,generatePublicLink:I,isTournamentFinished:A,winner:D,tournamentWinner:L,onShowWinnerScreen:U,onBackToHome:z}=e;return(0,s.jsxs)("div",{className:"tournament-details",children:[(0,s.jsx)(x,{selectedTournament:t,pairs:n,matches:r,showPlayerManager:l,setShowPlayerManager:c,showPairManager:u,setShowPairManager:d,showTournamentStatus:h,setShowTournamentStatus:p,showDebugInfo:f,setShowDebugInfo:m,selectedPlayers:g,setSelectedPlayers:v,setError:y,addPair:b,updatePairPlayers:w,deletePair:k,loading:o,onReset:E,loadTournamentData:P,setForceRefresh:T}),(0,s.jsx)(_,{tournament:t,pairs:n,loading:o,onStartTournament:$}),(0,s.jsx)(j,{tournament:t,onCopyPublicLink:O,generatePublicLink:I}),(0,s.jsx)(S,{pairs:n,pairStats:a}),(0,s.jsx)(R,{tournament:t,matches:r,pairs:n,matchesByRound:i,forceRefresh:C,setForceRefresh:T,isTournamentFinished:A,winner:D,onShowWinnerScreen:U,onBackToHome:z,userId:N})]})},O=e=>{let{selectedTournament:t,onTournamentSelect:n,loading:r,userId:a,pairs:i,matches:o,pairStats:l,matchesByRound:c,showPlayerManager:u,setShowPlayerManager:d,showPairManager:h,setShowPairManager:p,showTournamentStatus:f,setShowTournamentStatus:v,showDebugInfo:y,setShowDebugInfo:b,selectedPlayers:w,setSelectedPlayers:x,setError:_,addPair:j,updatePairPlayers:S,deletePair:k,onReset:N,loadTournamentData:E,setForceRefresh:P,forceRefresh:T,onStartTournament:C,onCopyPublicLink:R,generatePublicLink:O,isTournamentFinished:I,winner:A,tournamentWinner:D,onShowWinnerScreen:L,onBackToHome:U}=e;return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"header-section",children:[(0,s.jsx)("h1",{children:"Gestor de Retas de P\xe1del"}),(0,s.jsxs)("div",{className:"header-instructions",children:[(0,s.jsxs)("div",{className:"instruction-step",children:[(0,s.jsx)("span",{className:"instruction-number",children:"1"}),(0,s.jsx)("span",{className:"instruction-icon",children:"\ud83d\udcdd"}),(0,s.jsx)("span",{children:"Crea tu primera reta"})]}),(0,s.jsxs)("div",{className:"instruction-step",children:[(0,s.jsx)("span",{className:"instruction-number",children:"2"}),(0,s.jsx)("span",{className:"instruction-icon",children:"\ud83d\udc65"}),(0,s.jsx)("span",{children:"A\xf1ade jugadores participantes"})]}),(0,s.jsxs)("div",{className:"instruction-step",children:[(0,s.jsx)("span",{className:"instruction-number",children:"3"}),(0,s.jsx)("span",{className:"instruction-icon",children:"\ud83e\udd1d"}),(0,s.jsx)("span",{children:"Forma parejas"})]}),(0,s.jsxs)("div",{className:"instruction-step",children:[(0,s.jsx)("span",{className:"instruction-number",children:"4"}),(0,s.jsx)("span",{className:"instruction-icon",children:"\u26a1"}),(0,s.jsx)("span",{children:"Inicia la reta y genera partidos"})]})]})]}),r&&(0,s.jsx)("div",{className:"loading",children:(0,s.jsx)("p",{children:"\u23f3 Cargando..."})}),(0,s.jsxs)("div",{className:"main-layout",children:[(0,s.jsx)(g,{isVisible:!t}),(0,s.jsx)("div",{className:"reta-management-section",children:(0,s.jsx)(m,{selectedTournament:t||void 0,onTournamentSelect:n})}),(0,s.jsx)("div",{className:"reta-content",children:t?(0,s.jsx)($,{selectedTournament:t,pairs:i,matches:o,pairStats:l,matchesByRound:c,loading:r,showPlayerManager:u,setShowPlayerManager:d,showPairManager:h,setShowPairManager:p,showTournamentStatus:f,setShowTournamentStatus:v,showDebugInfo:y,setShowDebugInfo:b,selectedPlayers:w,setSelectedPlayers:x,setError:_,addPair:j,updatePairPlayers:S,deletePair:k,userId:a,onReset:N,loadTournamentData:E,setForceRefresh:P,forceRefresh:T,onStartTournament:C,onCopyPublicLink:R,generatePublicLink:O,isTournamentFinished:I,winner:A,tournamentWinner:D,onShowWinnerScreen:L,onBackToHome:U}):(0,s.jsxs)("div",{className:"no-tournament-selected",children:[(0,s.jsx)("h2",{children:"Selecciona una Reta"}),(0,s.jsx)("p",{children:"Elige una reta del panel para comenzar a gestionar partidos y resultados."})]})})]})]})},I=e=>{var t,n;let{isVisible:r,winner:a,tournamentWinner:i,onBackToManager:o}=e;return r&&a?(0,s.jsx)("div",{className:"winner-page",children:(0,s.jsx)("div",{className:"elegant-winner-screen",children:(0,s.jsxs)("div",{className:"elegant-winner-section",children:[(0,s.jsx)("div",{className:"elegant-winner-header",children:(0,s.jsx)("h1",{className:"elegant-winner-title",children:"\ud83c\udfc6 GANADORES DE LA RETA \ud83c\udfc6"})}),(0,s.jsxs)("div",{className:"elegant-winner-content",children:[(0,s.jsxs)("div",{className:"elegant-winner-names",children:[null===(t=a.player1)||void 0===t?void 0:t.name," / ",null===(n=a.player2)||void 0===n?void 0:n.name]}),(0,s.jsx)("div",{className:"elegant-winner-subtitle",children:"\xa1Son los campeones de la reta!"}),(0,s.jsxs)("div",{className:"elegant-winner-stats",children:[(0,s.jsxs)("div",{className:"elegant-winner-stat",children:[(0,s.jsx)("span",{className:"elegant-winner-stat-number",children:i?i.totalSets:0}),(0,s.jsx)("span",{className:"elegant-winner-stat-label",children:"Sets Ganados"})]}),(0,s.jsxs)("div",{className:"elegant-winner-stat",children:[(0,s.jsx)("span",{className:"elegant-winner-stat-number",children:i?i.matchesPlayed:0}),(0,s.jsx)("span",{className:"elegant-winner-stat-label",children:"Partidos Jugados"})]}),(0,s.jsxs)("div",{className:"elegant-winner-stat",children:[(0,s.jsx)("span",{className:"elegant-winner-stat-number",children:i?i.totalPoints:0}),(0,s.jsx)("span",{className:"elegant-winner-stat-label",children:"Puntos Totales"})]}),i&&(0,s.jsxs)("div",{className:"elegant-winner-stat",children:[(0,s.jsxs)("span",{className:"elegant-winner-stat-number",children:[i.winPercentage.toFixed(1),"%"]}),(0,s.jsx)("span",{className:"elegant-winner-stat-label",children:"Porcentaje de Victoria"})]})]}),(0,s.jsx)("div",{className:"elegant-winner-actions",children:(0,s.jsx)("button",{className:"elegant-winner-back-btn",onClick:o,children:"\ud83c\udfe0 Volver al Gestor"})})]})]})})}):null};class A{static async calculateTournamentWinner(e,t){try{console.log("\ud83c\udfc6 === CALCULANDO GANADOR DE LA RETA ===");const i=[];for(const e of t)if("finished"===e.status){const t=await(0,p.getGames)(e.id);i.push(...t)}console.log(`\ud83d\udcca Total de juegos encontrados: ${i.length}`);const o=new Map;for(const t of e)o.set(t.id,{totalPoints:0,totalSets:0,totalGames:0,matchesPlayed:0,wins:0});for(const e of t)if("finished"===e.status){const t=i.filter(t=>t.match_id===e.id);if(t.length>0){const n=this.calculateMatchStats(t),r=o.get(e.pair1_id);r.totalPoints+=n.pair1Points,r.totalSets+=n.pair1Sets,r.totalGames+=n.pair1Games,r.matchesPlayed+=1,n.pair1Points>n.pair2Points&&(r.wins+=1);const a=o.get(e.pair2_id);a.totalPoints+=n.pair2Points,a.totalSets+=n.pair2Sets,a.totalGames+=n.pair2Games,a.matchesPlayed+=1,n.pair2Points>n.pair1Points&&(a.wins+=1),console.log(`\ud83d\udcca Partido ${e.id}:`),console.log(`   Pareja 1 (${e.pair1_id}): ${n.pair1Points} pts, ${n.pair1Sets} sets, ${n.pair1Games} juegos`),console.log(`   Pareja 2 (${e.pair2_id}): ${n.pair2Points} pts, ${n.pair2Sets} sets, ${n.pair2Games} juegos`)}}const l=[];for(const t of e){const e=o.get(t.id);if(e&&e.matchesPlayed>0){var n,r;const a=e.wins/e.matchesPlayed*100;l.push({pair:t,totalPoints:e.totalPoints,totalSets:e.totalSets,totalGames:e.totalGames,matchesPlayed:e.matchesPlayed,winPercentage:a}),console.log(`\ud83c\udfc6 Candidato: ${null===(n=t.player1)||void 0===n?void 0:n.name} / ${null===(r=t.player2)||void 0===r?void 0:r.name}`),console.log(`   Puntos totales: ${e.totalPoints}`),console.log(`   Sets totales: ${e.totalSets}`),console.log(`   Juegos totales: ${e.totalGames}`),console.log(`   Partidos jugados: ${e.matchesPlayed}`),console.log(`   Porcentaje de victorias: ${a.toFixed(1)}%`)}}l.sort((e,t)=>e.totalPoints!==t.totalPoints?t.totalPoints-e.totalPoints:e.totalSets!==t.totalSets?t.totalSets-e.totalSets:e.totalGames!==t.totalGames?t.totalGames-e.totalGames:e.winPercentage!==t.winPercentage?t.winPercentage-e.winPercentage:e.matchesPlayed-t.matchesPlayed);const c=l.length>0?l[0]:null;var a,s;if(c)console.log(`\ud83c\udfc6 GANADOR DE LA RETA: ${null===(a=c.pair.player1)||void 0===a?void 0:a.name} / ${null===(s=c.pair.player2)||void 0===s?void 0:s.name}`),console.log(`   Puntos totales: ${c.totalPoints}`),console.log(`   Sets totales: ${c.totalSets}`),console.log(`   Juegos totales: ${c.totalGames}`),console.log(`   Partidos jugados: ${c.matchesPlayed}`),console.log(`   Porcentaje de victorias: ${c.winPercentage.toFixed(1)}%`);else console.log("\u274c No se encontr\xf3 ganador");return console.log("\ud83c\udfc6 === FIN CALCULACI\xd3N GANADOR ==="),c}catch(i){return console.error("\u274c Error al calcular ganador de la reta:",i),null}}static calculateMatchStats(e){let t=0,n=0,r=0,a=0,s=0,i=0;for(const o of e){const e=o.pair1_games,l=o.pair2_games;t+=e,n+=l,e>l?(s+=1,e>=6&&(r+=1)):l>e&&(i+=1,l>=6&&(a+=1))}return{pair1Points:t,pair2Points:n,pair1Sets:r,pair2Sets:a,pair1Games:s,pair2Games:i}}}const D=e=>{var t,n;let{tournamentId:a}=e;const[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(!0),[m,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),[x,_]=(0,r.useState)(new Date),j=(0,r.useCallback)(async()=>{try{g("");const[t,n,r]=await Promise.all([(0,p.getMatches)(a),(0,p.getPairs)(a),(0,p.getTournamentGames)(a)]);o(t),c(n),d(r||[]),_(new Date),console.log("\ud83d\udd04 Vista p\xfablica actualizada:",(new Date).toLocaleTimeString());const s=t.filter(e=>"finished"===e.status),i=t.length;if(s.length===i&&i>0)try{const e=await A.calculateTournamentWinner(n,t);y(e),w(!0)}catch(e){console.error("Error calculating winner:",e)}}catch(e){g("Error al cargar los datos de la reta"),console.error("Error loading tournament data:",e)}finally{f(!1)}},[a]);P({tournamentId:a,onUpdate:j,enabled:!0}),(0,r.useEffect)(()=>{f(!0),j();const e=setInterval(()=>{console.log("\u23f0 Polling de respaldo (60s) - Realtime deber\xeda actualizar antes"),j()},6e4);return()=>clearInterval(e)},[a,j]);const S=e=>{var t,n;const r=l.find(t=>t.id===e);return r?`${(null===(t=r.player1)||void 0===t?void 0:t.name)||"Jugador 1"} / ${(null===(n=r.player2)||void 0===n?void 0:n.name)||"Jugador 2"}`:"Pareja no encontrada"};if(h)return(0,s.jsxs)("div",{className:"public-loading",children:[(0,s.jsx)("div",{className:"public-loading-spinner",children:"\ud83c\udfc6"}),(0,s.jsx)("p",{children:"Cargando resultados de la reta..."})]});if(m)return(0,s.jsxs)("div",{className:"public-error",children:[(0,s.jsx)("h3",{children:"\u274c Error"}),(0,s.jsx)("p",{children:m})]});const k=i.reduce((e,t)=>{const n=t.round||1;return e[n]||(e[n]=[]),e[n].push(t),e},{}),N=i.length>0?Math.max(...i.map(e=>e.court||1)):1;return(0,s.jsxs)("div",{className:"public-tournament-view",children:[(0,s.jsx)("div",{className:"public-header",children:(0,s.jsxs)("div",{className:"public-header-content",children:[(0,s.jsx)("h1",{className:"public-title",children:"\ud83c\udfc6 Resultados en Tiempo Real"}),(0,s.jsx)("p",{className:"public-subtitle",children:"Sigue los resultados de tu reta de p\xe1del"})]})}),(0,s.jsxs)("div",{className:"public-matches-section",children:[(0,s.jsx)("div",{className:"public-matches-header",children:(0,s.jsx)("h2",{className:"public-matches-title",children:"\ud83d\udccb Partidos por Ronda"})}),Object.keys(k).sort((e,t)=>parseInt(e)-parseInt(t)).map(e=>(0,s.jsxs)("div",{className:"public-round-section",children:[(0,s.jsx)("div",{className:"public-round-header",children:(0,s.jsxs)("h3",{className:"public-round-title",children:["Ronda ",e]})}),(0,s.jsx)("div",{className:"public-matches-grid",children:k[parseInt(e)].map(e=>{const t=(e=>{const t=u.filter(t=>t.match_id===e);if(0===t.length)return{pair1Score:0,pair2Score:0,hasResult:!1};const n=t[t.length-1];return{pair1Score:n.pair1_games||0,pair2Score:n.pair2_games||0,hasResult:!0}})(e.id),n=t.hasResult&&t.pair1Score>t.pair2Score,a=t.hasResult&&t.pair2Score>t.pair1Score,i=u.filter(t=>t.match_id===e.id);return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("div",{className:"elegant-public-match-card desktop-only",children:[(0,s.jsx)("div",{className:"elegant-public-header",children:(0,s.jsxs)("div",{className:"elegant-match-info-top",children:[(0,s.jsxs)("span",{className:"elegant-court-badge",children:[(0,s.jsx)("span",{className:"elegant-court-icon",children:"\ud83c\udfdf\ufe0f"}),"Cancha ",e.court]}),(0,s.jsx)("div",{className:"elegant-match-status "+("finished"===e.status?"finished":"active"),children:"finished"===e.status?"\u2705 FINALIZADO":"\ud83d\udd04 EN PROGRESO"})]})}),(0,s.jsxs)("div",{className:"elegant-vs-layout",children:[(0,s.jsxs)("div",{className:"elegant-player-side left "+(n?"winner":""),children:[(0,s.jsx)("div",{className:"elegant-player-name",children:S(e.pair1_id)}),(0,s.jsx)("div",{className:"elegant-player-score "+(n?"winner":""),children:t.hasResult?t.pair1Score:0})]}),(0,s.jsxs)("div",{className:"elegant-vs-center",children:[(0,s.jsx)("div",{className:"elegant-vs-circle",children:(0,s.jsx)("span",{className:"elegant-vs-label",children:"VS"})}),(0,s.jsx)("div",{className:"elegant-score-line"})]}),(0,s.jsxs)("div",{className:"elegant-player-side right "+(a?"winner":""),children:[(0,s.jsx)("div",{className:"elegant-player-name",children:S(e.pair2_id)}),(0,s.jsx)("div",{className:"elegant-player-score "+(a?"winner":""),children:t.hasResult?t.pair2Score:0})]})]}),"finished"===e.status&&t.hasResult&&(0,s.jsx)("div",{className:"elegant-public-winner",children:(0,s.jsxs)("div",{className:"elegant-winner-banner",children:[(0,s.jsx)("span",{className:"elegant-winner-icon",children:"\ud83c\udfc6"}),(0,s.jsxs)("span",{className:"elegant-winner-text",children:["Ganador:"," ",n?S(e.pair1_id):a?S(e.pair2_id):"Empate"]})]})}),i.length>0&&(0,s.jsxs)("div",{className:"modern-games-results",children:[(0,s.jsx)("h6",{className:"modern-games-title",children:"\ud83d\udcca Juegos:"}),(0,s.jsx)("div",{className:"modern-games-grid",children:i.map((e,t)=>(0,s.jsxs)("div",{className:"modern-game-result",children:[(0,s.jsxs)("span",{className:"modern-game-number",children:["J",t+1,":"]}),(0,s.jsxs)("span",{className:"modern-game-score",children:[e.pair1_games,"-",e.pair2_games]})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"mobile-match-card mobile-only",children:[(0,s.jsxs)("div",{className:"mobile-header",children:[(0,s.jsxs)("span",{className:"mobile-court",children:["\ud83c\udfdf\ufe0f Cancha ",e.court]}),(0,s.jsx)("div",{className:"mobile-status "+("finished"===e.status?"finished":"active"),children:"finished"===e.status?"\u2705":"\ud83d\udd04"})]}),(0,s.jsxs)("div",{className:"mobile-match-content",children:[(0,s.jsxs)("div",{className:"mobile-team "+(n?"winner":""),children:[(0,s.jsx)("div",{className:"mobile-team-name",children:S(e.pair1_id)}),(0,s.jsx)("div",{className:"mobile-team-score",children:t.hasResult?t.pair1Score:0})]}),(0,s.jsx)("div",{className:"mobile-vs",children:"VS"}),(0,s.jsxs)("div",{className:"mobile-team "+(a?"winner":""),children:[(0,s.jsx)("div",{className:"mobile-team-name",children:S(e.pair2_id)}),(0,s.jsx)("div",{className:"mobile-team-score",children:t.hasResult?t.pair2Score:0})]})]}),"finished"===e.status&&t.hasResult&&(0,s.jsxs)("div",{className:"mobile-winner",children:["\ud83c\udfc6"," ",n?S(e.pair1_id):a?S(e.pair2_id):"Empate"]}),i.length>0&&(0,s.jsxs)("div",{className:"modern-games-results",children:[(0,s.jsx)("h6",{className:"modern-games-title",children:"\ud83d\udcca Juegos:"}),(0,s.jsx)("div",{className:"modern-games-grid",children:i.map((e,t)=>(0,s.jsxs)("div",{className:"modern-game-result",children:[(0,s.jsxs)("span",{className:"modern-game-number",children:["J",t+1,":"]}),(0,s.jsxs)("span",{className:"modern-game-score",children:[e.pair1_games,"-",e.pair2_games]})]},e.id))})]})]})]},e.id)})}),(0,s.jsx)(C,{pairs:l,matches:i,round:parseInt(e),courts:N})]},e))]}),(0,s.jsx)("div",{className:"public-standings-section",children:(0,s.jsx)(T,{tournamentId:a,forceRefresh:0})}),b&&v&&(0,s.jsxs)("div",{className:"public-winner-section",children:[(0,s.jsx)("div",{className:"public-winner-header",children:(0,s.jsx)("h2",{className:"public-winner-title",children:"\ud83c\udfc6 GANADORES DE LA RETA \ud83c\udfc6"})}),(0,s.jsxs)("div",{className:"public-winner-content",children:[(0,s.jsxs)("div",{className:"public-winner-names",children:[null===(t=v.pair.player1)||void 0===t?void 0:t.name," /"," ",null===(n=v.pair.player2)||void 0===n?void 0:n.name]}),(0,s.jsx)("div",{className:"public-winner-subtitle",children:"\xa1Son los campeones de la reta!"}),(0,s.jsxs)("div",{className:"public-winner-stats",children:[(0,s.jsxs)("div",{className:"public-winner-stat",children:[(0,s.jsx)("span",{className:"public-winner-stat-number",children:v.totalSets}),(0,s.jsx)("span",{className:"public-winner-stat-label",children:"Sets Ganados"})]}),(0,s.jsxs)("div",{className:"public-winner-stat",children:[(0,s.jsx)("span",{className:"public-winner-stat-number",children:v.matchesPlayed}),(0,s.jsx)("span",{className:"public-winner-stat-label",children:"Partidos Jugados"})]}),(0,s.jsxs)("div",{className:"public-winner-stat",children:[(0,s.jsx)("span",{className:"public-winner-stat-number",children:v.totalPoints}),(0,s.jsx)("span",{className:"public-winner-stat-label",children:"Puntos Totales"})]}),(0,s.jsxs)("div",{className:"public-winner-stat",children:[(0,s.jsxs)("span",{className:"public-winner-stat-number",children:[v.winPercentage.toFixed(1),"%"]}),(0,s.jsx)("span",{className:"public-winner-stat-label",children:"Porcentaje de Victoria"})]})]})]})]}),(0,s.jsxs)("div",{className:"public-footer",children:[(0,s.jsxs)("p",{className:"public-footer-text",children:["\ud83d\udcf1 Actualizaci\xf3n en tiempo real - \xdaltima actualizaci\xf3n:"," ",x.toLocaleTimeString()]}),(0,s.jsx)("p",{className:"public-footer-note",children:"Esta es la vista p\xfablica de resultados. Solo lectura."})]})]})},L=e=>{let{message:t,type:n,isVisible:a,onClose:i,duration:o=3e3}=e;const[l,c]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{if(a){c(!0);const e=setTimeout(()=>{c(!1),setTimeout(i,300)},o);return()=>clearTimeout(e)}},[a,o,i]),!a)return null;const u=(()=>{switch(n){case"success":return{background:"linear-gradient(135deg, #ffd700 0%, #ffb347 100%)",icon:"\ud83c\udf89"};case"error":return{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",icon:"\u26a0\ufe0f"};case"info":return{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",icon:"\u2139\ufe0f"};default:return{background:"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",icon:"\ud83d\udcac"}}})();return(0,s.jsxs)("div",{className:"modern-toast "+(l?"toast-visible":"toast-hidden"),style:{background:u.background},children:[(0,s.jsxs)("div",{className:"modern-toast-content",children:[(0,s.jsx)("span",{className:"modern-toast-icon",children:u.icon}),(0,s.jsx)("span",{className:"modern-toast-message",children:t})]}),(0,s.jsx)("button",{className:"modern-toast-close",onClick:i,children:"\u2715"})]})},U=e=>{let{onToggleMode:t}=e;const[n,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),{signIn:p}=h();return(0,s.jsx)("div",{className:"auth-form-container",children:(0,s.jsxs)("div",{className:"auth-form",children:[(0,s.jsxs)("div",{className:"auth-header",children:[(0,s.jsx)("h2",{children:"\ud83c\udfc6 Iniciar Sesi\xf3n"}),(0,s.jsx)("p",{children:"Accede a tu cuenta para gestionar tus retas"})]}),(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),d(null);const{error:t}=await p(n,i);t&&d(t.message),c(!1)},className:"auth-form-content",children:[u&&(0,s.jsx)("div",{className:"auth-error",children:(0,s.jsxs)("span",{children:["\u274c ",u]})}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",value:n,onChange:e=>a(e.target.value),placeholder:"tu@email.com",required:!0,disabled:l})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),(0,s.jsx)("input",{id:"password",type:"password",value:i,onChange:e=>o(e.target.value),placeholder:"Tu contrase\xf1a",required:!0,disabled:l})]}),(0,s.jsx)("button",{type:"submit",className:"auth-submit-btn",disabled:l,children:l?"\u23f3 Iniciando sesi\xf3n...":"\ud83d\ude80 Iniciar Sesi\xf3n"})]}),(0,s.jsx)("div",{className:"auth-footer",children:(0,s.jsxs)("p",{children:["\xbfNo tienes cuenta?"," ",(0,s.jsx)("button",{type:"button",onClick:t,className:"auth-toggle-btn",children:"Reg\xedstrate aqu\xed"})]})})]})})},z=e=>{let{onToggleMode:t}=e;const[n,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),{signUp:b}=h();return v?(0,s.jsx)("div",{className:"auth-form-container",children:(0,s.jsx)("div",{className:"auth-form",children:(0,s.jsxs)("div",{className:"auth-success",children:[(0,s.jsx)("h2",{children:"\u2705 \xa1Registro Exitoso!"}),(0,s.jsxs)("p",{children:["Te hemos enviado un email de confirmaci\xf3n a"," ",(0,s.jsx)("strong",{children:i})]}),(0,s.jsx)("p",{children:"Revisa tu bandeja de entrada y haz clic en el enlace para activar tu cuenta."}),(0,s.jsx)("button",{type:"button",onClick:t,className:"auth-submit-btn",children:"Ir a Iniciar Sesi\xf3n"})]})})}):(0,s.jsx)("div",{className:"auth-form-container",children:(0,s.jsxs)("div",{className:"auth-form",children:[(0,s.jsxs)("div",{className:"auth-header",children:[(0,s.jsx)("h2",{children:"\ud83c\udfc6 Crear Cuenta"}),(0,s.jsx)("p",{children:"\xdanete para gestionar tus retas de p\xe1del"})]}),(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f(!0),g(null),l!==u)return g("Las contrase\xf1as no coinciden"),void f(!1);if(l.length<6)return g("La contrase\xf1a debe tener al menos 6 caracteres"),void f(!1);const{error:t}=await b(i,l,n);t?g(t.message):y(!0),f(!1)},className:"auth-form-content",children:[m&&(0,s.jsx)("div",{className:"auth-error",children:(0,s.jsxs)("span",{children:["\u274c ",m]})}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Nombre"}),(0,s.jsx)("input",{id:"name",type:"text",value:n,onChange:e=>a(e.target.value),placeholder:"Tu nombre completo",required:!0,disabled:p})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",value:i,onChange:e=>o(e.target.value),placeholder:"tu@email.com",required:!0,disabled:p})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),(0,s.jsx)("input",{id:"password",type:"password",value:l,onChange:e=>c(e.target.value),placeholder:"M\xednimo 6 caracteres",required:!0,disabled:p})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmar Contrase\xf1a"}),(0,s.jsx)("input",{id:"confirmPassword",type:"password",value:u,onChange:e=>d(e.target.value),placeholder:"Repite tu contrase\xf1a",required:!0,disabled:p})]}),(0,s.jsx)("button",{type:"submit",className:"auth-submit-btn",disabled:p,children:p?"\u23f3 Creando cuenta...":"\ud83d\ude80 Crear Cuenta"})]}),(0,s.jsx)("div",{className:"auth-footer",children:(0,s.jsxs)("p",{children:["\xbfYa tienes cuenta?"," ",(0,s.jsx)("button",{type:"button",onClick:t,className:"auth-toggle-btn",children:"Inicia sesi\xf3n aqu\xed"})]})})]})})},M=()=>{const[e,t]=(0,r.useState)(!0),n=()=>{t(!e)};return(0,s.jsxs)("div",{className:"auth-page",children:[(0,s.jsx)("div",{className:"auth-background"}),(0,s.jsxs)("div",{className:"auth-layout",children:[(0,s.jsxs)("div",{className:"auth-hero",children:[(0,s.jsxs)("div",{className:"auth-logo",children:[(0,s.jsx)("h1",{children:"\ud83c\udfc6 Retas de P\xe1del"}),(0,s.jsx)("p",{className:"hero-subtitle",children:"Gestiona tus retas de p\xe1del de forma profesional"})]}),(0,s.jsxs)("div",{className:"hero-content",children:[(0,s.jsx)("h2",{className:"hero-title",children:"\xa1\xdanete a la mejor plataforma de retas de p\xe1del!"}),(0,s.jsxs)("div",{className:"features-list",children:[(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{className:"feature-icon",children:"\u26a1"}),(0,s.jsxs)("div",{className:"feature-text",children:[(0,s.jsx)("h3",{children:"Organizaci\xf3n Instant\xe1nea"}),(0,s.jsx)("p",{children:"Crea y gestiona retas de p\xe1del en segundos con nuestro sistema inteligente"})]})]}),(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{className:"feature-icon",children:"\ud83d\udcca"}),(0,s.jsxs)("div",{className:"feature-text",children:[(0,s.jsx)("h3",{children:"Estad\xedsticas en Tiempo Real"}),(0,s.jsx)("p",{children:"Mant\xe9n un seguimiento completo de resultados y clasificaciones"})]})]}),(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{className:"feature-icon",children:"\ud83c\udf10"}),(0,s.jsxs)("div",{className:"feature-text",children:[(0,s.jsx)("h3",{children:"Acceso P\xfablico"}),(0,s.jsx)("p",{children:"Comparte tus retas de p\xe1del con enlaces p\xfablicos para m\xe1xima visibilidad"})]})]}),(0,s.jsxs)("div",{className:"feature-item",children:[(0,s.jsx)("span",{className:"feature-icon",children:"\ud83c\udfc6"}),(0,s.jsxs)("div",{className:"feature-text",children:[(0,s.jsx)("h3",{children:"Experiencia Premium"}),(0,s.jsx)("p",{children:"Interfaz moderna y f\xe1cil de usar para una gesti\xf3n profesional"})]})]})]}),(0,s.jsxs)("div",{className:"cta-section",children:[(0,s.jsx)("p",{className:"cta-text",children:"\xbfListo para revolucionar tus retas de p\xe1del?"}),(0,s.jsx)("p",{className:"cta-subtext",children:"Inicia sesi\xf3n o reg\xedstrate para comenzar"})]})]})]}),(0,s.jsx)("div",{className:"auth-form-section",children:e?(0,s.jsx)(U,{onToggleMode:n}):(0,s.jsx)(z,{onToggleMode:n})})]})]})},F=e=>{let{children:t}=e;const{user:n,loading:r}=h();return r?(0,s.jsx)("div",{className:"loading-container",children:(0,s.jsxs)("div",{className:"loading-spinner",children:[(0,s.jsx)("div",{className:"spinner"}),(0,s.jsx)("p",{children:"\u23f3 Cargando..."})]})}):(()=>{const e=window.location.pathname;return"/admin-login"===e||"/admin-dashboard"===e})()?(console.log("\ud83d\udd0d Ruta de admin detectada, mostrando children sin verificar usuario"),(0,s.jsx)(s.Fragment,{children:t})):window.location.pathname.startsWith("/public/")?(console.log("\ud83d\udd0d Ruta p\xfablica detectada, mostrando children sin verificar usuario"),(0,s.jsx)(s.Fragment,{children:t})):n?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)(M,{})},W=()=>{const{user:e,userProfile:t,signOut:n}=h();if(!e||!t)return null;const r=t.name?t.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U";return(0,s.jsxs)("div",{className:"mobile-user-menu",children:[(0,s.jsx)("div",{className:"mobile-menu-options",children:(0,s.jsxs)("button",{className:"mobile-menu-option mobile-menu-logout",onClick:async()=>{await n()},children:[(0,s.jsx)("span",{className:"mobile-menu-icon",children:"\ud83d\udeaa"}),(0,s.jsx)("span",{className:"mobile-menu-text",children:"Cerrar Sesi\xf3n"})]})}),(0,s.jsxs)("div",{className:"mobile-user-info",children:[(0,s.jsx)("div",{className:"mobile-user-avatar",children:t.avatar_url?(0,s.jsx)("img",{src:t.avatar_url,alt:t.name,className:"mobile-user-avatar-img"}):(0,s.jsx)("span",{className:"mobile-user-avatar-initials",children:r})}),(0,s.jsxs)("div",{className:"mobile-user-details",children:[(0,s.jsx)("div",{className:"mobile-user-name",children:t.name}),(0,s.jsx)("div",{className:"mobile-user-email",children:t.email})]})]})]})},B=()=>{const{user:e,userProfile:t,signOut:n}=h(),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&u.current&&!u.current.contains(e.target)&&i(!1)};return a&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]),(0,s.jsx)("header",{className:"user-header",children:(0,s.jsxs)("div",{className:"user-header-content",children:[(0,s.jsx)("div",{className:"mobile-only mobile-header-top",children:(0,s.jsx)(W,{})}),(0,s.jsxs)("div",{className:"user-header-main",children:[(0,s.jsx)("div",{className:"user-header-logo",children:(0,s.jsx)("h1",{children:"Retas de P\xe1del"})}),(0,s.jsx)("div",{className:"user-header-actions",children:(0,s.jsxs)("div",{className:"user-profile-wrapper desktop-only",children:[(0,s.jsxs)("button",{ref:u,className:"user-profile-btn",onClick:()=>i(!a),children:[(0,s.jsx)("div",{className:"user-avatar",children:null!==t&&void 0!==t&&t.avatar_url?(0,s.jsx)("img",{src:t.avatar_url,alt:t.name,className:"user-avatar-img"}):(0,s.jsx)("span",{className:"user-avatar-initials",children:(d=(null===t||void 0===t?void 0:t.name)||(null===e||void 0===e?void 0:e.email)||"U",d.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))})}),(0,s.jsxs)("div",{className:"user-info",children:[(0,s.jsx)("span",{className:"user-name",children:(null===t||void 0===t?void 0:t.name)||"Usuario"}),(0,s.jsx)("span",{className:"user-email",children:null===e||void 0===e?void 0:e.email})]}),(0,s.jsx)("span",{className:"user-dropdown-arrow",children:a?"\u25b2":"\u25bc"})]}),a&&(0,s.jsx)("div",{ref:c,className:"user-dropdown-menu",children:(0,s.jsxs)("button",{className:"logout-button",onClick:async()=>{if(!o){l(!0),i(!1);try{await n()}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}finally{l(!1)}}},disabled:o,children:[(0,s.jsx)("span",{children:"\ud83d\udeaa"}),(0,s.jsx)("span",{children:o?"Cerrando...":"Cerrar Sesi\xf3n"})]})})]})})]})]})});var d},q=e=>{let{onSuccess:t}=e;const[n,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{console.log("\ud83d\udd04 Procesando callback de autenticaci\xf3n...");const{data:e,error:n}=await l.ND.auth.getSession();if(n)return console.error("\u274c Error en callback:",n),o("Error al confirmar tu cuenta. Por favor, intenta de nuevo."),void a(!1);e.session?(console.log("\u2705 Usuario autenticado exitosamente"),setTimeout(()=>{t?t():window.location.href="/"},2e3)):(console.log("\u26a0\ufe0f No hay sesi\xf3n activa"),o("No se pudo confirmar tu cuenta. Por favor, intenta de nuevo."),a(!1))}catch(e){console.error("\u274c Error en callback:",e),o("Error inesperado. Por favor, intenta de nuevo."),a(!1)}})()},[t]),n?(0,s.jsx)("div",{className:"auth-form-container",children:(0,s.jsx)("div",{className:"auth-form",children:(0,s.jsxs)("div",{className:"auth-success",children:[(0,s.jsx)("h2",{children:"\u23f3 Confirmando tu cuenta..."}),(0,s.jsx)("p",{children:"Por favor espera mientras confirmamos tu email."}),(0,s.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #ffd700",borderTop:"4px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"20px auto"}}),(0,s.jsx)("style",{children:"\n              @keyframes spin {\n                0% { transform: rotate(0deg); }\n                100% { transform: rotate(360deg); }\n              }\n            "})]})})}):i?(0,s.jsx)("div",{className:"auth-form-container",children:(0,s.jsx)("div",{className:"auth-form",children:(0,s.jsxs)("div",{className:"auth-error",children:[(0,s.jsx)("h2",{children:"\u274c Error de Confirmaci\xf3n"}),(0,s.jsx)("p",{children:i}),(0,s.jsx)("button",{type:"button",onClick:()=>window.location.href="/",className:"auth-submit-btn",children:"Volver al Login"})]})})}):(0,s.jsx)("div",{className:"auth-form-container",children:(0,s.jsx)("div",{className:"auth-form",children:(0,s.jsxs)("div",{className:"auth-success",children:[(0,s.jsx)("h2",{children:"\u2705 \xa1Cuenta Confirmada!"}),(0,s.jsx)("p",{children:"Tu email ha sido confirmado exitosamente."}),(0,s.jsx)("p",{children:"Te redirigiremos al dashboard en unos segundos..."}),(0,s.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #ffd700",borderTop:"4px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"20px auto"}})]})})})},G=(0,r.createContext)(void 0),V=()=>{const e=(0,r.useContext)(G);if(void 0===e)throw new Error("useAdmin must be used within an AdminProvider");return e},H=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0);console.log("\ud83d\udd0d AdminProvider inicializado"),(0,r.useEffect)(()=>{(()=>{console.log("\ud83d\udd0d Verificando sesi\xf3n de admin...");const e=localStorage.getItem("admin_session");if(console.log("\ud83d\udcca Admin session en localStorage:",e),e)try{const t=JSON.parse(e);console.log("\u2705 Sesi\xf3n de admin encontrada:",t),a(t)}catch(t){console.error("\u274c Error parsing admin session:",t),localStorage.removeItem("admin_session")}else console.log("\u26a0\ufe0f No hay sesi\xf3n de admin guardada");o(!1)})()},[]);const c={adminUser:n,isAdminLoggedIn:!!n,loginAdmin:async(e,t)=>{try{o(!0),console.log("\ud83d\udd10 Intentando login de admin:",e);const{data:n,error:r}=await l.ND.from("admin_users").select("*").eq("email",e).eq("is_active",!0).single();if(console.log("\ud83d\udcca Resultado de la consulta:",{data:n,error:r}),r||!n)return console.error("\u274c Error en login:",r),{success:!1,error:"Credenciales inv\xe1lidas"};if("123456"!==t)return{success:!1,error:"Contrase\xf1a incorrecta"};await l.ND.from("admin_users").update({last_login:(new Date).toISOString()}).eq("id",n.id);const s={id:n.id,email:n.email,name:n.name,created_at:n.created_at,last_login:(new Date).toISOString(),is_active:n.is_active};return localStorage.setItem("admin_session",JSON.stringify(s)),console.log("\ud83d\udcbe Admin session guardada en localStorage"),a(s),console.log("\ud83d\udd04 setAdminUser llamado con:",s),console.log("\u2705 Admin logueado exitosamente:",s),console.log("\ud83d\udd04 isAdminLoggedIn deber\xeda ser true ahora"),{success:!0}}catch(n){return console.error("Error en login de admin:",n),{success:!1,error:"Error interno del servidor"}}finally{o(!1)}},logoutAdmin:()=>{console.log("\ud83d\udeaa Cerrando sesi\xf3n de admin..."),localStorage.removeItem("admin_session"),a(null),console.log("\u2705 Sesi\xf3n de admin cerrada"),window.history.pushState({},"","/admin-login"),window.dispatchEvent(new PopStateEvent("popstate"))},loading:i};return console.log("\ud83d\udd0d AdminContext value:",{adminUser:n,isAdminLoggedIn:!!n,loading:i}),(0,s.jsx)(G.Provider,{value:c,children:t})},J=e=>{let{onLoginSuccess:t}=e;const{loginAdmin:n,loading:a,isAdminLoggedIn:i}=V(),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1);console.log("\ud83d\udd0d AdminLogin renderizado"),(0,r.useEffect)(()=>{i&&(console.log("\ud83d\udd04 Admin ya logueado, redirigiendo..."),t?t():window.location.href="/admin-dashboard")},[i,t]);return(0,s.jsxs)("div",{className:"admin-login-container",children:[(0,s.jsx)("div",{className:"admin-login-background",children:(0,s.jsx)("div",{className:"admin-login-pattern"})}),(0,s.jsxs)("div",{className:"admin-login-card",children:[(0,s.jsxs)("div",{className:"admin-login-header",children:[(0,s.jsxs)("div",{className:"admin-logo",children:[(0,s.jsx)("div",{className:"admin-logo-icon",children:"\ud83d\udee1\ufe0f"}),(0,s.jsx)("h1",{children:"Panel de Administraci\xf3n"})]}),(0,s.jsx)("p",{className:"admin-subtitle",children:"Acceso Seguro de Administrador"}),(0,s.jsxs)("div",{className:"admin-security-badge",children:[(0,s.jsx)("span",{className:"security-icon",children:"\ud83d\udd12"}),(0,s.jsx)("span",{children:"Conexi\xf3n Segura"})]})]}),(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(""),f(!0);try{console.log("\ud83d\udd10 Llamando a loginAdmin con:",{email:o,password:c});const e=await n(o,c);if(console.log("\ud83d\udcca Resultado de loginAdmin:",e),e.success)return console.log("\u2705 Login exitoso, redirigiendo..."),void(t?(console.log("\ud83d\udd04 Llamando onLoginSuccess..."),t()):(console.log("\ud83d\udd04 Usando window.location.href..."),window.location.href="/admin-dashboard"));console.log("\u274c Login fall\xf3:",e.error),h(e.error||"Error al iniciar sesi\xf3n")}catch(r){console.error("\u274c Error inesperado en login:",r),h("Error inesperado")}finally{f(!1)}},className:"admin-login-form",children:[(0,s.jsxs)("div",{className:"admin-form-group",children:[(0,s.jsxs)("label",{htmlFor:"email",children:[(0,s.jsx)("span",{className:"label-icon",children:"\ud83d\udce7"}),"Email de Administrador"]}),(0,s.jsxs)("div",{className:"input-container",children:[(0,s.jsx)("input",{type:"email",id:"email",value:o,onChange:e=>l(e.target.value),placeholder:"admin@test.com",required:!0,disabled:p,className:"admin-input"}),(0,s.jsx)("div",{className:"input-icon",children:"\ud83d\udc64"})]})]}),(0,s.jsxs)("div",{className:"admin-form-group",children:[(0,s.jsxs)("label",{htmlFor:"password",children:[(0,s.jsx)("span",{className:"label-icon",children:"\ud83d\udd11"}),"Contrase\xf1a de Acceso"]}),(0,s.jsxs)("div",{className:"input-container",children:[(0,s.jsx)("input",{type:"password",id:"password",value:c,onChange:e=>u(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,disabled:p,className:"admin-input"}),(0,s.jsx)("div",{className:"input-icon",children:"\ud83d\udd10"})]})]}),d&&(0,s.jsxs)("div",{className:"admin-error",children:[(0,s.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,s.jsx)("span",{children:d})]}),(0,s.jsxs)("button",{type:"submit",className:"admin-login-btn",disabled:p||a,children:[(0,s.jsx)("span",{className:"btn-icon",children:p?"\u23f3":"\ud83d\ude80"}),(0,s.jsx)("span",{className:"btn-text",children:p?"Verificando Acceso...":"Acceder al Panel"})]})]}),(0,s.jsxs)("div",{className:"admin-login-footer",children:[(0,s.jsxs)("div",{className:"admin-info",children:[(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("span",{className:"info-icon",children:"\ud83c\udfc6"}),(0,s.jsx)("span",{children:"Retas de P\xe1del"})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("span",{className:"info-icon",children:"\ud83d\udee1\ufe0f"}),(0,s.jsx)("span",{children:"Panel de Administraci\xf3n"})]})]}),(0,s.jsx)("div",{className:"admin-version",children:(0,s.jsx)("span",{children:"v1.0.0"})})]})]})]})},K=e=>{let{onUserSelect:t}=e;const[n,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)("created_at"),[p,f]=(0,r.useState)("desc"),[m,g]=(0,r.useState)("all"),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{o(!0),console.log("\ud83d\udd0d Cargando usuarios...");const{data:e,error:t}=await l.ND.from("users").select("*").order("created_at",{ascending:!1});if(t)return void console.error("\u274c Error cargando usuarios:",t);const{data:n,error:r}=await l.ND.from("tournaments").select("user_id");r&&console.error("\u274c Error cargando torneos:",r);const s={};n&&n.forEach(e=>{s[e.user_id]=(s[e.user_id]||0)+1});const i=e.map(e=>({...e,tournaments_count:s[e.id]||0,last_activity:e.updated_at}));a(i),console.log("\u2705 Usuarios cargados:",i.length)}catch(e){console.error("\u274c Error inesperado:",e)}finally{o(!1)}},_=(0,r.useMemo)(()=>{let e=n.filter(e=>{const t=e.name.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase()),n="all"===m||"active"===m&&(e.tournaments_count||0)>0||"inactive"===m&&0===(e.tournaments_count||0);return t&&n});return e.sort((e,t)=>{let n=e[d],r=t[d];return"created_at"!==d&&"updated_at"!==d||(n=new Date(n).getTime(),r=new Date(r).getTime()),"asc"===p?n>r?1:-1:n<r?1:-1}),e},[n,c,d,p,m]),j=async e=>{if(window.confirm(`\xbfEst\xe1s seguro de que quieres eliminar al usuario "${e.name}"? Esta acci\xf3n no se puede deshacer.`))try{console.log("\ud83d\uddd1\ufe0f Eliminando usuario:",e.id);const{error:t}=await l.ND.from("tournaments").delete().eq("user_id",e.id);t?console.error("\u274c Error eliminando torneos:",t):console.log("\u2705 Torneos eliminados");const{error:n}=await l.ND.from("players").delete().eq("user_id",e.id);n?console.error("\u274c Error eliminando jugadores:",n):console.log("\u2705 Jugadores eliminados");const{error:r}=await l.ND.from("pairs").delete().eq("user_id",e.id);r?console.error("\u274c Error eliminando pares:",r):console.log("\u2705 Pares eliminados");const{error:a}=await l.ND.from("matches").delete().eq("user_id",e.id);a?console.error("\u274c Error eliminando partidos:",a):console.log("\u2705 Partidos eliminados");const{error:s}=await l.ND.from("games").delete().eq("user_id",e.id);s?console.error("\u274c Error eliminando juegos:",s):console.log("\u2705 Juegos eliminados");const{error:i}=await l.ND.from("users").delete().eq("id",e.id);if(i)return void console.error("\u274c Error eliminando usuario de public.users:",i);console.log("\u2705 Usuario eliminado de public.users");const{error:o}=await l.E2.auth.admin.deleteUser(e.id);o?(console.error("\u274c Error eliminando usuario de auth.users:",o),console.log("\u26a0\ufe0f El usuario fue eliminado de public.users pero no de auth.users"),console.log("\u26a0\ufe0f Esto puede requerir permisos de administrador en Supabase")):console.log("\u2705 Usuario eliminado de auth.users"),console.log("\u2705 Usuario eliminado exitosamente de la base de datos"),await x(),(null===v||void 0===v?void 0:v.id)===e.id&&(w(!1),y(null))}catch(t){console.error("\u274c Error inesperado:",t)}},S=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return i?(0,s.jsx)("div",{className:"user-management-loading",children:(0,s.jsxs)("div",{className:"loading-spinner",children:[(0,s.jsx)("div",{className:"spinner"}),(0,s.jsx)("p",{children:"\u23f3 Cargando usuarios..."})]})}):(0,s.jsxs)("div",{className:"user-management",children:[(0,s.jsxs)("div",{className:"user-management-header",children:[(0,s.jsxs)("div",{className:"header-title",children:[(0,s.jsx)("h2",{children:"\ud83d\udc65 Gesti\xf3n de Usuarios"}),(0,s.jsxs)("span",{className:"user-count",children:[_.length," usuarios"]})]}),(0,s.jsx)("div",{className:"header-controls",children:(0,s.jsx)("button",{className:"refresh-btn",onClick:x,title:"Actualizar lista",children:"\ud83d\udd04 Actualizar"})})]}),(0,s.jsxs)("div",{className:"user-management-filters",children:[(0,s.jsx)("div",{className:"search-container",children:(0,s.jsx)("div",{className:"search-input-container",children:(0,s.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Buscar por nombre o email...",value:c,onChange:e=>u(e.target.value),className:"search-input"})})}),(0,s.jsxs)("div",{className:"filter-controls",children:[(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"filter-select",children:[(0,s.jsx)("option",{value:"all",children:"Todos los usuarios"}),(0,s.jsx)("option",{value:"active",children:"Usuarios activos"}),(0,s.jsx)("option",{value:"inactive",children:"Usuarios inactivos"})]}),(0,s.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"filter-select",children:[(0,s.jsx)("option",{value:"created_at",children:"Ordenar por fecha de registro"}),(0,s.jsx)("option",{value:"updated_at",children:"Ordenar por \xfaltima actualizaci\xf3n"}),(0,s.jsx)("option",{value:"name",children:"Ordenar por nombre"}),(0,s.jsx)("option",{value:"email",children:"Ordenar por email"}),(0,s.jsx)("option",{value:"tournaments_count",children:"Ordenar por retas"})]}),(0,s.jsx)("button",{onClick:()=>f("asc"===p?"desc":"asc"),className:"sort-btn",title:"Ordenar "+("asc"===p?"descendente":"ascendente"),children:"asc"===p?"\u2b06\ufe0f":"\u2b07\ufe0f"})]})]}),(0,s.jsx)("div",{className:"user-list",children:0===_.length?(0,s.jsxs)("div",{className:"no-users",children:[(0,s.jsx)("div",{className:"no-users-icon",children:"\ud83d\udc65"}),(0,s.jsx)("h3",{children:"No se encontraron usuarios"}),(0,s.jsx)("p",{children:"Intenta ajustar los filtros de b\xfasqueda"})]}):(0,s.jsx)("div",{className:"user-grid",children:_.map(e=>(0,s.jsxs)("div",{className:"user-card",children:[(0,s.jsx)("div",{className:"user-avatar",children:e.avatar_url?(0,s.jsx)("img",{src:e.avatar_url,alt:e.name,className:"user-avatar-img"}):(0,s.jsx)("span",{className:"user-avatar-initials",children:k(e.name)})}),(0,s.jsxs)("div",{className:"user-info",children:[(0,s.jsx)("h3",{className:"user-name",children:e.name}),(0,s.jsx)("p",{className:"user-email",children:e.email}),(0,s.jsxs)("div",{className:"user-stats",children:[(0,s.jsxs)("span",{className:"stat-item",children:[(0,s.jsx)("span",{className:"stat-icon",children:"\ud83c\udfc6"}),(0,s.jsxs)("span",{children:[e.tournaments_count||0," retas"]})]}),(0,s.jsxs)("span",{className:"stat-item",children:[(0,s.jsx)("span",{className:"stat-icon",children:"\ud83d\udcc5"}),(0,s.jsx)("span",{children:S(e.created_at)})]})]})]}),(0,s.jsxs)("div",{className:"user-actions",children:[(0,s.jsx)("button",{className:"action-btn view-btn",onClick:()=>(e=>{y(e),w(!0),t&&t(e)})(e),title:"Ver detalles",children:"\ud83d\udc41\ufe0f"}),(0,s.jsx)("button",{className:"action-btn delete-btn",onClick:()=>j(e),title:"Eliminar usuario",children:"\ud83d\uddd1\ufe0f"})]})]},e.id))})}),b&&v&&(0,s.jsxs)("div",{className:"user-details-modal",children:[(0,s.jsx)("div",{className:"modal-backdrop",onClick:()=>w(!1)}),(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h3",{children:"\ud83d\udc64 Detalles del Usuario"}),(0,s.jsx)("button",{className:"modal-close",onClick:()=>w(!1),children:"\u2715"})]}),(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsx)("div",{className:"user-detail-avatar",children:v.avatar_url?(0,s.jsx)("img",{src:v.avatar_url,alt:v.name,className:"detail-avatar-img"}):(0,s.jsx)("span",{className:"detail-avatar-initials",children:k(v.name)})}),(0,s.jsxs)("div",{className:"user-detail-info",children:[(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("label",{children:"Nombre:"}),(0,s.jsx)("span",{children:v.name})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("label",{children:"Email:"}),(0,s.jsx)("span",{children:v.email})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("label",{children:"ID:"}),(0,s.jsx)("span",{className:"user-id",children:v.id})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("label",{children:"Fecha de registro:"}),(0,s.jsx)("span",{children:S(v.created_at)})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("label",{children:"\xdaltima actualizaci\xf3n:"}),(0,s.jsx)("span",{children:S(v.updated_at)})]}),(0,s.jsxs)("div",{className:"detail-row",children:[(0,s.jsx)("label",{children:"Retas creadas:"}),(0,s.jsx)("span",{className:"tournaments-count",children:v.tournaments_count||0})]})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{className:"modal-btn secondary",onClick:()=>w(!1),children:"Cerrar"}),(0,s.jsx)("button",{className:"modal-btn danger",onClick:()=>{w(!1),j(v)},children:"\ud83d\uddd1\ufe0f Eliminar Usuario"})]})]})]})]})},Q=()=>{const{adminUser:e,logoutAdmin:t}=V(),[n,a]=(0,r.useState)([]),[i,o]=(0,r.useState)({totalUsers:0,totalTournaments:0,activeUsers:0,recentRegistrations:0}),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)("dashboard"),[p,f]=(0,r.useState)("");(0,r.useEffect)(()=>{e&&m()},[e]);const m=async()=>{try{u(!0),f("");const{data:e,error:t}=await l.ND.from("users").select("id, email, name, created_at").neq("email","admin@test.com").order("created_at",{ascending:!1});if(console.log("\ud83d\udd0d Consulta usuarios - Error:",t),console.log("\ud83d\udd0d Consulta usuarios - Data:",e),t)throw t;console.log("\ud83d\udc65 Usuarios cargados (sin admin):",e),console.log("\ud83d\udcca Total de usuarios encontrados:",(null===e||void 0===e?void 0:e.length)||0);const{data:n,error:r}=await l.ND.from("tournaments").select("id, created_at, user_id");if(r)throw r;const{data:s,error:i}=await l.ND.from("tournaments").select("user_id").in("user_id",(null===e||void 0===e?void 0:e.map(e=>e.id))||[]);i&&console.error("\u274c Error cargando torneos por usuario:",i),console.log("\ud83c\udfc6 Torneos por usuario:",s);const c=(null===e||void 0===e?void 0:e.map(e=>{const t=(null===s||void 0===s?void 0:s.filter(t=>t.user_id===e.id))||[];return{id:e.id,email:e.email,name:e.name,created_at:e.created_at,tournaments_count:t.length,last_activity:e.created_at}}))||[],d=new Date,h=new Date(d.getTime()-6048e5),p=new Date(d.getTime()-2592e6),m={totalUsers:c.length,totalTournaments:(null===n||void 0===n?void 0:n.length)||0,activeUsers:c.filter(e=>new Date(e.created_at)>h).length,recentRegistrations:c.filter(e=>new Date(e.created_at)>p).length};a(c),o(m)}catch(e){console.error("Error loading dashboard data:",e),f("Error al cargar los datos del dashboard")}finally{u(!1)}};return c?(0,s.jsx)("div",{className:"admin-dashboard-container",children:(0,s.jsx)("div",{className:"admin-loading",children:(0,s.jsx)("h2",{children:"\u23f3 Cargando datos..."})})}):(0,s.jsxs)("div",{className:"admin-dashboard-container",children:[(0,s.jsxs)("div",{className:"admin-dashboard-header",children:[(0,s.jsxs)("div",{className:"admin-header-info",children:[(0,s.jsx)("h1",{children:"\ud83d\udcca Panel de Administraci\xf3n"}),(0,s.jsxs)("p",{children:["Bienvenido, ",null===e||void 0===e?void 0:e.name]})]}),(0,s.jsx)("button",{onClick:()=>{t(),window.location.href="/admin-login"},className:"admin-logout-btn",children:"\ud83d\udeaa Cerrar Sesi\xf3n"})]}),p&&(0,s.jsxs)("div",{className:"admin-error-banner",children:["\u274c ",p]}),(0,s.jsxs)("div",{className:"admin-navigation",children:[(0,s.jsx)("button",{className:"nav-btn "+("dashboard"===d?"active":""),onClick:()=>h("dashboard"),children:"\ud83d\udcca Dashboard"}),(0,s.jsx)("button",{className:"nav-btn "+("users"===d?"active":""),onClick:()=>h("users"),children:"\ud83d\udc65 Gesti\xf3n de Usuarios"})]}),"dashboard"===d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"admin-stats-grid",children:[(0,s.jsxs)("div",{className:"admin-stat-card",children:[(0,s.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udc65"}),(0,s.jsxs)("div",{className:"admin-stat-content",children:[(0,s.jsx)("h3",{children:i.totalUsers}),(0,s.jsx)("p",{children:"Usuarios Registrados"})]})]}),(0,s.jsxs)("div",{className:"admin-stat-card",children:[(0,s.jsx)("div",{className:"admin-stat-icon",children:"\ud83c\udfc6"}),(0,s.jsxs)("div",{className:"admin-stat-content",children:[(0,s.jsx)("h3",{children:i.totalTournaments}),(0,s.jsx)("p",{children:"Retas Creadas"})]})]}),(0,s.jsxs)("div",{className:"admin-stat-card",children:[(0,s.jsx)("div",{className:"admin-stat-icon",children:"\ud83d\udcc8"}),(0,s.jsxs)("div",{className:"admin-stat-content",children:[(0,s.jsx)("h3",{children:i.activeUsers}),(0,s.jsx)("p",{children:"Usuarios Activos (7 d\xedas)"})]})]}),(0,s.jsxs)("div",{className:"admin-stat-card",children:[(0,s.jsx)("div",{className:"admin-stat-icon",children:"\ud83c\udd95"}),(0,s.jsxs)("div",{className:"admin-stat-content",children:[(0,s.jsx)("h3",{children:i.recentRegistrations}),(0,s.jsx)("p",{children:"Registros Recientes (30 d\xedas)"})]})]})]}),(0,s.jsxs)("div",{className:"admin-users-section",children:[(0,s.jsx)("h2",{children:"\ud83d\udc65 Usuarios Registrados"}),(0,s.jsx)("div",{className:"admin-users-table-container",children:(0,s.jsxs)("table",{className:"admin-users-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Usuario"}),(0,s.jsx)("th",{children:"Email"}),(0,s.jsx)("th",{children:"Retas Creadas"}),(0,s.jsx)("th",{children:"Fecha de Registro"})]})}),(0,s.jsx)("tbody",{children:n.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"admin-user-info",children:[(0,s.jsx)("div",{className:"admin-user-avatar",children:e.name.charAt(0).toUpperCase()}),(0,s.jsx)("span",{children:e.name})]})}),(0,s.jsx)("td",{children:e.email}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"admin-tournaments-count",children:e.tournaments_count})}),(0,s.jsx)("td",{children:new Date(e.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})})]},e.id))})]})})]})]}),"users"===d&&(0,s.jsx)(K,{})]})},Y=e=>{let{children:t,onUnauthorized:n}=e;const{isAdminLoggedIn:a,loading:i}=V();return(0,r.useEffect)(()=>{i||a||(console.log("\u274c Admin no autorizado, redirigiendo..."),n?n():(window.history.pushState({},"","/admin-login"),window.dispatchEvent(new PopStateEvent("popstate"))))},[a,i,n]),i?(0,s.jsx)("div",{className:"admin-loading-container",children:(0,s.jsx)("div",{className:"admin-loading",children:(0,s.jsx)("h2",{children:"\u23f3 Verificando acceso..."})})}):a?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)("div",{className:"admin-loading-container",children:(0,s.jsxs)("div",{className:"admin-loading",children:[(0,s.jsx)("h2",{children:"\u274c Acceso denegado"}),(0,s.jsx)("p",{children:"Redirigiendo al login..."})]})})},X=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(new Map),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(!1),u=(0,r.useCallback)(async e=>{if(e)if(c.current)console.log("\u23f3 Ya hay una recarga en progreso, ignorando...");else try{c.current=!0,l(!0),console.log("Loading tournament data for:",e.name);const[n,r]=await Promise.all([(0,p.getPairs)(e.id),(0,p.getMatches)(e.id)]);console.log("Pairs loaded:",n.length,"pairs"),t(n),console.log("Matches loaded from database:",r.length,"matches"),a(r),await(async(e,t,n)=>{console.log("\ud83e\uddee Calculando estad\xedsticas de parejas...");const r=new Map;e.forEach(e=>{r.set(e.id,{sets:0,matches:0,points:0})});try{const e=await(0,p.getTournamentGames)(n);console.log("\ud83c\udfae Juegos cargados:",e.length),t.forEach(t=>{if("finished"===t.status){const n=e.filter(e=>e.match_id===t.id),a=r.get(t.pair1_id),s=r.get(t.pair2_id);if(a&&s)if(a.matches+=1,s.matches+=1,n.length>0){let e=0,t=0,r=0,i=0;n.forEach(n=>{n.pair1_games>=6&&e++,n.pair2_games>=6&&t++,r+=n.pair1_games||0,i+=n.pair2_games||0}),a.sets+=e,a.points+=r,s.sets+=t,s.points+=i}else void 0!==t.pair1_score&&void 0!==t.pair2_score&&(a.sets+=t.pair1_score,a.points+=t.pair1_score,s.sets+=t.pair2_score,s.points+=t.pair2_score)}}),console.log("\ud83d\udcca Estad\xedsticas calculadas para",r.size,"parejas"),i(r)}catch(a){console.error("Error calculando estad\xedsticas:",a)}})(n,r,e.id)}catch(n){throw console.error("Error loading tournament data:",n),n}finally{l(!1),c.current=!1}},[]);return{pairs:e,setPairs:t,matches:n,setMatches:a,pairStats:s,loading:o,loadTournamentData:u}};class Z{static generateCircleRoundRobin(e,t){if(console.log("\ud83c\udfaf === ALGORITMO ROUND ROBIN CORRECTO (M\xc9TODO DEL C\xcdRCULO) ==="),console.log(`\ud83d\udcca Parejas: ${e.length}`),console.log(`\ud83c\udfdf\ufe0f Canchas: ${t}`),e.length<2)return[];const n=[],r=e.length%2===1,a=r?e.length:e.length-1,s=e.length*(e.length-1)/2;if(console.log(`\ud83d\udd04 Total rondas: ${a} (${e.length} parejas, ${r?"impar":"par"})`),console.log(`\ud83c\udfaf Partidos esperados: ${s}`),r){let r=[...e];console.log("\ud83d\udd04 Usando m\xe9todo del c\xedrculo completo (n\xfameros impares)");for(let e=1;e<=a;e++){console.log(`\n\ud83d\udd04 === RONDA ${e} ===`);const s=[],i=Math.floor(r.length/2),o=r[i],l=r.filter((e,t)=>t!==i);console.log(`\ud83d\ude34 Pareja que descansa: ${o.player1_name}/${o.player2_name}`),console.log(`\ud83d\udc65 Parejas que juegan: ${l.length}`);const c=Math.floor(l.length/2),u=Math.min(c,t);console.log(`\ud83d\udcca Partidos posibles: ${c}, Canchas: ${t}, Partidos a generar: ${u}`);for(let n=0;n<u;n++){const r=l[n],a=l[l.length-1-n],i=n%t+1;s.push({pair1:r,pair2:a,round:e,court:i}),console.log(`  \u2705 Cancha ${i}: ${r.player1_name}/${r.player2_name} vs ${a.player1_name}/${a.player2_name}`)}if(n.push(...s),console.log(`\u2705 Ronda ${e}: ${s.length} partidos, ${o.player1_name}/${o.player2_name} descansa`),e<a){const t=r.shift();t&&r.push(t),console.log(`\ud83d\udd04 C\xedrculo rotado para ronda ${e+1}`)}}}else{const r=e[0];let s=[...e.slice(1)];console.log(`\ud83c\udfaf Pareja fija: ${r.player1_name}/${r.player2_name}`),console.log(`\ud83d\udd04 Parejas rotantes: ${s.length}`),console.log("\ud83d\udd04 Usando m\xe9todo con pareja fija (n\xfameros pares)"),console.log(`\u26a0\ufe0f IMPORTANTE: Solo ${a} rondas, no m\xe1s`);for(let e=1;e<=a;e++){console.log(`\n\ud83d\udd04 === RONDA ${e} ===`);const i=[],o=[r,...s],l=Math.floor(o.length/2),c=Math.min(l,t);console.log(`\ud83d\udcca Partidos posibles: ${l}, Canchas: ${t}, Partidos a generar: ${c}`);for(let n=0;n<c;n++){const r=o[n],a=o[o.length-1-n],s=n%t+1;i.push({pair1:r,pair2:a,round:e,court:s}),console.log(`  \u2705 Cancha ${s}: ${r.player1_name}/${r.player2_name} vs ${a.player1_name}/${a.player2_name}`)}if(n.push(...i),console.log(`\u2705 Ronda ${e}: ${i.length} partidos (todas las parejas juegan)`),e<a){const t=s.pop();t&&s.unshift(t),console.log(`\ud83d\udd04 Parejas rotantes rotadas para ronda ${e+1}`)}else console.log("\ud83d\uded1 \xdaltima ronda alcanzada, no rotar m\xe1s")}}return console.log("\n\ud83c\udfaf === DISTRIBUCI\xd3N COMPLETADA ==="),console.log(`\ud83d\udcca Total partidos generados: ${n.length}`),console.log(`\ud83d\udd04 Total rondas: ${a}`),console.log(`\ud83c\udfaf Partidos esperados: ${s}`),n.length!==s?console.error(`\u274c ERROR: Se generaron ${n.length} partidos pero se esperaban ${s}`):console.log("\u2705 N\xfamero correcto de partidos generados"),this.verifyCircleDistribution(n,e,t),n}static verifyCircleDistribution(e,t,n){console.log("\n\ud83d\udccb === VERIFICACI\xd3N COMPLETA DEL ALGORITMO ===");const r={};e.forEach(e=>{r[e.round]||(r[e.round]=[]),r[e.round].push(e)});let a=!0;Object.keys(r).forEach(e=>{const t=r[parseInt(e)];console.log(`\n\ud83d\udd04 Verificando Ronda ${e}: ${t.length} partidos`),t.length>n?(console.error(`\u274c ERROR: Ronda ${e} tiene ${t.length} partidos pero solo hay ${n} canchas`),a=!1):console.log(`\u2705 Ronda ${e}: ${t.length} partidos \u2264 ${n} canchas`);const s=new Set;t.forEach(t=>{s.has(t.court)?(console.error(`\u274c ERROR: Cancha ${t.court} tiene m\xfaltiples partidos en ronda ${e}`),a=!1):s.add(t.court)}),s.size===t.length&&console.log("\u2705 Cada cancha tiene m\xe1ximo 1 partido");const i=new Set;t.forEach(t=>{i.has(t.pair1.id)?(console.error(`\u274c ERROR: Pareja ${t.pair1.player1_name}/${t.pair1.player2_name} juega m\xfaltiples veces en ronda ${e}`),a=!1):i.add(t.pair1.id),i.has(t.pair2.id)?(console.error(`\u274c ERROR: Pareja ${t.pair2.player1_name}/${t.pair2.player2_name} juega m\xfaltiples veces en ronda ${e}`),a=!1):i.add(t.pair2.id)}),i.size===2*t.length&&console.log("\u2705 Cada pareja juega solo una vez por ronda")}),console.log("\n\ud83c\udfaf === VERIFICACI\xd3N DE ENFRENTAMIENTOS \xdaNICOS ===");const s=new Set,i={};e.forEach(e=>{const t=[e.pair1.id,e.pair2.id].sort(),n=`${t[0]}-${t[1]}`;s.add(n),i[n]=(i[n]||0)+1});const o=t.length*(t.length-1)/2,l=s.size;if(console.log(`\ud83d\udcca Enfrentamientos \xfanicos encontrados: ${l}`),console.log(`\ud83c\udfaf Combinaciones esperadas: ${o}`),l===o)console.log("\u2705 Todas las parejas se enfrentan exactamente una vez (round robin completo)");else{console.error(`\u274c ERROR: Se encontraron ${l} enfrentamientos \xfanicos, pero se esperaban ${o}`),a=!1;const e=t.map(e=>e.id),n=[];for(let t=0;t<e.length;t++)for(let r=t+1;r<e.length;r++){const a=`${e[t]}-${e[r]}`;n.push(a)}const r=n.filter(e=>!s.has(e));r.length>0&&(console.error(`\u274c Enfrentamientos faltantes: ${r.length}`),r.slice(0,10).forEach(e=>{const[n,r]=e.split("-"),a=t.find(e=>e.id===n),s=t.find(e=>e.id===r);a&&s&&console.error(`   - ${a.player1_name}/${a.player2_name} vs ${s.player1_name}/${s.player2_name}`)}));const c=Object.keys(i).filter(e=>i[e]>1);c.length>0&&(console.error(`\u274c Enfrentamientos repetidos: ${c.length}`),c.slice(0,10).forEach(e=>{const[n,r]=e.split("-"),a=t.find(e=>e.id===n),s=t.find(e=>e.id===r);a&&s&&console.error(`   - ${a.player1_name}/${a.player2_name} vs ${s.player1_name}/${s.player2_name} (${i[e]} veces)`)}))}if(t.length%2===1){console.log("\n\ud83d\ude34 === VERIFICACI\xd3N DE PAREJAS QUE DESCANSAN ===");const e={};t.forEach(t=>{e[t.id]=0});const n=t.length;for(let i=1;i<=n;i++){const n=r[i]||[],s=new Set;n.forEach(e=>{s.add(e.pair1.id),s.add(e.pair2.id)});const o=t.find(e=>!s.has(e.id));o?(e[o.id]=(e[o.id]||0)+1,console.log(`  Ronda ${i}: ${o.player1_name}/${o.player2_name} descansa`)):(console.error(`  \u274c Ronda ${i}: No se encontr\xf3 pareja que descansa`),a=!1)}let s=!0;t.forEach(t=>{const n=e[t.id]||0;1!==n?(console.error(`\u274c ERROR: Pareja ${t.player1_name}/${t.player2_name} descansa ${n} veces (deber\xeda ser 1)`),s=!1,a=!1):console.log(`  \u2705 ${t.player1_name}/${t.player2_name} descansa exactamente 1 vez`)}),s&&console.log("\u2705 Todas las parejas descansan exactamente una vez")}a?console.log("\n\ud83c\udf89 \u2705 ALGORITMO PERFECTO - TODAS LAS REGLAS CUMPLIDAS"):console.log("\n\u274c ALGORITMO CON ERRORES - REVISAR C\xd3DIGO")}static async scheduleTournament(e,t,n,r){try{if(console.log("\ud83d\ude80 === INICIANDO PROGRAMACI\xd3N M\xc9TODO DEL C\xcdRCULO ==="),console.log(`\ud83c\udfc6 Reta ID: ${e}`),console.log(`\ud83d\udc65 Parejas: ${t.length}`),console.log(`\ud83c\udfdf\ufe0f Canchas: ${n}`),t.length<2)return{success:!1,message:"Se necesitan al menos 2 parejas para iniciar la reta",matches:[],totalRounds:0};console.log("\ud83d\uddd1\ufe0f Eliminando partidos existentes..."),await(0,p.deleteMatchesByTournament)(e);const s=this.generateCircleRoundRobin(t,n);if(0===s.length)return{success:!1,message:"No se pudieron generar partidos",matches:[],totalRounds:0};console.log("\ud83d\udcbe Creando partidos en la base de datos...");const i=[];for(const t of s)try{const n=await(0,p.createMatch)(e,t.pair1.id,t.pair2.id,t.court,t.round,r);i.push(n),console.log(`\u2705 Partido creado: ${t.pair1.player1_name}/${t.pair1.player2_name} vs ${t.pair2.player1_name}/${t.pair2.player2_name} - Cancha ${t.court} - Ronda ${t.round}`)}catch(a){throw console.error("\u274c Error creando partido:",a),a}const o=Math.max(...s.map(e=>e.round)),l=t.length*(t.length-1)/2;return console.log("\ud83c\udf89 === TORNEO PROGRAMADO EXITOSAMENTE ==="),console.log(`\ud83d\udcca Total partidos creados: ${i.length}`),console.log(`\ud83d\udd04 Total rondas: ${o}`),console.log(`\ud83c\udfaf Partidos esperados: ${l}`),i.length!==l&&console.error(`\u274c ADVERTENCIA: Se crearon ${i.length} partidos pero se esperaban ${l}`),{success:!0,message:`Reta programada exitosamente usando m\xe9todo del c\xedrculo. ${i.length} partidos distribuidos en ${o} rondas`,matches:s,totalRounds:o}}catch(a){return console.error("\u274c Error programando reta:",a),{success:!1,message:`Error al programar la reta: ${a instanceof Error?a.message:"Error desconocido"}`,matches:[],totalRounds:0}}}}function ee(){const{user:e}=h(),{isAdminLoggedIn:t}=V(),[n,a]=(0,r.useState)(null),[i,o]=(0,r.useState)(()=>{const e=window.location.pathname;return console.log("\ud83d\udd0d Inicializando currentView basado en path:",e),"/auth/callback"===e?"auth-callback":"/admin-login"===e?"admin-login":"/admin-dashboard"===e?"admin-dashboard":e.startsWith("/public/")?"public":"main"});(0,r.useEffect)(()=>{console.log("\ud83d\udd0d AppContent - isAdminLoggedIn:",t),console.log("\ud83d\udd0d AppContent - currentView:",i)},[t,i]),(0,r.useEffect)(()=>{console.log("\ud83d\udd0d useEffect admin login - isAdminLoggedIn:",t,"currentView:",i),t&&"admin-dashboard"!==i&&(console.log("\ud83d\udd04 Admin logueado detectado, cambiando a admin-dashboard"),o("admin-dashboard"))},[t,i]),(0,r.useEffect)(()=>{t||"admin-dashboard"!==i&&"admin-login"!==i||(console.log("\ud83d\udd04 Admin deslogueado detectado, cambiando a admin-login"),o("admin-login"))},[t,i]);const[c,u]=(0,r.useState)(null),[d,f]=(0,r.useState)(0),[,m]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=()=>{const e=window.location.pathname;console.log("\ud83d\udd0d Current path:",e),"/auth/callback"===e?o("auth-callback"):"/admin-login"===e?o("admin-login"):"/admin-dashboard"===e?o("admin-dashboard"):e.startsWith("/public/")&&(o("public"),u(e.split("/public/")[1]))},t=()=>{e()};window.addEventListener("popstate",t);const n=window.history.pushState,r=window.history.replaceState;return window.history.pushState=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.apply(window.history,r),setTimeout(e,0)},window.history.replaceState=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r.apply(window.history,n),setTimeout(e,0)},()=>{window.removeEventListener("popstate",t),window.history.pushState=n,window.history.replaceState=r}},[]);const[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(!1),[_,j]=(0,r.useState)(!1),[S,k]=(0,r.useState)([]),{toast:N,showToast:E,hideToast:P}=(()=>{const[e,t]=(0,r.useState)({message:"",type:"info",isVisible:!1});return{toast:e,showToast:function(e){t({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",isVisible:!0})},hideToast:()=>{t(e=>({...e,isVisible:!1}))}}})(),{pairs:T,setPairs:C,matches:R,setMatches:$,pairStats:U,loading:z,loadTournamentData:M}=X(),{tournamentWinner:W,showWinnerScreen:G,calculateAndShowWinner:H,hideWinnerScreen:K}=(()=>{const[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(!1);return{tournamentWinner:e,showWinnerScreen:n,calculateAndShowWinner:async(e,n,r)=>{try{console.log("\ud83c\udfc6 Calculando ganador de la reta...");const s=await A.calculateTournamentWinner(e,n);t(s),a(!0),r("winner"),console.log("\u2705 Ganador calculado y pantalla mostrada")}catch(s){console.error("\u274c Error al calcular ganador:",s),a(!0),r("winner")}},hideWinnerScreen:e=>{a(!1),e("main")}}})(),{deletePair:ee,updatePairPlayers:te,addPair:ne}=((e,t,n,r,a,s,i)=>({deletePair:async n=>{try{a(""),console.log("Eliminando pareja:",n),await(0,p.deletePair)(n),t(e.filter(e=>e.id!==n)),console.log("Pareja eliminada exitosamente"),s("Pareja eliminada exitosamente","success")}catch(r){console.error("Error eliminando pareja:",r),s("Error al eliminar la pareja","error")}},updatePairPlayers:async(n,r,s)=>{try{a(""),console.log("Actualizando pareja:",n),console.log("Nuevos jugadores:",r.name,"+",s.name),await(0,p.updatePair)(n,{player1_id:r.id,player2_id:s.id}),t(e.map(e=>e.id===n?{...e,player1_id:r.id,player2_id:s.id,player1:r,player2:s}:e)),console.log("Pareja actualizada exitosamente")}catch(i){console.error("Error actualizando pareja:",i),a("Error al actualizar la pareja: "+i.message)}},addPair:async(s,o)=>{if(n)try{if(a(""),e.find(e=>{var t,n,r,a;const i=e.player1_id===s.id&&e.player2_id===o.id||e.player1_id===o.id&&e.player2_id===s.id,l=(null===(t=e.player1)||void 0===t?void 0:t.name.toLowerCase())===s.name.toLowerCase()&&(null===(n=e.player2)||void 0===n?void 0:n.name.toLowerCase())===o.name.toLowerCase()||(null===(r=e.player1)||void 0===r?void 0:r.name.toLowerCase())===o.name.toLowerCase()&&(null===(a=e.player2)||void 0===a?void 0:a.name.toLowerCase())===s.name.toLowerCase();return i||l}))return void a(`La pareja ${s.name} / ${o.name} ya est\xe1 registrada`);const l=await(0,p.createPair)(n.id,s.id,o.id,i||"");t([...e,l]),r([]),console.log("Pair added successfully")}catch(l){console.error("Error creating pair:",l),a("Error al crear la pareja: "+l.message)}else a("No hay reta seleccionada")}}))(T,C,n,k,m,E,null===e||void 0===e?void 0:e.id),{startTournament:re,resetTournament:ae,loading:se}=((e,t,n,a,s)=>{const[i,o]=(0,r.useState)(!1);return{startTournament:async(t,r,i)=>{if(!t||r.length<2)s("Se necesitan al menos 2 parejas para iniciar la reta");else try{o(!0),s(""),console.log("\ud83d\ude80 Iniciando reta:",t.name),console.log("\ud83d\udcca Parejas:",r.length),console.log("\ud83c\udfdf\ufe0f Canchas:",t.courts);const l=await Z.scheduleTournament(t.id,r,t.courts,i);l.success?(await(0,p.updateTournament)(t.id,{is_started:!0}),e({...t,is_started:!0}),await n(),a(l.message,"success")):(s(l.message),a(l.message,"error"))}catch(l){console.error("Error starting tournament:",l),a("Error al iniciar la reta","error")}finally{o(!1)}},resetTournament:async(r,i)=>{if(console.log("\ud83d\udd04 Bot\xf3n de reset clickeado"),window.confirm("\xbfEst\xe1s seguro de que quieres resetear la reta? Esto eliminar\xe1 todos los partidos existentes y resetear\xe1 las estad\xedsticas de todas las parejas."))try{console.log("\ud83d\udd04 Iniciando proceso de reset..."),o(!0),console.log("\ud83d\uddd1\ufe0f Eliminando partidos..."),await(0,p.deleteMatchesByTournament)(r.id),console.log("\u2705 Partidos eliminados"),console.log("\ud83d\udd04 Marcando reta como no iniciada..."),await(0,p.updateTournament)(r.id,{is_started:!1}),console.log("\u2705 Reta marcada como no iniciada"),e({...r,is_started:!1}),t([]),console.log("\ud83d\udd04 Recargando datos de la reta..."),await n(),console.log("\u2705 Datos recargados"),a("\xa1Reta reseteada exitosamente!","success"),console.log("\ud83c\udf89 Reset completado exitosamente")}catch(l){console.error("\u274c Error al resetear la reta:",l),s("Error al resetear la reta: "+l.message)}finally{o(!1)}},loading:i}})(a,$,()=>n&&M(n),E,m);(0,r.useEffect)(()=>{const e=window.location.pathname.match(/^\/public\/([a-f0-9-]+)$/);if(e){const t=e[1];u(t),o("public")}},[]),(0,r.useEffect)(()=>{(async()=>{await(0,l.rN)()})()},[]),(0,r.useEffect)(()=>{n&&M(n)},[n]),(0,r.useEffect)(()=>{if(n&&d>0){const e=setTimeout(()=>{console.log("\ud83d\udd04 Recargando datos debido a forceRefresh:",d),M(n)},300);return()=>clearTimeout(e)}},[d,n]);const ie=e=>`${window.location.origin}/public/${e}`,oe=R.reduce((e,t)=>{const n=t.round||1;return e[n]||(e[n]=[]),e[n].push(t),e},{}),le=(0,r.useMemo)(()=>[...T].sort((e,t)=>{const n=`${e.player1_name}/${e.player2_name}`,r=`${t.player1_name}/${t.player2_name}`;return n.localeCompare(r)}),[T]),ce=(0,r.useMemo)(()=>R.length>0&&R.every(e=>"finished"===e.status),[R]),ue=(0,r.useMemo)(()=>(null===W||void 0===W?void 0:W.pair)||(le.length>0?le[0]:null),[W,le]);return(0,s.jsxs)("div",{className:"App",children:[(0,s.jsxs)(F,{children:["public"!==i&&"admin-login"!==i&&"admin-dashboard"!==i&&(0,s.jsx)(B,{}),"main"===i&&(0,s.jsx)(O,{selectedTournament:n,onTournamentSelect:a,loading:z||se,userId:null===e||void 0===e?void 0:e.id,pairs:T,matches:R,pairStats:U,matchesByRound:oe,showPlayerManager:g,setShowPlayerManager:v,showPairManager:y,setShowPairManager:b,showTournamentStatus:w,setShowTournamentStatus:x,showDebugInfo:_,setShowDebugInfo:j,selectedPlayers:S,setSelectedPlayers:k,setError:m,addPair:ne,updatePairPlayers:te,deletePair:ee,onReset:()=>ae(n,T),loadTournamentData:()=>n&&M(n),setForceRefresh:f,forceRefresh:d,onStartTournament:()=>re(n,T,(null===e||void 0===e?void 0:e.id)||""),onCopyPublicLink:async e=>{try{const t=ie(e);await navigator.clipboard.writeText(t),E("\xa1Enlace p\xfablico copiado al portapapeles!","success")}catch(t){E("Error al copiar el enlace","error")}},generatePublicLink:ie,isTournamentFinished:ce,winner:ue,tournamentWinner:W,onShowWinnerScreen:()=>H(T,R,o),onBackToHome:()=>{a(null),C([]),$([]),m(""),o("main"),f(0),j(!1)}}),"public"===i&&(0,s.jsx)(D,{tournamentId:c}),"auth-callback"===i&&(0,s.jsx)(q,{onSuccess:()=>o("main")}),"winner"===i&&(0,s.jsx)(I,{isVisible:G,winner:ue,tournamentWinner:W,onBackToManager:()=>K(o)}),"admin-login"===i&&(0,s.jsxs)(s.Fragment,{children:[console.log("\ud83d\udd0d Renderizando AdminLogin"),(0,s.jsx)(J,{onLoginSuccess:()=>{console.log("\ud83d\udd04 onLoginSuccess llamado - Redirigiendo a admin dashboard..."),o("admin-dashboard")}})]}),"admin-dashboard"===i&&(0,s.jsx)(Y,{onUnauthorized:()=>{console.log("\ud83d\udd04 Admin no autorizado, cambiando a admin-login"),o("admin-login")},children:(0,s.jsx)(Q,{})})]}),(0,s.jsx)(L,{message:N.message,type:N.type,isVisible:N.isVisible,onClose:P,duration:4e3})]})}const te=function(){return(0,s.jsx)(o,{children:(0,s.jsx)(d,{children:(0,s.jsx)(H,{children:(0,s.jsx)(ee,{})})})})};a.createRoot(document.getElementById("root")).render((0,s.jsx)(r.StrictMode,{children:(0,s.jsx)(te,{})}))})();
//# sourceMappingURL=main.b049f46b.js.map